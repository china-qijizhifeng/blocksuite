{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../src/ai/actions/types.ts"],"names":[],"mappings":"AAGA,MAAM,CAAC,MAAM,cAAc,GAAG;IAC5B,SAAS;IACT,SAAS;IACT,QAAQ;IACR,QAAQ;IACR,SAAS;IACT,oBAAoB;IACpB,qBAAqB;IACrB,UAAU;IACV,SAAS;IACT,QAAQ;CACA,CAAC;AAEX,MAAM,CAAC,MAAM,SAAS,GAAG;IACvB,cAAc;IACd,UAAU;IACV,UAAU;IACV,UAAU;IACV,UAAU;CACF,CAAC;AAEX,MAAM,CAAC,MAAM,iBAAiB,GAAG;IAC/B,YAAY;IACZ,cAAc;IACd,aAAa;IACb,aAAa;CACL,CAAC;AAEX,MAAM,CAAC,MAAM,oBAAoB,GAAG;IAClC,SAAS;IACT,mBAAmB;IACnB,oBAAoB;CACZ,CAAC","sourcesContent":["import type { EditorHost } from '@blocksuite/block-std';\nimport type { BlockModel } from '@blocksuite/store';\n\nexport const translateLangs = [\n  'English',\n  'Spanish',\n  'German',\n  'French',\n  'Italian',\n  'Simplified Chinese',\n  'Traditional Chinese',\n  'Japanese',\n  'Russian',\n  'Korean',\n] as const;\n\nexport const textTones = [\n  'Professional',\n  'Informal',\n  'Friendly',\n  'Critical',\n  'Humorous',\n] as const;\n\nexport const imageFilterStyles = [\n  'Clay style',\n  'Sketch style',\n  'Anime style',\n  'Pixel style',\n] as const;\n\nexport const imageProcessingTypes = [\n  'Clearer',\n  'Remove background',\n  'Convert to sticker',\n] as const;\n\nexport type CtxRecord = {\n  get(): Record<string, unknown>;\n  set(data: Record<string, unknown>): void;\n};\n\ndeclare global {\n  namespace BlockSuitePresets {\n    type TrackerControl =\n      | 'format-bar'\n      | 'slash-menu'\n      | 'chat-send'\n      | 'block-action-bar';\n\n    type TrackerWhere = 'chat-panel' | 'inline-chat-panel' | 'ai-panel';\n\n    interface TrackerOptions {\n      control: TrackerControl;\n      where: TrackerWhere;\n    }\n\n    interface AITextActionOptions {\n      input?: string;\n      stream?: boolean;\n      attachments?: (string | File | Blob)[]; // blob could only be strings for the moments (url or data urls)\n      signal?: AbortSignal;\n      retry?: boolean;\n\n      // action's context\n      docId: string;\n      workspaceId: string;\n\n      // internal context\n      host: EditorHost;\n      models?: (BlockModel | BlockSuite.SurfaceElementModelType)[];\n      control: TrackerControl;\n      where: TrackerWhere;\n    }\n\n    interface AIImageActionOptions extends AITextActionOptions {\n      content?: string;\n      seed?: string;\n    }\n\n    interface FilterImageOptions extends AIImageActionOptions {\n      style: (typeof imageFilterStyles)[number];\n    }\n\n    interface ProcessImageOptions extends AIImageActionOptions {\n      type: (typeof imageProcessingTypes)[number];\n    }\n\n    type TextStream = {\n      [Symbol.asyncIterator](): AsyncIterableIterator<string>;\n    };\n\n    type AIActionTextResponse<T extends AITextActionOptions> =\n      T['stream'] extends true ? TextStream : Promise<string>;\n\n    interface TranslateOptions extends AITextActionOptions {\n      lang: (typeof translateLangs)[number];\n    }\n\n    interface ChangeToneOptions extends AITextActionOptions {\n      tone: (typeof textTones)[number];\n    }\n\n    interface ExpandMindMap extends AITextActionOptions {\n      mindmap: string;\n    }\n\n    interface BrainstormMindMap extends AITextActionOptions {\n      regenerate?: boolean;\n    }\n\n    interface AIActions {\n      // chat is a bit special because it's has a internally maintained session\n      chat<T extends AITextActionOptions>(options: T): AIActionTextResponse<T>;\n\n      summary<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      improveWriting<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      improveGrammar<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      fixSpelling<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      createHeadings<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      makeLonger<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      makeShorter<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      continueWriting<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      checkCodeErrors<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      explainCode<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      writeArticle<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      writeTwitterPost<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      writePoem<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      writeBlogPost<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      brainstorm<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      writeOutline<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n\n      explainImage<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n\n      findActions<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n\n      // mindmap\n      brainstormMindmap<T extends BrainstormMindMap>(\n        options: T\n      ): AIActionTextResponse<T>;\n      expandMindmap<T extends ExpandMindMap>(\n        options: T\n      ): AIActionTextResponse<T>;\n\n      // presentation\n      createSlides<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n\n      // explain this\n      explain<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n\n      // actions with variants\n      translate<T extends TranslateOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      changeTone<T extends ChangeToneOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n\n      // make it real, image to text\n      makeItReal<T extends AIImageActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      createImage<T extends AIImageActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      processImage<T extends ProcessImageOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      filterImage<T extends FilterImageOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n      generateCaption<T extends AITextActionOptions>(\n        options: T\n      ): AIActionTextResponse<T>;\n    }\n\n    // todo: should be refactored to get rid of implement details (like messages, action, role, etc.)\n    interface AIHistory {\n      sessionId: string;\n      tokens: number;\n      action: string;\n      createdAt: string;\n      messages: {\n        content: string;\n        createdAt: string;\n        role: 'user' | 'assistant';\n      }[];\n    }\n\n    interface AIHistoryService {\n      // non chat histories\n      actions: (\n        workspaceId: string,\n        docId?: string\n      ) => Promise<AIHistory[] | undefined>;\n      chats: (\n        workspaceId: string,\n        docId?: string\n      ) => Promise<AIHistory[] | undefined>;\n      cleanup: (\n        workspaceId: string,\n        docId: string,\n        sessionIds: string[]\n      ) => Promise<void>;\n    }\n\n    interface AIPhotoEngineService {\n      searchImages(options: {\n        width: number;\n        height: number;\n        query: string;\n      }): Promise<string[]>;\n    }\n  }\n}\n"]}