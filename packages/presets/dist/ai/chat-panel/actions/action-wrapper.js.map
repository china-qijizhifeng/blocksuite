{"version":3,"file":"action-wrapper.js","sourceRoot":"","sources":["../../../../src/ai/chat-panel/actions/action-wrapper.ts"],"names":[],"mappings":"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","sourcesContent":["import type { EditorHost } from '@blocksuite/block-std';\nimport { WithDisposable } from '@blocksuite/block-std';\nimport { css, html, LitElement, nothing, type TemplateResult } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\n\nimport {\n  ActionIcon,\n  AIChangeToneIcon,\n  AIDoneIcon,\n  AIExpandMindMapIcon,\n  AIExplainIcon,\n  AIExplainSelectionIcon,\n  AIFindActionsIcon,\n  AIImageIcon,\n  AIImproveWritingIcon,\n  AIMakeLongerIcon,\n  AIMakeRealIcon,\n  AIMakeShorterIcon,\n  AIMindMapIcon,\n  AIPenIcon,\n  AIPresentationIcon,\n  ArrowDownIcon,\n  ArrowUpIcon,\n} from '../../_common/icons.js';\nimport { createTextRenderer } from '../../messages/text.js';\nimport type { ChatAction } from '../chat-context.js';\nimport { renderImages } from '../components/images.js';\nimport { HISTORY_IMAGE_ACTIONS } from '../const.js';\n\nconst icons: Record<string, TemplateResult<1>> = {\n  'Fix spelling for it': AIDoneIcon,\n  'Improve grammar for it': AIDoneIcon,\n  'Explain this code': AIExplainIcon,\n  'Check code error': AIExplainIcon,\n  'Explain this': AIExplainSelectionIcon,\n  Translate: ActionIcon,\n  'Change tone': AIChangeToneIcon,\n  'Improve writing for it': AIImproveWritingIcon,\n  'Make it longer': AIMakeLongerIcon,\n  'Make it shorter': AIMakeShorterIcon,\n  'Continue writing': AIPenIcon,\n  'Make it real': AIMakeRealIcon,\n  'Find action items from it': AIFindActionsIcon,\n  Summary: AIPenIcon,\n  'Create headings': AIPenIcon,\n  'Write outline': AIPenIcon,\n  image: AIImageIcon,\n  'Brainstorm mindmap': AIMindMapIcon,\n  'Expand mind map': AIExpandMindMapIcon,\n  'Create a presentation': AIPresentationIcon,\n  'Write a poem about this': AIPenIcon,\n  'Write a blog post about this': AIPenIcon,\n  'AI image filter clay style': AIImageIcon,\n  'AI image filter sketch style': AIImageIcon,\n  'AI image filter anime style': AIImageIcon,\n  'AI image filter pixel style': AIImageIcon,\n  Clearer: AIImageIcon,\n  'Remove background': AIImageIcon,\n  'Convert to sticker': AIImageIcon,\n};\n\n@customElement('action-wrapper')\nexport class ActionWrapper extends WithDisposable(LitElement) {\n  static override styles = css`\n    .action-name {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      height: 22px;\n      margin-bottom: 12px;\n\n      svg {\n        color: var(--affine-primary-color);\n      }\n\n      div:last-child {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        flex: 1;\n\n        div:last-child svg {\n          margin-left: auto;\n        }\n      }\n    }\n\n    .answer-prompt {\n      padding: 8px;\n      background-color: var(--affine-background-secondary-color);\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n      font-size: 14px;\n      font-weight: 400;\n      color: var(--affine-text-primary-color);\n\n      .subtitle {\n        font-size: 12px;\n        font-weight: 500;\n        color: var(--affine-text-secondary-color);\n        height: 20px;\n        line-height: 20px;\n      }\n\n      .prompt {\n        margin-top: 12px;\n      }\n    }\n  `;\n\n  @state()\n  accessor promptShow = false;\n\n  @property({ attribute: false })\n  accessor item!: ChatAction;\n\n  @property({ attribute: false })\n  accessor host!: EditorHost;\n\n  protected override render() {\n    const { item } = this;\n\n    const originalText = item.messages[1].content;\n    const answer = item.messages[2]?.content;\n    const images = item.messages[1].attachments;\n\n    return html`<style></style>\n      <slot></slot>\n      <div\n        class=\"action-name\"\n        @click=${() => (this.promptShow = !this.promptShow)}\n      >\n        ${icons[item.action] ? icons[item.action] : ActionIcon}\n        <div>\n          <div>${item.action}</div>\n          <div>${this.promptShow ? ArrowDownIcon : ArrowUpIcon}</div>\n        </div>\n      </div>\n      ${this.promptShow\n        ? html`\n            <div class=\"answer-prompt\">\n              <div class=\"subtitle\">Answer</div>\n              ${HISTORY_IMAGE_ACTIONS.includes(item.action)\n                ? images && renderImages(images)\n                : nothing}\n              ${answer\n                ? createTextRenderer(this.host, { customHeading: true })(answer)\n                : nothing}\n              ${originalText\n                ? html`<div class=\"subtitle prompt\">Prompt</div>\n                    ${createTextRenderer(this.host, { customHeading: true })(\n                      item.messages[0].content + originalText\n                    )}`\n                : nothing}\n            </div>\n          `\n        : nothing} `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'action-wrapper': ActionWrapper;\n  }\n}\n"]}