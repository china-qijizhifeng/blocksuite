{"version":3,"file":"setup-code-toolbar.js","sourceRoot":"","sources":["../../../../src/ai/entries/code-toolbar/setup-code-toolbar.ts"],"names":[],"mappings":"AAAA,OAAO,2CAA2C,CAAC;AAMnD,OAAO,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAE3B,MAAM,gBAAgB,GAAG,qBAAqB,EAAE,CAAC;AACjD,MAAM,aAAa,GAAuB;IACxC,IAAI,EAAE,OAAO;IACb,UAAU,EAAE,GAAG;CAChB,CAAC;AAGF,OAAO,EAAE,qBAAqB,EAAE,MAAM,yBAAyB,CAAC;AAChE,OAAO,EAAE,UAAU,EAAE,MAAM,wBAAwB,CAAC;AAEpD,MAAM,UAAU,qBAAqB,CAAC,WAAoC;IACxE,MAAM,YAAY,GAAG,GAAG,EAAE;QACxB,MAAM,EAAE,IAAI,EAAE,GAAG,WAAW,CAAC;QAC7B,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAC3B,MAAM,UAAU,GAAG,WAAW,CAAC,YAAY,CAAC;QAC5C,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;YACzB,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,OAAO,EAAE,UAAU,CAAC,OAAO,EAAE,CAAC;SAC3D,CAAC,CAAC;IACL,CAAC,CAAC;IACF,WAAW,CAAC,kBAAkB,EAAE,CAAC;IACjC,WAAW,CAAC,QAAQ,CAClB;QACE;YACE,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE,QAAQ;YACd,OAAO,EAAE,QAAQ;YACjB,IAAI,EAAE,UAAU;YAChB,QAAQ,EAAE,GAAG,EAAE,CAAC,IAAI;YACpB,MAAM,CAAC,SAA6B,EAAE,OAAoB;gBACxD,OAAO,IAAI,CAAA;;oBAED,SAAS,CAAC,IAAI;4BACN,gBAAgB;0BAClB,OAAO;uBACV,aAAa;qBACf,CAAC,CAAa,EAAE,EAAE;oBACzB,CAAC,CAAC,eAAe,EAAE,CAAC;oBACpB,YAAY,EAAE,CAAC;oBACf,OAAO,EAAE,EAAE,CAAC;gBACd,CAAC;4BACe,CAAC;YACrB,CAAC;SACF;KACF,EACD,CAAC,CACF,CAAC;AACJ,CAAC","sourcesContent":["import '../../_common/components/ask-ai-button.js';\n\nimport type {\n  AffineCodeToolbarWidget,\n  CodeBlockComponent,\n} from '@blocksuite/blocks';\nimport { html } from 'lit';\n\nconst AICodeItemGroups = buildAICodeItemGroups();\nconst buttonOptions: AskAIButtonOptions = {\n  size: 'small',\n  panelWidth: 240,\n};\n\nimport type { AskAIButtonOptions } from '../../_common/components/ask-ai-button.js';\nimport { buildAICodeItemGroups } from '../../_common/config.js';\nimport { AIStarIcon } from '../../_common/icons.js';\n\nexport function setupCodeToolbarEntry(codeToolbar: AffineCodeToolbarWidget) {\n  const onAskAIClick = () => {\n    const { host } = codeToolbar;\n    const { selection } = host;\n    const imageBlock = codeToolbar.blockElement;\n    selection.setGroup('note', [\n      selection.create('block', { blockId: imageBlock.blockId }),\n    ]);\n  };\n  codeToolbar.setupDefaultConfig();\n  codeToolbar.addItems(\n    [\n      {\n        type: 'custom',\n        name: 'Ask AI',\n        tooltip: 'Ask AI',\n        icon: AIStarIcon,\n        showWhen: () => true,\n        render(codeBlock: CodeBlockComponent, onClick?: () => void) {\n          return html`<ask-ai-button\n            class=\"code-toolbar-button ask-ai\"\n            .host=${codeBlock.host}\n            .actionGroups=${AICodeItemGroups}\n            .toggleType=${'click'}\n            .options=${buttonOptions}\n            @click=${(e: MouseEvent) => {\n              e.stopPropagation();\n              onAskAIClick();\n              onClick?.();\n            }}\n          ></ask-ai-button>`;\n        },\n      },\n    ],\n    0\n  );\n}\n"]}