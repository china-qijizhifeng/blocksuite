{"version":3,"file":"setup-image-toolbar.js","sourceRoot":"","sources":["../../../../src/ai/entries/image-toolbar/setup-image-toolbar.ts"],"names":[],"mappings":"AAAA,OAAO,2CAA2C,CAAC;AAMnD,OAAO,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAG3B,OAAO,EAAE,sBAAsB,EAAE,MAAM,yBAAyB,CAAC;AAEjE,MAAM,iBAAiB,GAAG,sBAAsB,EAAE,CAAC;AACnD,MAAM,aAAa,GAAuB;IACxC,IAAI,EAAE,OAAO;IACb,eAAe,EAAE,qBAAqB;IACtC,UAAU,EAAE,GAAG;CAChB,CAAC;AAEF,MAAM,UAAU,sBAAsB,CAAC,YAAsC;IAC3E,MAAM,YAAY,GAAG,GAAG,EAAE;QACxB,MAAM,EAAE,IAAI,EAAE,GAAG,YAAY,CAAC;QAC9B,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAC3B,MAAM,UAAU,GAAG,YAAY,CAAC,YAAY,CAAC;QAC7C,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;YACzB,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,OAAO,EAAE,UAAU,CAAC,OAAO,EAAE,CAAC;SAC3D,CAAC,CAAC;IACL,CAAC,CAAC;IACF,YAAY,CAAC,kBAAkB,EAAE,CAAC;IAClC,YAAY,CAAC,cAAc,CACzB;QACE;YACE,IAAI,EAAE,QAAQ;YACd,MAAM,CAAC,UAA+B,EAAE,OAAoB;gBAC1D,OAAO,IAAI,CAAA;;oBAED,UAAU,CAAC,IAAI;4BACP,iBAAiB;0BACnB,OAAO;uBACV,aAAa;qBACf,CAAC,CAAa,EAAE,EAAE;oBACzB,CAAC,CAAC,eAAe,EAAE,CAAC;oBACpB,YAAY,EAAE,CAAC;oBACf,OAAO,EAAE,EAAE,CAAC;gBACd,CAAC;4BACe,CAAC;YACrB,CAAC;YACD,QAAQ,EAAE,GAAG,EAAE,CAAC,IAAI;SACrB;KACF,EACD,CAAC,CACF,CAAC;AACJ,CAAC","sourcesContent":["import '../../_common/components/ask-ai-button.js';\n\nimport type {\n  AffineImageToolbarWidget,\n  ImageBlockComponent,\n} from '@blocksuite/blocks';\nimport { html } from 'lit';\n\nimport type { AskAIButtonOptions } from '../../_common/components/ask-ai-button.js';\nimport { buildAIImageItemGroups } from '../../_common/config.js';\n\nconst AIImageItemGroups = buildAIImageItemGroups();\nconst buttonOptions: AskAIButtonOptions = {\n  size: 'small',\n  backgroundColor: 'var(--affine-white)',\n  panelWidth: 300,\n};\n\nexport function setupImageToolbarEntry(imageToolbar: AffineImageToolbarWidget) {\n  const onAskAIClick = () => {\n    const { host } = imageToolbar;\n    const { selection } = host;\n    const imageBlock = imageToolbar.blockElement;\n    selection.setGroup('note', [\n      selection.create('image', { blockId: imageBlock.blockId }),\n    ]);\n  };\n  imageToolbar.buildDefaultConfig();\n  imageToolbar.addConfigItems(\n    [\n      {\n        type: 'custom',\n        render(imageBlock: ImageBlockComponent, onClick?: () => void) {\n          return html`<ask-ai-button\n            class=\"image-toolbar-button ask-ai\"\n            .host=${imageBlock.host}\n            .actionGroups=${AIImageItemGroups}\n            .toggleType=${'click'}\n            .options=${buttonOptions}\n            @click=${(e: MouseEvent) => {\n              e.stopPropagation();\n              onAskAIClick();\n              onClick?.();\n            }}\n          ></ask-ai-button>`;\n        },\n        showWhen: () => true,\n      },\n    ],\n    0\n  );\n}\n"]}