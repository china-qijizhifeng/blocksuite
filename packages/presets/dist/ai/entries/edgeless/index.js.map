{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/ai/entries/edgeless/index.ts"],"names":[],"mappings":"AAKA,OAAO,EACL,2BAA2B,GAE5B,MAAM,oBAAoB,CAAC;AAC5B,OAAO,EAAE,IAAI,EAAE,MAAM,0BAA0B,CAAC;AAChD,OAAO,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAE3B,OAAO,EAAE,oBAAoB,EAAE,MAAM,qBAAqB,CAAC;AAE3D,IAAI,CAAC,2BAA2B,CAAC,CAAC;AAElC,MAAM,UAAU,oBAAoB,CAAC,MAA6B;IAChE,MAAM,CAAC,MAAM,GAAG,oBAAoB,CAAC;AACvC,CAAC;AAED,MAAM,UAAU,gCAAgC,CAC9C,MAAoC;IAEpC,MAAM,CAAC,aAAa,CAAC;QACnB,IAAI,EAAE,GAAG,EAAE;YACT,OAAO,IAAI,CAAC;QACd,CAAC;QACD,MAAM,EAAE,CAAC,QAAoC,EAAE,EAAE;YAC/C,MAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;YACnD,MAAM,cAAc,GAAG,oBAAoB,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;gBAChE,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CACzC,IAAI,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,UAAU,EAAE,QAAQ,CAAC,IAAI,CAAC,CAClD,CAAC;gBAEF,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC;oBAAE,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;gBAEjE,OAAO,GAAG,CAAC;YACb,CAAC,EAAE,EAAyB,CAAC,CAAC;YAE9B,IAAI,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC;gBAAE,OAAO,IAAI,CAAC;YAEzE,OAAO,IAAI,CAAA;oBACG,QAAQ;gBACZ,QAAQ,CAAC,IAAI;kBACX,oBAAoB;yCACG,CAAC;QACtC,CAAC;KACF,CAAC,CAAC;AACL,CAAC","sourcesContent":["import type {\n  AIItemGroupConfig,\n  EdgelessElementToolbarWidget,\n  EdgelessRootBlockComponent,\n} from '@blocksuite/blocks';\nimport {\n  EdgelessCopilotToolbarEntry,\n  type EdgelessCopilotWidget,\n} from '@blocksuite/blocks';\nimport { noop } from '@blocksuite/global/utils';\nimport { html } from 'lit';\n\nimport { edgelessActionGroups } from './actions-config.js';\n\nnoop(EdgelessCopilotToolbarEntry);\n\nexport function setupEdgelessCopilot(widget: EdgelessCopilotWidget) {\n  widget.groups = edgelessActionGroups;\n}\n\nexport function setupEdgelessElementToolbarEntry(\n  widget: EdgelessElementToolbarWidget\n) {\n  widget.registerEntry({\n    when: () => {\n      return true;\n    },\n    render: (edgeless: EdgelessRootBlockComponent) => {\n      const chain = edgeless.service.std.command.chain();\n      const filteredGroups = edgelessActionGroups.reduce((pre, group) => {\n        const filtered = group.items.filter(item =>\n          item.showWhen?.(chain, 'edgeless', edgeless.host)\n        );\n\n        if (filtered.length > 0) pre.push({ ...group, items: filtered });\n\n        return pre;\n      }, [] as AIItemGroupConfig[]);\n\n      if (filteredGroups.every(group => group.items.length === 0)) return null;\n\n      return html`<edgeless-copilot-toolbar-entry\n        .edgeless=${edgeless}\n        .host=${edgeless.host}\n        .groups=${edgelessActionGroups}\n      ></edgeless-copilot-toolbar-entry>`;\n    },\n  });\n}\n"]}