{"version":3,"file":"actions-config.js","sourceRoot":"","sources":["../../../../src/ai/entries/edgeless/actions-config.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  type AIItemGroupConfig,\n  AIStarIconWithAnimation,\n  BlocksUtils,\n  MindmapElementModel,\n  ShapeElementModel,\n  TextElementModel,\n} from '@blocksuite/blocks';\n\nimport {\n  AIExpandMindMapIcon,\n  AIImageIcon,\n  AIImageIconWithAnimation,\n  AIMindMapIcon,\n  AIMindMapIconWithAnimation,\n  AIPenIcon,\n  AIPenIconWithAnimation,\n  AIPresentationIcon,\n  AIPresentationIconWithAnimation,\n  AISearchIcon,\n  ChatWithAIIcon,\n  ExplainIcon,\n  ImproveWritingIcon,\n  LanguageIcon,\n  LongerIcon,\n  MakeItRealIcon,\n  MakeItRealIconWithAnimation,\n  SelectionIcon,\n  ShorterIcon,\n  ToneIcon,\n} from '../../_common/icons.js';\nimport {\n  actionToHandler,\n  imageOnlyShowWhen,\n  mindmapChildShowWhen,\n  mindmapRootShowWhen,\n  noteBlockOrTextShowWhen,\n  noteWithCodeBlockShowWen,\n} from '../../actions/edgeless-handler.js';\nimport {\n  imageFilterStyles,\n  imageProcessingTypes,\n  textTones,\n  translateLangs,\n} from '../../actions/types.js';\nimport { getAIPanel } from '../../ai-panel.js';\nimport { AIProvider } from '../../provider.js';\nimport { mindMapToMarkdown } from '../../utils/edgeless.js';\nimport { canvasToBlob, randomSeed } from '../../utils/image.js';\nimport {\n  getCopilotSelectedElems,\n  getEdgelessRootFromEditor,\n  imageCustomInput,\n} from '../../utils/selection-utils.js';\n\nconst translateSubItem = translateLangs.map(lang => {\n  return {\n    type: lang,\n    handler: actionToHandler('translate', AIStarIconWithAnimation, { lang }),\n  };\n});\n\nconst toneSubItem = textTones.map(tone => {\n  return {\n    type: tone,\n    handler: actionToHandler('changeTone', AIStarIconWithAnimation, { tone }),\n  };\n});\n\nexport const imageFilterSubItem = imageFilterStyles.map(style => {\n  return {\n    type: style,\n    handler: actionToHandler(\n      'filterImage',\n      AIImageIconWithAnimation,\n      {\n        style,\n      },\n      imageCustomInput\n    ),\n  };\n});\n\nexport const imageProcessingSubItem = imageProcessingTypes.map(type => {\n  return {\n    type,\n    handler: actionToHandler(\n      'processImage',\n      AIImageIconWithAnimation,\n      {\n        type,\n      },\n      imageCustomInput\n    ),\n  };\n});\n\nconst othersGroup: AIItemGroupConfig = {\n  name: 'others',\n  items: [\n    {\n      name: 'Open AI Chat',\n      icon: ChatWithAIIcon,\n      showWhen: () => true,\n      handler: host => {\n        const panel = getAIPanel(host);\n        AIProvider.slots.requestContinueInChat.emit({\n          host: host,\n          show: true,\n        });\n        panel.hide();\n      },\n    },\n  ],\n};\n\nconst editGroup: AIItemGroupConfig = {\n  name: 'edit with ai',\n  items: [\n    {\n      name: 'Translate to',\n      icon: LanguageIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      subItem: translateSubItem,\n    },\n    {\n      name: 'Change tone to',\n      icon: ToneIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      subItem: toneSubItem,\n    },\n    {\n      name: 'Improve writing',\n      icon: ImproveWritingIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('improveWriting', AIStarIconWithAnimation),\n    },\n\n    {\n      name: 'Make it longer',\n      icon: LongerIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('makeLonger', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Make it shorter',\n      icon: ShorterIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('makeShorter', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Continue writing',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('continueWriting', AIPenIconWithAnimation),\n    },\n  ],\n};\n\nconst draftGroup: AIItemGroupConfig = {\n  name: 'draft with ai',\n  items: [\n    {\n      name: 'Write an article about this',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('writeArticle', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Write a tweet about this',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('writeTwitterPost', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Write a poem about this',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('writePoem', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Write a blog post about this',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('writeBlogPost', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Brainstorm ideas about this',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('brainstorm', AIPenIconWithAnimation),\n    },\n  ],\n};\n\nconst reviewGroup: AIItemGroupConfig = {\n  name: 'review with ai',\n  items: [\n    {\n      name: 'Fix spelling',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('fixSpelling', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Fix grammar',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('improveGrammar', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Explain this image',\n      icon: AIPenIcon,\n      showWhen: imageOnlyShowWhen,\n      handler: actionToHandler(\n        'explainImage',\n        AIStarIconWithAnimation,\n        undefined,\n        imageCustomInput\n      ),\n    },\n    {\n      name: 'Explain this code',\n      icon: ExplainIcon,\n      showWhen: noteWithCodeBlockShowWen,\n      handler: actionToHandler('explainCode', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Check code error',\n      icon: ExplainIcon,\n      showWhen: noteWithCodeBlockShowWen,\n      handler: actionToHandler('checkCodeErrors', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Explain selection',\n      icon: SelectionIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('explain', AIStarIconWithAnimation),\n    },\n  ],\n};\n\nconst generateGroup: AIItemGroupConfig = {\n  name: 'generate with ai',\n  items: [\n    {\n      name: 'Summarize',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('summary', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Generate headings',\n      icon: AIPenIcon,\n      handler: actionToHandler('createHeadings', AIPenIconWithAnimation),\n      showWhen: noteBlockOrTextShowWhen,\n      beta: true,\n    },\n    {\n      name: 'Generate an image',\n      icon: AIImageIcon,\n      showWhen: () => true,\n      handler: actionToHandler(\n        'createImage',\n        AIImageIconWithAnimation,\n        undefined,\n        async (host, ctx) => {\n          const selectedElements = getCopilotSelectedElems(host);\n          const len = selectedElements.length;\n\n          const aiPanel = getAIPanel(host);\n          // text to image\n          // from user input\n          if (len === 0) {\n            const content = aiPanel.inputText?.trim();\n            if (!content) return;\n            return {\n              content,\n            };\n          }\n\n          let content = (ctx.get()['content'] as string) || '';\n\n          // from user input\n          if (content.length === 0) {\n            content = aiPanel.inputText?.trim() || '';\n          }\n\n          const {\n            images,\n            shapes,\n            notes: _,\n            frames: __,\n          } = BlocksUtils.splitElements(selectedElements);\n\n          const pureShapes = shapes.filter(\n            e =>\n              !(\n                e instanceof TextElementModel ||\n                (e instanceof ShapeElementModel && e.text?.length)\n              )\n          );\n\n          // text to image\n          if (content.length && images.length + pureShapes.length === 0) {\n            return {\n              content,\n            };\n          }\n\n          // image to image\n          const edgelessRoot = getEdgelessRootFromEditor(host);\n          const canvas = await edgelessRoot.clipboardController.toCanvas(\n            images,\n            pureShapes,\n            {\n              dpr: 1,\n              padding: 0,\n              background: 'white',\n            }\n          );\n          if (!canvas) return;\n\n          const png = await canvasToBlob(canvas);\n          if (!png) return;\n          return {\n            content,\n            attachments: [png],\n            seed: String(randomSeed()),\n          };\n        }\n      ),\n    },\n    {\n      name: 'Generate outline',\n      icon: AIPenIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('writeOutline', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Expand from this mind map node',\n      icon: AIExpandMindMapIcon,\n      showWhen: mindmapChildShowWhen,\n      handler: actionToHandler(\n        'expandMindmap',\n        AIMindMapIconWithAnimation,\n        undefined,\n        function (host) {\n          const selected = getCopilotSelectedElems(host);\n          const firstSelected = selected[0] as ShapeElementModel;\n          const mindmap = firstSelected?.group;\n\n          if (!(mindmap instanceof MindmapElementModel)) {\n            return Promise.resolve({});\n          }\n\n          return Promise.resolve({\n            input: firstSelected.text?.toString() ?? '',\n            mindmap: mindMapToMarkdown(mindmap),\n          });\n        }\n      ),\n      beta: true,\n    },\n    {\n      name: 'Brainstorm ideas with mind map',\n      icon: AIMindMapIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('brainstormMindmap', AIMindMapIconWithAnimation),\n    },\n    {\n      name: 'Regenerate mind map',\n      icon: AIMindMapIcon,\n      showWhen: mindmapRootShowWhen,\n      handler: actionToHandler(\n        'brainstormMindmap',\n        AIMindMapIconWithAnimation,\n        {\n          regenerate: true,\n        }\n      ),\n    },\n    {\n      name: 'Generate presentation',\n      icon: AIPresentationIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('createSlides', AIPresentationIconWithAnimation),\n      beta: true,\n    },\n    {\n      name: 'Make it real',\n      icon: MakeItRealIcon,\n      beta: true,\n      showWhen: () => true,\n      handler: actionToHandler(\n        'makeItReal',\n        MakeItRealIconWithAnimation,\n        undefined,\n        async (host, ctx) => {\n          const selectedElements = getCopilotSelectedElems(host);\n\n          // from user input\n          if (selectedElements.length === 0) {\n            const aiPanel = getAIPanel(host);\n            const content = aiPanel.inputText?.trim();\n            if (!content) return;\n            return {\n              content,\n            };\n          }\n\n          const { notes, frames, shapes, images, edgelessTexts } =\n            BlocksUtils.splitElements(selectedElements);\n          const f = frames.length;\n          const i = images.length;\n          const n = notes.length;\n          const s = shapes.length;\n          const e = edgelessTexts.length;\n\n          if (f + i + n + s + e === 0) {\n            return;\n          }\n\n          let content = (ctx.get()['content'] as string) || '';\n\n          // single note, text, edgeless text\n          if (i === 0 && n + s + e === 1) {\n            if (\n              n === 1 ||\n              e === 1 ||\n              (s === 1 && shapes[0] instanceof TextElementModel)\n            ) {\n              return {\n                content,\n              };\n            }\n          }\n\n          // from user input\n          if (content.length === 0) {\n            const aiPanel = getAIPanel(host);\n            content = aiPanel.inputText?.trim() || '';\n          }\n\n          const edgelessRoot = getEdgelessRootFromEditor(host);\n          const canvas = await edgelessRoot.clipboardController.toCanvas(\n            [...notes, ...frames, ...images],\n            shapes,\n            {\n              dpr: 1,\n              background: 'white',\n            }\n          );\n          if (!canvas) return;\n          const png = await canvasToBlob(canvas);\n          if (!png) return;\n          ctx.set({\n            width: canvas.width,\n            height: canvas.height,\n          });\n\n          return {\n            content,\n            attachments: [png],\n          };\n        }\n      ),\n    },\n    {\n      name: 'AI image filter',\n      icon: ImproveWritingIcon,\n      showWhen: imageOnlyShowWhen,\n      subItem: imageFilterSubItem,\n      subItemOffset: [12, -4],\n      beta: true,\n    },\n    {\n      name: 'Image processing',\n      icon: AIImageIcon,\n      showWhen: imageOnlyShowWhen,\n      subItem: imageProcessingSubItem,\n      subItemOffset: [12, -6],\n      beta: true,\n    },\n    {\n      name: 'Generate a caption',\n      icon: AIPenIcon,\n      showWhen: imageOnlyShowWhen,\n      beta: true,\n      handler: actionToHandler(\n        'generateCaption',\n        AIStarIconWithAnimation,\n        undefined,\n        imageCustomInput\n      ),\n    },\n    {\n      name: 'Find actions',\n      icon: AISearchIcon,\n      showWhen: noteBlockOrTextShowWhen,\n      handler: actionToHandler('findActions', AIStarIconWithAnimation),\n      beta: true,\n    },\n  ],\n};\n\nexport const edgelessActionGroups = [\n  reviewGroup,\n  editGroup,\n  generateGroup,\n  draftGroup,\n  othersGroup,\n];\n"]}