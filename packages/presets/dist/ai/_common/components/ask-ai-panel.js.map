{"version":3,"file":"ask-ai-panel.js","sourceRoot":"","sources":["../../../../src/ai/_common/components/ask-ai-panel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAmB,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACxE,OAAO,EAEL,mBAAmB,GACpB,MAAM,oBAAoB,CAAC;AAC5B,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AAC5C,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AAEvD,OAAO,EAAE,cAAc,EAAE,MAAM,gCAAgC,CAAC;IAGnD,UAAU;4BADtB,aAAa,CAAC,cAAc,CAAC;;;;sBACE,cAAc,CAAC,UAAU,CAAC;;;;;;;;;;;;;0BAAlC,SAAQ,WAA0B;;;;gCAgCvD,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;wCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;2CAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;oCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAR/B,iKAAS,IAAI,6BAAJ,IAAI,mFAAc;YAG3B,yLAAS,YAAY,6BAAZ,YAAY,mGAAuB;YAG5C,kMAAS,eAAe,6BAAf,eAAe,yGAAgC;YAGxD,6KAAS,QAAQ,6BAAR,QAAQ,2FAAO;YA1C1B,6KAiFC;;;;iBAhFiB,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6B3B,AA7BqB,CA6BpB;QAGF,6EAA2B;QAA3B,IAAS,IAAI,0CAAc;QAA3B,IAAS,IAAI,gDAAc;QAG3B,iJAA4C;QAA5C,IAAS,YAAY,kDAAuB;QAA5C,IAAS,YAAY,wDAAuB;QAG5C,sJAAmD,IAAI,GAAC;QAAxD,IAAS,eAAe,qDAAgC;QAAxD,IAAS,eAAe,2DAAgC;QAGxD,2IAAoB,GAAG,GAAC;QAAxB,IAAS,QAAQ,8CAAO;QAAxB,IAAS,QAAQ,oDAAO;QAExB,IAAI,SAAS;YACX,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9C,IAAI,WAAW,YAAY,mBAAmB,EAAE,CAAC;gBAC/C,OAAO,WAAW,CAAC;YACrB,CAAC;YACD,OAAO,IAAI,CAAC;QACd,CAAC;QAED,IAAI,aAAa;YACf,MAAM,cAAc,GAAG,IAAI,CAAC,YAAY;iBACrC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACb,GAAG,KAAK;gBACR,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAC/B,IAAI,CAAC,QAAQ;oBACX,CAAC,CAAC,IAAI,CAAC,QAAQ,CACX,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EACzB,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,EACpC,IAAI,CAAC,IAAI,CACV;oBACH,CAAC,CAAC,IAAI,CACT;aACF,CAAC,CAAC;iBACF,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC3C,OAAO,cAAc,CAAC;QACxB,CAAC;QAEQ,MAAM;YACb,MAAM,KAAK,GAAG,QAAQ,CAAC;gBACrB,QAAQ,EAAE,GAAG,IAAI,CAAC,QAAQ,IAAI;aAC/B,CAAC,CAAC;YACH,OAAO,IAAI,CAAA,mCAAmC,KAAK;;gBAEvC,IAAI,CAAC,IAAI;kBACP,IAAI,CAAC,aAAa;;WAEzB,CAAC;QACV,CAAC;;;;;;YAhFU,uDAAU;;;;;SAAV,UAAU","sourcesContent":["import { type EditorHost, WithDisposable } from '@blocksuite/block-std';\nimport {\n  type AIItemGroupConfig,\n  EdgelessRootService,\n} from '@blocksuite/blocks';\nimport { css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { styleMap } from 'lit/directives/style-map.js';\n\nimport { getRootService } from '../../utils/selection-utils.js';\n\n@customElement('ask-ai-panel')\nexport class AskAIPanel extends WithDisposable(LitElement) {\n  static override styles = css`\n    :host {\n      position: absolute;\n    }\n\n    .ask-ai-panel {\n      box-sizing: border-box;\n      padding: 8px;\n      max-height: 374px;\n      overflow-y: auto;\n      background: var(--affine-background-overlay-panel-color);\n      box-shadow: var(--affine-shadow-2);\n      border-radius: 8px;\n      z-index: var(--affine-z-index-popover);\n    }\n\n    .ask-ai-panel::-webkit-scrollbar {\n      width: 5px;\n      max-height: 100px;\n    }\n    .ask-ai-panel::-webkit-scrollbar-thumb {\n      border-radius: 20px;\n    }\n    .ask-ai-panel:hover::-webkit-scrollbar-thumb {\n      background-color: var(--affine-black-30);\n    }\n    .ask-ai-panel::-webkit-scrollbar-corner {\n      display: none;\n    }\n  `;\n\n  @property({ attribute: false })\n  accessor host!: EditorHost;\n\n  @property({ attribute: false })\n  accessor actionGroups!: AIItemGroupConfig[];\n\n  @property({ attribute: false })\n  accessor abortController: AbortController | null = null;\n\n  @property({ attribute: false })\n  accessor minWidth = 330;\n\n  get _edgeless() {\n    const rootService = getRootService(this.host);\n    if (rootService instanceof EdgelessRootService) {\n      return rootService;\n    }\n    return null;\n  }\n\n  get _actionGroups() {\n    const filteredConfig = this.actionGroups\n      .map(group => ({\n        ...group,\n        items: group.items.filter(item =>\n          item.showWhen\n            ? item.showWhen(\n                this.host.command.chain(),\n                this._edgeless ? 'edgeless' : 'page',\n                this.host\n              )\n            : true\n        ),\n      }))\n      .filter(group => group.items.length > 0);\n    return filteredConfig;\n  }\n\n  override render() {\n    const style = styleMap({\n      minWidth: `${this.minWidth}px`,\n    });\n    return html`<div class=\"ask-ai-panel\" style=${style}>\n      <ai-item-list\n        .host=${this.host}\n        .groups=${this._actionGroups}\n      ></ai-item-list>\n    </div>`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'ask-ai-panel': AskAIPanel;\n  }\n}\n"]}