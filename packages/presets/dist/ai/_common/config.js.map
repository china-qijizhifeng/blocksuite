{"version":3,"file":"config.js","sourceRoot":"","sources":["../../../src/ai/_common/config.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Chain, EditorHost, InitCommandCtx } from '@blocksuite/block-std';\nimport type {\n  CopilotSelectionController,\n  EdgelessElementToolbarWidget,\n} from '@blocksuite/blocks';\nimport {\n  type AIItemGroupConfig,\n  type AISubItemConfig,\n  EDGELESS_ELEMENT_TOOLBAR_WIDGET,\n  matchFlavours,\n} from '@blocksuite/blocks';\nimport type { TemplateResult } from 'lit';\n\nimport { actionToHandler } from '../actions/doc-handler.js';\nimport { actionToHandler as edgelessActionToHandler } from '../actions/edgeless-handler.js';\nimport {\n  imageFilterStyles,\n  imageProcessingTypes,\n  textTones,\n  translateLangs,\n} from '../actions/types.js';\nimport { getAIPanel } from '../ai-panel.js';\nimport { AIProvider } from '../provider.js';\nimport {\n  getSelectedImagesAsBlobs,\n  getSelectedTextContent,\n  getSelections,\n} from '../utils/selection-utils.js';\nimport {\n  AIDoneIcon,\n  AIImageIcon,\n  AIImageIconWithAnimation,\n  AIMindMapIcon,\n  AIPenIcon,\n  AIPenIconWithAnimation,\n  AIPresentationIcon,\n  AIPresentationIconWithAnimation,\n  AISearchIcon,\n  AIStarIconWithAnimation,\n  ChatWithAIIcon,\n  ExplainIcon,\n  ImproveWritingIcon,\n  LanguageIcon,\n  LongerIcon,\n  MakeItRealIcon,\n  MakeItRealIconWithAnimation,\n  SelectionIcon,\n  ShorterIcon,\n  ToneIcon,\n} from './icons.js';\n\nexport const translateSubItem: AISubItemConfig[] = translateLangs.map(lang => {\n  return {\n    type: lang,\n    handler: actionToHandler('translate', AIStarIconWithAnimation, { lang }),\n  };\n});\n\nexport const toneSubItem: AISubItemConfig[] = textTones.map(tone => {\n  return {\n    type: tone,\n    handler: actionToHandler('changeTone', AIStarIconWithAnimation, { tone }),\n  };\n});\n\nexport function createImageFilterSubItem(\n  trackerOptions?: BlockSuitePresets.TrackerOptions\n) {\n  return imageFilterStyles.map(style => {\n    return {\n      type: style,\n      handler: edgelessHandler(\n        'filterImage',\n        AIImageIconWithAnimation,\n        {\n          style,\n        },\n        trackerOptions\n      ),\n    };\n  });\n}\n\nexport function createImageProcessingSubItem(\n  trackerOptions?: BlockSuitePresets.TrackerOptions\n) {\n  return imageProcessingTypes.map(type => {\n    return {\n      type,\n      handler: edgelessHandler(\n        'processImage',\n        AIImageIconWithAnimation,\n        {\n          type,\n        },\n        trackerOptions\n      ),\n    };\n  });\n}\n\nconst blockActionTrackerOptions: BlockSuitePresets.TrackerOptions = {\n  control: 'block-action-bar',\n  where: 'ai-panel',\n};\n\nconst textBlockShowWhen = (chain: Chain<InitCommandCtx>) => {\n  const [_, ctx] = chain\n    .getSelectedModels({\n      types: ['block', 'text'],\n    })\n    .run();\n  const { selectedModels } = ctx;\n  if (!selectedModels || selectedModels.length === 0) return false;\n\n  return selectedModels.some(model =>\n    matchFlavours(model, ['affine:paragraph', 'affine:list'])\n  );\n};\n\nconst codeBlockShowWhen = (chain: Chain<InitCommandCtx>) => {\n  const [_, ctx] = chain\n    .getSelectedModels({\n      types: ['block', 'text'],\n    })\n    .run();\n  const { selectedModels } = ctx;\n  if (!selectedModels || selectedModels.length > 1) return false;\n\n  const model = selectedModels[0];\n  return matchFlavours(model, ['affine:code']);\n};\n\nconst imageBlockShowWhen = (chain: Chain<InitCommandCtx>) => {\n  const [_, ctx] = chain\n    .getSelectedModels({\n      types: ['block'],\n    })\n    .run();\n  const { selectedModels } = ctx;\n  if (!selectedModels || selectedModels.length > 1) return false;\n\n  const model = selectedModels[0];\n  return matchFlavours(model, ['affine:image']);\n};\n\nconst EditAIGroup: AIItemGroupConfig = {\n  name: 'edit with ai',\n  items: [\n    {\n      name: 'Translate to',\n      icon: LanguageIcon,\n      showWhen: textBlockShowWhen,\n      subItem: translateSubItem,\n    },\n    {\n      name: 'Change tone to',\n      icon: ToneIcon,\n      showWhen: textBlockShowWhen,\n      subItem: toneSubItem,\n    },\n    {\n      name: 'Improve writing',\n      icon: ImproveWritingIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('improveWriting', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Make it longer',\n      icon: LongerIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('makeLonger', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Make it shorter',\n      icon: ShorterIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('makeShorter', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Continue writing',\n      icon: AIPenIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('continueWriting', AIPenIconWithAnimation),\n    },\n  ],\n};\n\nconst DraftAIGroup: AIItemGroupConfig = {\n  name: 'draft with ai',\n  items: [\n    {\n      name: 'Write an article about this',\n      icon: AIPenIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('writeArticle', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Write a tweet about this',\n      icon: AIPenIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('writeTwitterPost', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Write a poem about this',\n      icon: AIPenIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('writePoem', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Write a blog post about this',\n      icon: AIPenIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('writeBlogPost', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Brainstorm ideas about this',\n      icon: AIPenIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('brainstorm', AIPenIconWithAnimation),\n    },\n  ],\n};\n\n// actions that initiated from a note in edgeless mode\n// 1. when running in doc mode, call requestRunInEdgeless (let affine to show toast)\n// 2. when running in edgeless mode\n//    a. get selected in the note and let the edgeless action to handle it\n//    b. insert the result using the note shape\nfunction edgelessHandler<T extends keyof BlockSuitePresets.AIActions>(\n  id: T,\n  generatingIcon: TemplateResult<1>,\n  variants?: Omit<\n    Parameters<BlockSuitePresets.AIActions[T]>[0],\n    keyof BlockSuitePresets.AITextActionOptions\n  >,\n  trackerOptions?: BlockSuitePresets.TrackerOptions\n) {\n  return (host: EditorHost) => {\n    if (host.doc.root?.id === undefined) return;\n    const edgeless = (\n      host.view.getWidget(\n        EDGELESS_ELEMENT_TOOLBAR_WIDGET,\n        host.doc.root.id\n      ) as EdgelessElementToolbarWidget\n    )?.edgeless;\n\n    if (!edgeless) {\n      AIProvider.slots.requestRunInEdgeless.emit({ host });\n    } else {\n      edgeless.tools.setEdgelessTool({ type: 'copilot' });\n      const currentController = edgeless.tools.controllers[\n        'copilot'\n      ] as CopilotSelectionController;\n      const selectedElements = edgeless.service.selection.selectedElements;\n      currentController.updateDragPointsWith(selectedElements, 10);\n      currentController.draggingAreaUpdated.emit(false); // do not show edgeless panel\n\n      return edgelessActionToHandler(\n        id,\n        generatingIcon,\n        variants,\n        async () => {\n          const selections = getSelections(host);\n          const [markdown, attachments] = await Promise.all([\n            getSelectedTextContent(host),\n            getSelectedImagesAsBlobs(host),\n          ]);\n          // for now if there are more than one selected blocks, we will not omit the attachments\n          const sendAttachments =\n            selections?.selectedBlocks?.length === 1 && attachments.length > 0;\n          return {\n            attachments: sendAttachments ? attachments : undefined,\n            content: sendAttachments ? '' : markdown,\n          };\n        },\n        trackerOptions\n      )(host);\n    }\n  };\n}\n\nconst ReviewWIthAIGroup: AIItemGroupConfig = {\n  name: 'review with ai',\n  items: [\n    {\n      name: 'Fix spelling',\n      icon: AIDoneIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('fixSpelling', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Fix grammar',\n      icon: AIDoneIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('improveGrammar', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Explain this image',\n      icon: AIPenIcon,\n      showWhen: imageBlockShowWhen,\n      handler: actionToHandler('explainImage', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Explain this code',\n      icon: ExplainIcon,\n      showWhen: codeBlockShowWhen,\n      handler: actionToHandler('explainCode', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Check code error',\n      icon: ExplainIcon,\n      showWhen: codeBlockShowWhen,\n      handler: actionToHandler('checkCodeErrors', AIStarIconWithAnimation),\n    },\n    {\n      name: 'Explain selection',\n      icon: SelectionIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('explain', AIStarIconWithAnimation),\n    },\n  ],\n};\n\nconst GenerateWithAIGroup: AIItemGroupConfig = {\n  name: 'generate with ai',\n  items: [\n    {\n      name: 'Summarize',\n      icon: AIPenIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('summary', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Generate headings',\n      icon: AIPenIcon,\n      beta: true,\n      handler: actionToHandler('createHeadings', AIPenIconWithAnimation),\n      showWhen: chain => {\n        const [_, ctx] = chain\n          .getSelectedModels({\n            types: ['block', 'text'],\n          })\n          .run();\n        const { selectedModels } = ctx;\n        if (!selectedModels || selectedModels.length === 0) return false;\n\n        return selectedModels.every(\n          model =>\n            matchFlavours(model, ['affine:paragraph', 'affine:list']) &&\n            !model.type.startsWith('h')\n        );\n      },\n    },\n    {\n      name: 'Generate an image',\n      icon: AIImageIcon,\n      showWhen: textBlockShowWhen,\n      handler: edgelessHandler('createImage', AIImageIconWithAnimation),\n    },\n    {\n      name: 'Generate outline',\n      icon: AIPenIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('writeOutline', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Brainstorm ideas with mind map',\n      icon: AIMindMapIcon,\n      showWhen: textBlockShowWhen,\n      handler: edgelessHandler('brainstormMindmap', AIPenIconWithAnimation),\n    },\n    {\n      name: 'Generate presentation',\n      icon: AIPresentationIcon,\n      showWhen: textBlockShowWhen,\n      handler: edgelessHandler('createSlides', AIPresentationIconWithAnimation),\n      beta: true,\n    },\n    {\n      name: 'Make it real',\n      icon: MakeItRealIcon,\n      beta: true,\n      showWhen: textBlockShowWhen,\n      handler: edgelessHandler('makeItReal', MakeItRealIconWithAnimation),\n    },\n    {\n      name: 'Find actions',\n      icon: AISearchIcon,\n      showWhen: textBlockShowWhen,\n      handler: actionToHandler('findActions', AIStarIconWithAnimation),\n      beta: true,\n    },\n  ],\n};\n\nconst OthersAIGroup: AIItemGroupConfig = {\n  name: 'Others',\n  items: [\n    {\n      name: 'Open AI Chat',\n      icon: ChatWithAIIcon,\n      handler: host => {\n        const panel = getAIPanel(host);\n        AIProvider.slots.requestContinueInChat.emit({\n          host: host,\n          show: true,\n        });\n        panel.hide();\n      },\n    },\n  ],\n};\n\nexport const AIItemGroups: AIItemGroupConfig[] = [\n  ReviewWIthAIGroup,\n  EditAIGroup,\n  GenerateWithAIGroup,\n  DraftAIGroup,\n  OthersAIGroup,\n];\n\nexport function buildAIImageItemGroups(): AIItemGroupConfig[] {\n  return [\n    {\n      name: 'edit with ai',\n      items: [\n        {\n          name: 'Explain this image',\n          icon: ExplainIcon,\n          showWhen: () => true,\n          handler: actionToHandler(\n            'explainImage',\n            AIStarIconWithAnimation,\n            undefined,\n            blockActionTrackerOptions\n          ),\n        },\n      ],\n    },\n    {\n      name: 'generate with ai',\n      items: [\n        {\n          name: 'Generate an image',\n          icon: AIImageIcon,\n          showWhen: () => true,\n          handler: edgelessHandler(\n            'createImage',\n            AIImageIconWithAnimation,\n            undefined,\n            blockActionTrackerOptions\n          ),\n        },\n        {\n          name: 'AI image filter',\n          icon: ImproveWritingIcon,\n          showWhen: () => true,\n          subItem: createImageFilterSubItem(blockActionTrackerOptions),\n          subItemOffset: [12, -4],\n          beta: true,\n        },\n        {\n          name: 'Image processing',\n          icon: AIImageIcon,\n          showWhen: () => true,\n          subItem: createImageProcessingSubItem(blockActionTrackerOptions),\n          subItemOffset: [12, -6],\n          beta: true,\n        },\n        {\n          name: 'Generate a caption',\n          icon: AIPenIcon,\n          showWhen: () => true,\n          beta: true,\n          handler: actionToHandler(\n            'generateCaption',\n            AIStarIconWithAnimation,\n            undefined,\n            blockActionTrackerOptions\n          ),\n        },\n      ],\n    },\n    OthersAIGroup,\n  ];\n}\n\nexport function buildAICodeItemGroups(): AIItemGroupConfig[] {\n  return [\n    {\n      name: 'edit with ai',\n      items: [\n        {\n          name: 'Explain this code',\n          icon: ExplainIcon,\n          showWhen: () => true,\n          handler: actionToHandler(\n            'explainCode',\n            AIStarIconWithAnimation,\n            undefined,\n            blockActionTrackerOptions\n          ),\n        },\n        {\n          name: 'Check code error',\n          icon: ExplainIcon,\n          showWhen: () => true,\n          handler: actionToHandler(\n            'checkCodeErrors',\n            AIStarIconWithAnimation,\n            undefined,\n            blockActionTrackerOptions\n          ),\n        },\n      ],\n    },\n    OthersAIGroup,\n  ];\n}\n"]}