{"version":3,"file":"v-element.js","sourceRoot":"","sources":["../../src/components/v-element.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AAEvD,OAAO,EAAE,gBAAgB,EAAE,MAAM,cAAc,CAAC;AAGhD,OAAO,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;IAGjD,QAAQ;4BADpB,aAAa,CAAC,WAAW,CAAC;;;;sBAGjB,UAAU;;;;;;;wBAAlB,SAAQ,WAAU;;;;iCACjB,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;oCAK1B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAJ/B,oKAAS,KAAK,6BAAL,KAAK,qFAEZ;YAGF,6KAAS,QAAQ,6BAAR,QAAQ,2FAAW;YAT9B,6KA2CC;;;YA3CY,uDAAQ;;QAInB,uEAAiC;YAC/B,MAAM,EAAE,gBAAgB;SACzB,EAAC;QAFF,IAAS,KAAK,2CAEZ;QAFF,IAAS,KAAK,iDAEZ;QAGF,0IAA4B;QAA5B,IAAS,QAAQ,8CAAW;QAA5B,IAAS,QAAQ,oDAAW;QAEnB,MAAM;YACb,MAAM,YAAY,GAAG,yBAAyB,CAAC,IAAI,CAAC,CAAC;YACrD,MAAM,iBAAiB,GAAG,YAAY,CAAC,gBAAgB,CAAC,iBAAiB,CAAC;YAE1E,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACjD,IAAI,OAAO,EAAE,CAAC;gBACZ,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBACnC,MAAM,IAAI,KAAK,CAAC;;;wBAGA,CAAC,CAAC;gBACpB,CAAC;gBAED,OAAO,IAAI,CAAA;;;;gBAID,QAAQ,CAAC,EAAE,UAAU,EAAE,MAAM,EAAE,CAAC;WACrC,iBAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;QAC/C,CAAC;YACL,CAAC;YAED,8EAA8E;YAC9E,6BAA6B;YAC7B,OAAO,IAAI,CAAA;SACN,iBAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;MAC/C,CAAC;QACL,CAAC;QAEQ,gBAAgB;YACvB,OAAO,IAAI,CAAC;QACd,CAAC;;;;;;;;SA1CU,QAAQ","sourcesContent":["import { html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { styleMap } from 'lit/directives/style-map.js';\n\nimport { ZERO_WIDTH_SPACE } from '../consts.js';\nimport type { DeltaInsert } from '../types.js';\nimport type { BaseTextAttributes } from '../utils/base-attributes.js';\nimport { getInlineEditorInsideRoot } from '../utils/query.js';\n\n@customElement('v-element')\nexport class VElement<\n  T extends BaseTextAttributes = BaseTextAttributes,\n> extends LitElement {\n  @property({ type: Object })\n  accessor delta: DeltaInsert<T> = {\n    insert: ZERO_WIDTH_SPACE,\n  };\n\n  @property({ attribute: false })\n  accessor selected!: boolean;\n\n  override render() {\n    const inlineEditor = getInlineEditorInsideRoot(this);\n    const attributeRenderer = inlineEditor.attributeService.attributeRenderer;\n\n    const isEmbed = inlineEditor.isEmbed(this.delta);\n    if (isEmbed) {\n      if (this.delta.insert.length !== 1) {\n        throw new Error(`The length of embed node should only be 1.\n          This seems to be an internal issue with inline editor.\n          Please go to https://github.com/toeverything/blocksuite/issues\n          to report it.`);\n      }\n\n      return html`<span\n        data-v-embed=\"true\"\n        data-v-element=\"true\"\n        contenteditable=\"false\"\n        style=${styleMap({ userSelect: 'none' })}\n        >${attributeRenderer(this.delta, this.selected)}</span\n      >`;\n    }\n\n    // we need to avoid \\n appearing before and after the span element, which will\n    // cause the unexpected space\n    return html`<span data-v-element=\"true\"\n      >${attributeRenderer(this.delta, this.selected)}</span\n    >`;\n  }\n\n  override createRenderRoot() {\n    return this;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'v-element': VElement;\n  }\n}\n"]}