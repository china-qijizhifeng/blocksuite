{"version":3,"file":"boxed.js","sourceRoot":"","sources":["../../src/reactive/boxed.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,CAAC,MAAM,KAAK,CAAC;AAEzB,OAAO,EAAE,sBAAsB,EAAE,MAAM,cAAc,CAAC;AAEtD,MAAM,OAAO,KAAK;IAChB,IAAI,IAAI;QACN,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IAID,YAAY,KAAQ;QAClB,IACE,KAAK,YAAY,CAAC,CAAC,GAAG;YACtB,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,sBAAsB,EAC5C,CAAC;YACD,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QACpB,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,sBAA2B,CAAC,CAAC;YACnD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IAED,QAAQ,CAAC,KAAQ;QACf,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IACvC,CAAC;IAED,QAAQ;QACN,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IAChC,CAAC;aAEM,OAAE,GAAG,CAAC,KAAc,EAAkB,EAAE;QAC7C,OAAO,CACL,KAAK,YAAY,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,sBAAsB,CACvE,CAAC;IACJ,CAAC,CAAC;aAEK,SAAI,GAAG,CAAI,GAAa,EAAY,EAAE;QAC3C,OAAO,IAAI,KAAK,CAAI,GAAG,CAAC,GAAG,CAAC,OAAO,CAAM,CAAC,CAAC;IAC7C,CAAC,CAAC","sourcesContent":["import * as Y from 'yjs';\n\nimport { NATIVE_UNIQ_IDENTIFIER } from '../consts.js';\n\nexport class Boxed<T = unknown> {\n  get yMap() {\n    return this._map;\n  }\n\n  private readonly _map: Y.Map<T>;\n\n  constructor(value: T) {\n    if (\n      value instanceof Y.Map &&\n      value.get('type') === NATIVE_UNIQ_IDENTIFIER\n    ) {\n      this._map = value;\n    } else {\n      this._map = new Y.Map();\n      this._map.set('type', NATIVE_UNIQ_IDENTIFIER as T);\n      this._map.set('value', value);\n    }\n  }\n\n  setValue(value: T) {\n    return this._map.set('value', value);\n  }\n\n  getValue() {\n    return this._map.get('value');\n  }\n\n  static is = (value: unknown): value is Boxed => {\n    return (\n      value instanceof Y.Map && value.get('type') === NATIVE_UNIQ_IDENTIFIER\n    );\n  };\n\n  static from = <T>(map: Y.Map<T>): Boxed<T> => {\n    return new Boxed<T>(map.get('value') as T);\n  };\n}\n"]}