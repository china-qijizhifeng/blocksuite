{"version":3,"file":"get-list-info.js","sourceRoot":"","sources":["../../../src/list-block/utils/get-list-info.ts"],"names":[],"mappings":"AAEA,MAAM,QAAQ,GAAG,CAAC,KAAqB,EAAE,EAAE;IACzC,MAAM,QAAQ,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,QAAQ;QACpD,EAAE,CAAqB,CAAC;IAC1B,MAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC;IAEvD,qEAAqE;IACrE,iDAAiD;IACjD,IAAI,KAAK,GAAG,CAAC,CAAC;IACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC;QACnC,IACE,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,KAAK,CAAC,OAAO;YACrC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,EAC/B,CAAC;YACD,KAAK,IAAI,CAAC,CAAC;QACb,CAAC;aAAM,CAAC;YACN,KAAK,GAAG,CAAC,CAAC;QACZ,CAAC;IACH,CAAC;IAED,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF,MAAM,WAAW,GAAG,CAAC,KAAqB,EAAU,EAAE;IACpD,IAAI,IAAI,GAAG,CAAC,CAAC;IACb,IAAI,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IACxC,OAAO,MAAM,EAAE,OAAO,KAAK,KAAK,CAAC,OAAO,EAAE,CAAC;QACzC,IAAI,EAAE,CAAC;QACP,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IACvC,CAAC;IACD,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,KAAqB,EAAE,EAAE;IACnD,MAAM,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;IAChC,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAE9B,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;AACzB,CAAC,CAAC","sourcesContent":["import type { ListBlockModel } from '../list-model.js';\n\nconst getIndex = (model: ListBlockModel) => {\n  const siblings = (model.doc.getParent(model)?.children ||\n    []) as ListBlockModel[];\n  const fakeIndex = siblings.findIndex(v => v === model);\n\n  // fakeIndex is the index of the model in the parent's children array\n  // but we need to filter out the other list items\n  let index = 0;\n  for (let i = 0; i < fakeIndex; i++) {\n    if (\n      siblings[i].flavour === model.flavour &&\n      siblings[i].type === model.type\n    ) {\n      index += 1;\n    } else {\n      index = 0;\n    }\n  }\n\n  return index;\n};\n\nconst getListDeep = (model: ListBlockModel): number => {\n  let deep = 0;\n  let parent = model.doc.getParent(model);\n  while (parent?.flavour === model.flavour) {\n    deep++;\n    parent = model.doc.getParent(parent);\n  }\n  return deep;\n};\n\nexport const getListInfo = (model: ListBlockModel) => {\n  const deep = getListDeep(model);\n  const index = getIndex(model);\n\n  return { deep, index };\n};\n"]}