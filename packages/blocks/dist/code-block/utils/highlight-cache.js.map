{"version":3,"file":"highlight-cache.js","sourceRoot":"","sources":["../../../src/code-block/utils/highlight-cache.ts"],"names":[],"mappings":"AAEA,MAAM,QAAQ;IAKZ,YAAY,OAAe;QACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,KAAK,GAAG,IAAI,GAAG,EAAE,CAAC;IACzB,CAAC;IAED,GAAG,CAAC,GAAM;QACR,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAClC,IAAI,KAAK,KAAK,SAAS,EAAE,CAAC;YACxB,OAAO,IAAI,CAAC;QACd,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QAC3B,OAAO,KAAK,CAAC;IACf,CAAC;IAED,GAAG,CAAC,GAAM,EAAE,KAAQ;QAClB,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YACpC,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;YAChD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC9B,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAC7B,CAAC;CACF;AAID,MAAM,CAAC,MAAM,cAAc,GAAG,IAAI,QAAQ,CAGxC,IAAI,CAAC,CAAC","sourcesContent":["import type { ThemedToken } from 'shiki';\n\nclass LRUCache<K, V> {\n  private maxSize: number;\n\n  private cache: Map<K, V>;\n\n  constructor(maxSize: number) {\n    this.maxSize = maxSize;\n    this.cache = new Map();\n  }\n\n  get(key: K): V | null {\n    const value = this.cache.get(key);\n    if (value === undefined) {\n      return null;\n    }\n    this.cache.delete(key);\n    this.cache.set(key, value);\n    return value;\n  }\n\n  set(key: K, value: V): void {\n    if (this.cache.size >= this.maxSize) {\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n    this.cache.set(key, value);\n  }\n}\n\nexport type highlightCacheKey = `${string}-${string}-${string}`;\n\nexport const highlightCache = new LRUCache<\n  highlightCacheKey,\n  Omit<ThemedToken, 'offset'>[]\n>(4000);\n"]}