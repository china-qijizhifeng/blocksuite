{"version":3,"file":"code-languages.js","sourceRoot":"","sources":["../../../src/code-block/utils/code-languages.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,oBAAoB,EAAE,WAAW,EAAE,MAAM,OAAO,CAAC;AAE1D,OAAO,EAAE,oBAAoB,EAA2B,MAAM,aAAa,CAAC;AAM5E,2BAA2B;AAC3B,yCAAyC;AACzC,MAAM,gBAAgB,GAAsB;IAC1C,OAAO;IACP,QAAQ;IACR,GAAG;IACH,MAAM;IACN,KAAK;IACL,QAAQ;IACR,IAAI;IACJ,YAAY;IACZ,KAAK;IACL,KAAK;IACL,KAAK;IACL,QAAQ;IACR,IAAI;IACJ,aAAa;IACb,OAAO;IACP,QAAQ;IACR,GAAG;IACH,MAAM;IACN,MAAM;IACN,aAAa;IACb,0BAA0B;IAE1B,QAAQ;IACR,KAAK;IACL,qBAAqB;IACrB,KAAK;IACL,MAAM;IACN,aAAa;IACb,OAAO;IACP,MAAM;IACN,MAAM;IACN,KAAK;IACL,OAAO;IACP,kBAAkB;IAClB,GAAG;IACH,QAAQ;IACR,MAAM;IACN,OAAO;IACP,SAAS;IACT,QAAQ;IACR,QAAQ;IACR,UAAU;IACV,YAAY;IACZ,QAAQ;IACR,MAAM;IACN,QAAQ;IACR,OAAO;IACP,QAAQ;IACR,kBAAkB;IAClB,WAAW;IACX,aAAa;IACb,MAAM;IACN,MAAM;IACN,QAAQ;IAER,QAAQ;IACR,UAAU;IACV,MAAM;IACN,MAAM;IACN,KAAK;IACL,MAAM;IACN,KAAK;IACL,KAAK;IACL,KAAK;CACN,CAAC;AAEF,MAAM,qBAAqB,GACzB,gBAAgB,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,EAAE;IACvC,OAAO;QACL,CAAC,IAAI,CAAC,EAAE,CAAC;QACT,GAAG,GAAG;KACP,CAAC;AACJ,CAAC,EAAE,EAAE,CAAC,CAAC;AAET,MAAM,UAAU,mBAAmB,CAAC,IAAqB;IACvD,OAAO,qBAAqB,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC;AACjD,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,IAAY;IACtC,OAAO,WAAW,CAAC,IAAI,CAAC,IAAI,oBAAoB,CAAC,EAAE,KAAK,IAAI,CAAC;AAC/D,CAAC;AAED;;;;;GAKG;AACH,MAAM,CAAC,MAAM,mBAAmB,GAAG,CACjC,YAAoB,EACpB,MAAM,GAAG,KAAK,EACa,EAAE;IAC7B,IAAI,CAAC,YAAY;QAAE,OAAO,IAAI,CAAC;IAC/B,IAAI,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC;QAC9B,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM,QAAQ,GAAG,oBAAoB,CAAC,IAAI,CACxC,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,EAAE,KAAK,YAAY,CAAC,WAAW,EAAE,CAC7E,CAAC;IACF,uDAAuD;IACvD,oDAAoD;IACpD,IAAI,QAAQ;QAAE,OAAO,QAA8B,CAAC;IACpD,IAAI,MAAM;QAAE,OAAO,IAAI,CAAC;IAExB,MAAM,aAAa,GAAG,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAC7D,YAAY,CAAC,OAAO,EAAE,QAAQ,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,CAC3D,CAAC;IACF,OAAQ,aAAoC,IAAI,IAAI,CAAC;AACvD,CAAC,CAAC","sourcesContent":["import type { Slot } from '@blocksuite/global/utils';\nimport type { BundledLanguage } from 'shiki';\nimport { bundledLanguagesInfo, isPlainLang } from 'shiki';\n\nimport { PLAIN_TEXT_LANG_INFO, type StrictLanguageInfo } from './consts.js';\n\nexport interface selectedLanguageChangedSlots {\n  selectedLanguageChanged: Slot<{ language: string | null }>;\n  dispose: Slot;\n}\n// TIOBE Index for May 2023\n// ref https://www.tiobe.com/tiobe-index/\nconst PopularLanguages: BundledLanguage[] = [\n  // 1-20\n  'python',\n  'c',\n  'java',\n  'cpp',\n  'csharp',\n  'vb',\n  'javascript',\n  'php',\n  'sql',\n  'asm',\n  'pascal',\n  'go',\n  // 'scratch',\n  'swift',\n  'matlab',\n  'r',\n  'rust',\n  'ruby',\n  // 'fortran',\n  // 'classic-visual-basic',\n\n  // 21-50\n  'sas',\n  // '(Visual) FoxPro',\n  'ada',\n  'perl',\n  'objective-c',\n  'cobol',\n  'lisp',\n  'dart',\n  'lua',\n  'julia',\n  // 'transact-SQL',\n  'd',\n  'kotlin',\n  'logo',\n  'scala',\n  'haskell',\n  'fsharp',\n  'scheme',\n  // 'cfml',\n  'typescript',\n  'groovy',\n  'abap',\n  'prolog',\n  'plsql',\n  // 'ml',\n  // 'bourne shell',\n  // 'forth',\n  // 'crystal',\n  'bash',\n  'apex',\n  // ⬆️ 50\n\n  // Other\n  'markdown',\n  'json',\n  'html',\n  'css',\n  'diff',\n  'jsx',\n  'tsx',\n  'vue',\n];\n\nconst POPULAR_LANGUAGES_MAP: Partial<Record<BundledLanguage, number>> =\n  PopularLanguages.reduce((acc, lang, i) => {\n    return {\n      [lang]: i,\n      ...acc,\n    };\n  }, {});\n\nexport function getLanguagePriority(lang: BundledLanguage) {\n  return POPULAR_LANGUAGES_MAP[lang] ?? Infinity;\n}\n\nexport function isPlaintext(lang: string) {\n  return isPlainLang(lang) || PLAIN_TEXT_LANG_INFO.id === lang;\n}\n\n/**\n * Get the standard language registration for a given language name,\n * accept both language id and aliases (by default, or set `strict` to `false`).\n *\n * If the language is plaintext, return `null`.\n */\nexport const getStandardLanguage = (\n  languageName: string,\n  strict = false\n): StrictLanguageInfo | null => {\n  if (!languageName) return null;\n  if (isPlaintext(languageName)) {\n    return null;\n  }\n\n  const language = bundledLanguagesInfo.find(\n    codeLanguage => codeLanguage.id.toLowerCase() === languageName.toLowerCase()\n  );\n  // The language is found from the bundledLanguagesInfo,\n  // so it is safe to cast it to `StrictLanguageInfo`.\n  if (language) return language as StrictLanguageInfo;\n  if (strict) return null;\n\n  const aliasLanguage = bundledLanguagesInfo.find(codeLanguage =>\n    codeLanguage.aliases?.includes(languageName.toLowerCase())\n  );\n  return (aliasLanguage as StrictLanguageInfo) ?? null;\n};\n"]}