{"version":3,"file":"model.js","sourceRoot":"","sources":["../../../src/_common/utils/model.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,WAAW,CAAC;AAEtC,MAAM,UAAU,cAAc,CAAC,KAA0B,EAAE,OAAiB;IAC1E,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC;QACrC,MAAM,IAAI,KAAK,CAAC,iBAAiB,KAAK,CAAC,OAAO,iBAAiB,CAAC,CAAC;IACnE,CAAC;AACH,CAAC;AAED,MAAM,UAAU,aAAa,CAC3B,KAAwB,EACxB,QAAa;IAEb,OAAO,CACL,CAAC,CAAC,KAAK;QACP,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAClB,SAAS,CAAC,KAAK,CAAC,OAAuC,EAAE,GAAG,CAAC,CAC9D,CACF,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,sBAAsB,CACpC,GAAQ,EACR,KAA0B,EAC1B,OAAe;IAEf,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IACpC,IAAI,MAAM,KAAK,IAAI,EAAE,CAAC;QACpB,OAAO,KAAK,CAAC;IACf,CAAC;IACD,IAAI,OAAO,KAAK,MAAM,CAAC,OAAO,EAAE,CAAC;QAC/B,OAAO,IAAI,CAAC;IACd,CAAC;IACD,OAAO,sBAAsB,CAAC,GAAG,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;AACtD,CAAC","sourcesContent":["import type { BlockModel, Doc } from '@blocksuite/store';\nimport { minimatch } from 'minimatch';\n\nexport function assertFlavours(model: { flavour: string }, allowed: string[]) {\n  if (!allowed.includes(model.flavour)) {\n    throw new Error(`model flavour ${model.flavour} is not allowed`);\n  }\n}\n\nexport function matchFlavours<Key extends (keyof BlockSuite.BlockModels)[]>(\n  model: BlockModel | null,\n  expected: Key\n): model is BlockSuite.BlockModels[Key[number]] {\n  return (\n    !!model &&\n    expected.some(key =>\n      minimatch(model.flavour as keyof BlockSuite.BlockModels, key)\n    )\n  );\n}\n\nexport function isInsideBlockByFlavour(\n  doc: Doc,\n  block: BlockModel | string,\n  flavour: string\n): boolean {\n  const parent = doc.getParent(block);\n  if (parent === null) {\n    return false;\n  }\n  if (flavour === parent.flavour) {\n    return true;\n  }\n  return isInsideBlockByFlavour(doc, parent, flavour);\n}\n"]}