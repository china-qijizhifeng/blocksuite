{"version":3,"file":"edgeless-selectable.js","sourceRoot":"","sources":["../../../../src/_common/edgeless/mixin/edgeless-selectable.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAE/C,OAAO,EAAE,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AAQ1F,MAAM,UAAU,UAAU,CAGxB,UAAa;IACb,IAAI,UAAU,KAAK,UAAU,EAAE,CAAC;QAC9B,OAAO,kBAAiE,CAAC;IAC3E,CAAC;SAAM,CAAC;QACN,IAAI,YAAY,GAAG,UAAU,CAAC;QAE9B,OACE,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,UAAU,CAAC,SAAS;YACtE,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,IAAI,EACtD,CAAC;YACD,YAAY,GAAG,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC;QAC3E,CAAC;QAED,IAAI,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,IAAI,EAAE,CAAC;YAC3D,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;QACpE,CAAC;QAED,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,EAAE,kBAAkB,CAAC,SAAS,CAAC,CAAC;IAC9E,CAAC;IAED,OAAO,UAAyD,CAAC;AACnE,CAAC","sourcesContent":["import type { Constructor } from '@blocksuite/global/utils';\nimport { BlockModel } from '@blocksuite/store';\n\nimport { EdgelessBlockModel } from '../../../root-block/edgeless/edgeless-block-model.js';\nimport type { SerializedXYWH } from '../../../surface-block/index.js';\n\nexport type EdgelessSelectableProps = {\n  xywh: SerializedXYWH;\n  index: string;\n};\n\nexport function selectable<\n  Props extends EdgelessSelectableProps,\n  T extends Constructor<BlockModel<Props>> = Constructor<BlockModel<Props>>,\n>(SuperClass: T) {\n  if (SuperClass === BlockModel) {\n    return EdgelessBlockModel as unknown as typeof EdgelessBlockModel<Props>;\n  } else {\n    let currentClass = SuperClass;\n\n    while (\n      Object.getPrototypeOf(currentClass.prototype) !== BlockModel.prototype &&\n      Object.getPrototypeOf(currentClass.prototype) !== null\n    ) {\n      currentClass = Object.getPrototypeOf(currentClass.prototype).constructor;\n    }\n\n    if (Object.getPrototypeOf(currentClass.prototype) === null) {\n      throw new Error('The SuperClass is not a subclass of BlockModel');\n    }\n\n    Object.setPrototypeOf(currentClass.prototype, EdgelessBlockModel.prototype);\n  }\n\n  return SuperClass as unknown as typeof EdgelessBlockModel<Props>;\n}\n"]}