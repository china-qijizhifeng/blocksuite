{"version":3,"file":"block-component.js","sourceRoot":"","sources":["../../../src/_common/components/block-component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,YAAY,EAAqB,MAAM,uBAAuB,CAAC;AAExE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,KAAK,CAAC;AACpC,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAC1C,OAAO,EAAkB,QAAQ,EAAE,MAAM,6BAA6B,CAAC;IAI1D,cAAc;sBAIjB,YAAY;;;;iBAJT,cAIX,SAAQ,WAAwC;;;0CAS/C,KAAK,CAAC,gDAAgD,CAAC;YACxD,+LAAiB,cAAc,6BAAd,cAAc,uGAA6B;;;QAT5D,IAAI,aAAa;YACf,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,cAAc;gBAChD,MAAM,IAAI,KAAK,CACb,qEAAqE,CACtE,CAAC;YACJ,OAAO,IAAI,CAAC,cAAc,CAAC;QAC7B,CAAC;QAGD,iGAA4D;QAA5D,IAAiB,cAAc,oDAA6B;QAA5D,IAAiB,cAAc,0DAA6B;QAE5D,kGAAsC,KAAK,EAAC;QAA5C,IAAmB,gBAAgB,sDAAS;QAA5C,IAAmB,gBAAgB,4DAAS;QAE5C,uCAAwC,IAAI,CAAC;QAA7C,IAAmB,kBAAkB,wDAAQ;QAA7C,IAAmB,kBAAkB,8DAAQ;QAE7C,yCAAiE,SAAS,CAAC;QAA3E,IAAmB,oBAAoB,0DAAoC;QAA3E,IAAmB,oBAAoB,gEAAoC;QAE3E;YACE,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC3C,CAAC;QAEO,iBAAiB,CAAC,OAAgB;YACxC,MAAM,KAAK,GAAG,QAAQ,CAAC;gBACrB,QAAQ,EAAE,UAAU;gBACpB,GAAG,IAAI,CAAC,oBAAoB;aAC7B,CAAC,CAAC;YAEH,OAAO,IAAI,CAAA,cAAc,KAAK;QAC1B,OAAO;QACP,IAAI,CAAC,gBAAgB;gBACrB,CAAC,CAAC,IAAI,CAAA,gCAAgC,IAAI,0BAA0B;gBACpE,CAAC,CAAC,OAAO;QACT,IAAI,CAAC,kBAAkB;gBACvB,CAAC,CAAC,IAAI,CAAA,kCAAkC,IAAI,4BAA4B;gBACxE,CAAC,CAAC,OAAO;WACN,CAAC;QACV,CAAC;;;SA1CU,cAAc","sourcesContent":["import { BlockElement, type BlockService } from '@blocksuite/block-std';\nimport type { BlockModel } from '@blocksuite/store';\nimport { html, nothing } from 'lit';\nimport { query } from 'lit/decorators.js';\nimport { type StyleInfo, styleMap } from 'lit/directives/style-map.js';\n\nimport type { BlockCaptionEditor } from './block-caption.js';\n\nexport class BlockComponent<\n  Model extends BlockModel = BlockModel,\n  Service extends BlockService = BlockService,\n  WidgetName extends string = string,\n> extends BlockElement<Model, Service, WidgetName> {\n  get captionEditor() {\n    if (!this.useCaptionEditor || !this._captionEditor)\n      throw new Error(\n        'Oops! Please enable useCaptionEditor before accessing captionEditor'\n      );\n    return this._captionEditor;\n  }\n\n  @query('.affine-block-component > block-caption-editor')\n  private accessor _captionEditor!: BlockCaptionEditor | null;\n\n  protected accessor useCaptionEditor = false;\n\n  protected accessor showBlockSelection = true;\n\n  protected accessor blockContainerStyles: StyleInfo | undefined = undefined;\n\n  constructor() {\n    super();\n    this.addRenderer(this._renderWithWidget);\n  }\n\n  private _renderWithWidget(content: unknown) {\n    const style = styleMap({\n      position: 'relative',\n      ...this.blockContainerStyles,\n    });\n\n    return html`<div style=${style} class=\"affine-block-component\">\n      ${content}\n      ${this.useCaptionEditor\n        ? html`<block-caption-editor .block=${this}></block-caption-editor>`\n        : nothing}\n      ${this.showBlockSelection\n        ? html`<affine-block-selection .block=${this}></affine-block-selection>`\n        : nothing}\n    </div>`;\n  }\n}\n"]}