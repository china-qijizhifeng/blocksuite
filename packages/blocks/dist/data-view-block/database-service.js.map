{"version":3,"file":"database-service.js","sourceRoot":"","sources":["../../src/data-view-block/database-service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AAErD,OAAO,EAAE,aAAa,EAAE,MAAM,qCAAqC,CAAC;AACpE,OAAO,EAEL,iCAAiC,GAClC,MAAM,kDAAkD,CAAC;AAC1D,OAAO,EAAE,2BAA2B,EAAE,MAAM,uCAAuC,CAAC;AACpF,OAAO,EAAE,mBAAmB,EAAE,MAAM,oEAAoE,CAAC;AACzG,OAAO,EAAE,iBAAiB,EAAE,MAAM,sCAAsC,CAAC;AAGzE,MAAM,OAAO,oBAEX,SAAQ,YAAgC;IAF1C;;QAGW,kBAAa,GAAG,IAAI,aAAa,EAAkB,CAAC;QAEpD,wBAAmB,GAAG,IAAI,mBAAmB,EAAE,CAAC;IAc3D,CAAC;IAZU,OAAO;QACd,KAAK,CAAC,OAAO,EAAE,CAAC;QAChB,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;QAElD,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAE1C,MAAM,WAAW,GAAG,iCAAiC,CACnD,IAAI,CAAC,mBAAmB,CACzB,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAC9C,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC,2BAA2B,CAAC,CAAC;IAC1E,CAAC;CACF","sourcesContent":["import { BlockService } from '@blocksuite/block-std';\n\nimport { InlineManager } from '../_common/inline/inline-manager.js';\nimport {\n  type AffineTextAttributes,\n  getAffineInlineSpecsWithReference,\n} from '../_common/inline/presets/affine-inline-specs.js';\nimport { affineInlineMarkdownMatches } from '../_common/inline/presets/markdown.js';\nimport { ReferenceNodeConfig } from '../_common/inline/presets/nodes/reference-node/reference-config.js';\nimport { DatabaseSelection } from '../database-block/data-view/index.js';\nimport type { DataViewBlockModel } from './data-view-model.js';\n\nexport class DataViewBlockService<\n  TextAttributes extends AffineTextAttributes = AffineTextAttributes,\n> extends BlockService<DataViewBlockModel> {\n  readonly inlineManager = new InlineManager<TextAttributes>();\n\n  readonly referenceNodeConfig = new ReferenceNodeConfig();\n\n  override mounted(): void {\n    super.mounted();\n    this.selectionManager.register(DatabaseSelection);\n\n    this.referenceNodeConfig.setDoc(this.doc);\n\n    const inlineSpecs = getAffineInlineSpecsWithReference(\n      this.referenceNodeConfig\n    );\n    this.inlineManager.registerSpecs(inlineSpecs);\n    this.inlineManager.registerMarkdownMatches(affineInlineMarkdownMatches);\n  }\n}\n"]}