{"version":3,"file":"config.js","sourceRoot":"","sources":["../../../../src/root-block/widgets/pie-menu/config.ts"],"names":[],"mappings":"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","sourcesContent":["import { html } from 'lit';\nimport { styleMap } from 'lit/directives/style-map.js';\n\nimport {\n  ConnectorCWithArrowIcon,\n  ConnectorIcon,\n  ConnectorLWithArrowIcon,\n  ConnectorXWithArrowIcon,\n  DiamondIcon,\n  EdgelessEraserLightIcon,\n  EdgelessGeneralShapeIcon,\n  EdgelessPenLightIcon,\n  EllipseIcon,\n  FrameIcon,\n  FrameNavigatorIcon,\n  GeneralStyleIcon,\n  NoteIcon,\n  ScribbledDiamondIcon,\n  ScribbledEllipseIcon,\n  ScribbledSquareIcon,\n  ScribbledStyleIcon,\n  ScribbledTriangleIcon,\n  SelectIcon,\n  SquareIcon,\n  ToolsIcon,\n  TriangleIcon,\n  ViewBarIcon,\n} from '../../../_common/icons/edgeless.js';\nimport type { CssVariableName } from '../../../_common/theme/css-variables.js';\nimport { isControlledKeyboardEvent } from '../../../_common/utils/event.js';\nimport { ConnectorMode } from '../../../surface-block/element-model/connector.js';\nimport {\n  FILL_COLORS,\n  STROKE_COLORS,\n} from '../../../surface-block/elements/shape/consts.js';\nimport { ShapeStyle, ShapeType } from '../../../surface-block/index.js';\nimport type { LastProps } from '../../../surface-block/managers/edit-session.js';\nimport { LINE_COLORS } from '../../edgeless/components/panel/color-panel.js';\nimport {\n  DEFAULT_NOTE_CHILD_FLAVOUR,\n  DEFAULT_NOTE_CHILD_TYPE,\n  DEFAULT_NOTE_TIP,\n} from '../../edgeless/utils/consts.js';\nimport type { PieMenuContext } from './base.js';\nimport { PieMenuBuilder } from './pie-builder.js';\nimport {\n  getActiveConnectorStrokeColor,\n  getActiveShapeColor,\n  setEdgelessToolAction,\n  updateShapeOverlay,\n} from './utils.js';\n\n//----------------------------------------------------------\n// EDGELESS TOOLS PIE MENU SCHEMA\n//----------------------------------------------------------\n\nexport const AFFINE_PIE_MENU_ID_EDGELESS_TOOLS = 'affine:pie:edgeless:tools';\n\nconst pie = new PieMenuBuilder({\n  id: AFFINE_PIE_MENU_ID_EDGELESS_TOOLS,\n  label: 'Tools',\n  icon: ToolsIcon,\n  trigger: ({ keyEvent: ev, rootElement }) => {\n    if (isControlledKeyboardEvent(ev)) return false;\n    const isEditing = rootElement.service.selection.editing;\n\n    return ev.key === 'q' && !isEditing;\n  },\n});\n\npie.expandableCommand({\n  label: 'Pen',\n  icon: EdgelessPenLightIcon,\n  action: setEdgelessToolAction({ type: 'brush' }),\n  submenus: pie => {\n    pie.colorPicker({\n      label: 'Pen Color',\n      active: getActiveConnectorStrokeColor,\n      onChange: (color: CssVariableName, { rootElement }: PieMenuContext) => {\n        rootElement.service.editPropsStore.record('brush', {\n          color: color as LastProps['brush']['color'],\n        });\n      },\n      colors: LINE_COLORS.map(color => ({ color })),\n    });\n  },\n});\n\npie.command({\n  label: 'Eraser',\n  icon: EdgelessEraserLightIcon,\n  action: setEdgelessToolAction({\n    type: 'eraser',\n  }),\n});\n\npie.command({\n  label: 'Frame',\n  icon: FrameIcon,\n  action: setEdgelessToolAction({\n    type: 'frame',\n  }),\n});\n\npie.command({\n  label: 'Select',\n  icon: SelectIcon,\n  action: setEdgelessToolAction({\n    type: 'default',\n  }),\n});\n\npie.command({\n  label: 'Note',\n  icon: NoteIcon,\n  action: setEdgelessToolAction({\n    type: 'affine:note',\n    childFlavour: DEFAULT_NOTE_CHILD_FLAVOUR,\n    childType: DEFAULT_NOTE_CHILD_TYPE,\n    tip: DEFAULT_NOTE_TIP,\n  }),\n});\n\npie.command({\n  label: 'Reset Zoom',\n  icon: ViewBarIcon,\n  action: ({ rootElement }) => {\n    rootElement.service.zoomToFit();\n  },\n});\n\npie.command({\n  label: 'Present',\n  icon: ({ rootElement }) => {\n    const { type } = rootElement.edgelessTool;\n    if (type === 'frameNavigator') {\n      return html`\n        <span\n          style=\"${styleMap({\n            color: '#eb4335',\n            fontWeight: 'bold',\n          })}\"\n          >Stop</span\n        >\n      `;\n    }\n\n    return FrameNavigatorIcon;\n  },\n  action: ({ rootElement }) => {\n    const { type } = rootElement.edgelessTool;\n    if (type === 'frameNavigator') {\n      rootElement.tools.setEdgelessTool({ type: 'default' });\n\n      if (document.fullscreenElement) {\n        document.exitFullscreen().catch(console.error);\n      }\n\n      return;\n    }\n\n    rootElement.tools.setEdgelessTool({\n      type: 'frameNavigator',\n      mode: 'fit',\n    });\n  },\n});\n// Connector submenu\npie.beginSubmenu({\n  label: 'Connector',\n  icon: ({ rootElement }) => {\n    const tool = rootElement.edgelessTool;\n\n    if (tool.type === 'connector') {\n      switch (tool.mode) {\n        case ConnectorMode.Orthogonal:\n          return ConnectorLWithArrowIcon;\n        case ConnectorMode.Curve:\n          return ConnectorCWithArrowIcon;\n        case ConnectorMode.Straight:\n          return ConnectorXWithArrowIcon;\n      }\n    }\n    return ConnectorIcon;\n  },\n});\n\npie.command({\n  label: 'Curved',\n  icon: ConnectorCWithArrowIcon,\n  action: setEdgelessToolAction({\n    type: 'connector',\n    mode: ConnectorMode.Curve,\n  }),\n});\n\npie.command({\n  label: 'Elbowed',\n  icon: ConnectorXWithArrowIcon,\n  action: setEdgelessToolAction({\n    type: 'connector',\n    mode: ConnectorMode.Orthogonal,\n  }),\n});\n\npie.command({\n  label: 'Straight',\n  icon: ConnectorLWithArrowIcon,\n  action: setEdgelessToolAction({\n    type: 'connector',\n    mode: ConnectorMode.Straight,\n  }),\n});\n\npie.colorPicker({\n  label: 'Line Color',\n  active: getActiveConnectorStrokeColor,\n  onChange: (color: CssVariableName, { rootElement }: PieMenuContext) => {\n    rootElement.service.editPropsStore.record('connector', {\n      stroke: color as LastProps['connector']['stroke'],\n    });\n  },\n  colors: LINE_COLORS.map(color => ({ color })),\n});\n\npie.endSubmenu();\n\n// Shapes Submenu\npie.beginSubmenu({\n  label: 'Shapes',\n  icon: EdgelessGeneralShapeIcon,\n});\n\nconst shapes = [\n  {\n    type: ShapeType.Rect,\n    label: 'Rect',\n    icon: (style: ShapeStyle) =>\n      style === ShapeStyle.General ? SquareIcon : ScribbledSquareIcon,\n  },\n  {\n    type: ShapeType.Ellipse,\n    label: 'Ellipse',\n    icon: (style: ShapeStyle) =>\n      style === ShapeStyle.General ? EllipseIcon : ScribbledEllipseIcon,\n  },\n  {\n    type: ShapeType.Triangle,\n    label: 'Triangle',\n    icon: (style: ShapeStyle) =>\n      style === ShapeStyle.General ? TriangleIcon : ScribbledTriangleIcon,\n  },\n  {\n    type: ShapeType.Diamond,\n    label: 'Diamond',\n    icon: (style: ShapeStyle) =>\n      style === ShapeStyle.General ? DiamondIcon : ScribbledDiamondIcon,\n  },\n];\n\nshapes.forEach(shape => {\n  pie.command({\n    label: shape.label,\n    icon: ({ rootElement }) => {\n      const attributes =\n        rootElement.service.editPropsStore.getLastProps('shape');\n      return shape.icon(attributes.shapeStyle);\n    },\n\n    action: ({ rootElement }) => {\n      rootElement.service.tool.setEdgelessTool({\n        type: 'shape',\n        shapeType: shape.type,\n      });\n      rootElement.service.editPropsStore.record('shape', {\n        shapeType: shape.type,\n      });\n      updateShapeOverlay(rootElement);\n    },\n  });\n});\n\npie.command({\n  label: 'Toggle Style',\n  icon: ({ rootElement }) => {\n    const { shapeStyle } =\n      rootElement.service.editPropsStore.getLastProps('shape');\n    return shapeStyle === ShapeStyle.General\n      ? ScribbledStyleIcon\n      : GeneralStyleIcon;\n  },\n\n  action: ({ rootElement }) => {\n    const { shapeStyle } =\n      rootElement.service.editPropsStore.getLastProps('shape');\n    const toggleType =\n      shapeStyle === ShapeStyle.General\n        ? ShapeStyle.Scribbled\n        : ShapeStyle.General;\n\n    rootElement.service.editPropsStore.record('shape', {\n      shapeStyle: toggleType,\n    });\n\n    updateShapeOverlay(rootElement);\n  },\n});\n\npie.colorPicker({\n  label: 'Fill',\n  active: getActiveShapeColor('fill'),\n  onChange: (color: CssVariableName, { rootElement }: PieMenuContext) => {\n    rootElement.service.editPropsStore.record('shape', {\n      fillColor: color as LastProps['shape']['fillColor'],\n    });\n    updateShapeOverlay(rootElement);\n  },\n  colors: FILL_COLORS.map(color => ({ color })),\n});\n\npie.colorPicker({\n  label: 'Stroke',\n  hollow: true,\n  active: getActiveShapeColor('stroke'),\n  onChange: (color: CssVariableName, { rootElement }: PieMenuContext) => {\n    rootElement.service.editPropsStore.record('shape', {\n      strokeColor: color as LastProps['shape']['strokeColor'],\n    });\n    updateShapeOverlay(rootElement);\n  },\n  colors: STROKE_COLORS.map(color => ({ color, name: 'Color' })),\n});\n\npie.endSubmenu();\n\nexport const edgelessToolsPieSchema = pie.build();\n"]}