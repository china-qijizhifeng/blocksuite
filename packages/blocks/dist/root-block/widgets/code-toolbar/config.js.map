{"version":3,"file":"config.js","sourceRoot":"","sources":["../../../../src/root-block/widgets/code-toolbar/config.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  CancelWrapIcon,\n  CaptionIcon,\n  CopyIcon,\n  DeleteIcon,\n  DuplicateIcon,\n  WrapIcon,\n} from '../../../_common/icons/text.js';\nimport { isInsidePageEditor } from '../../../_common/utils/query.js';\nimport type { CodeToolbarItem, CodeToolbarMoreItem } from './types.js';\nimport { duplicateCodeBlock } from './utils.js';\n\nexport const defaultItems: CodeToolbarItem[] = [\n  {\n    type: 'action',\n    name: 'copy-code',\n    icon: CopyIcon,\n    tooltip: 'Copy Code',\n    showWhen: () => true,\n    action: (codeBlock, onClick) => {\n      codeBlock.copyCode();\n      onClick?.();\n    },\n  },\n  {\n    type: 'action',\n    name: 'caption',\n    icon: CaptionIcon,\n    tooltip: 'Caption',\n    showWhen: blockElement => !blockElement.doc.readonly,\n    action: (codeBlock, onClick) => {\n      codeBlock.captionEditor.show();\n      onClick?.();\n    },\n  },\n];\n\nexport const defaultMoreItems: CodeToolbarMoreItem[] = [\n  {\n    type: 'more',\n    name: codeBlock => (codeBlock.model.wrap ? 'Cancel Wrap' : 'Wrap'),\n    tooltip: '',\n    icon: codeBlock => (codeBlock.model.wrap ? CancelWrapIcon : WrapIcon),\n    showWhen: () => true,\n    action: (codeBlock, abortController) => {\n      codeBlock.setWrap(!codeBlock.model.wrap);\n      abortController.abort();\n    },\n  },\n  {\n    type: 'more',\n    name: 'Duplicate',\n    tooltip: '',\n    icon: DuplicateIcon,\n    showWhen: () => true,\n    action: (codeBlock, abortController) => {\n      const codeId = duplicateCodeBlock(codeBlock.model);\n\n      const editorHost = codeBlock.host;\n      editorHost.updateComplete\n        .then(() => {\n          editorHost.selection.setGroup('note', [\n            editorHost.selection.create('block', {\n              blockId: codeId,\n            }),\n          ]);\n\n          if (isInsidePageEditor(editorHost)) {\n            const duplicateElement = editorHost.view.getBlock(codeId);\n            if (duplicateElement) {\n              duplicateElement.scrollIntoView({ block: 'nearest' });\n            }\n          }\n        })\n        .catch(console.error);\n\n      abortController.abort();\n    },\n  },\n  {\n    type: 'divider',\n  },\n  {\n    type: 'more',\n    name: 'Delete',\n    tooltip: '',\n    icon: DeleteIcon,\n    showWhen: () => true,\n    action: (codeBlock, abortController) => {\n      codeBlock.doc.deleteBlock(codeBlock.model);\n      abortController.abort();\n    },\n  },\n];\n"]}