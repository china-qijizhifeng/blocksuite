{"version":3,"file":"change-embed-card-button.js","sourceRoot":"","sources":["../../../../src/root-block/widgets/element-toolbar/change-embed-card-button.ts"],"names":[],"mappings":"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","sourcesContent":["import '../../edgeless/components/buttons/tool-icon-button.js';\nimport '../../edgeless/components/buttons/menu-button.js';\nimport '../../edgeless/components/panel/card-style-panel.js';\n\nimport type { EditorHost } from '@blocksuite/block-std';\nimport { WithDisposable } from '@blocksuite/block-std';\nimport { assertExists } from '@blocksuite/global/utils';\nimport { baseTheme } from '@toeverything/theme';\nimport {\n  css,\n  html,\n  LitElement,\n  nothing,\n  type TemplateResult,\n  unsafeCSS,\n} from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { join } from 'lit/directives/join.js';\n\nimport { toggleEmbedCardEditModal } from '../../../_common/components/embed-card/modal/embed-card-edit-modal.js';\nimport { isPeekable, peek } from '../../../_common/components/index.js';\nimport { toast } from '../../../_common/components/toast.js';\nimport {\n  EMBED_CARD_HEIGHT,\n  EMBED_CARD_WIDTH,\n} from '../../../_common/consts.js';\nimport {\n  BookmarkIcon,\n  SmallArrowDownIcon,\n} from '../../../_common/icons/edgeless.js';\nimport {\n  CaptionIcon,\n  CenterPeekIcon,\n  CopyIcon,\n  EditIcon,\n  EmbedEdgelessIcon,\n  EmbedPageIcon,\n  EmbedWebIcon,\n  ExpandFullIcon,\n  OpenIcon,\n  PaletteIcon,\n} from '../../../_common/icons/text.js';\nimport type { EmbedCardStyle } from '../../../_common/types.js';\nimport { getEmbedCardIcons } from '../../../_common/utils/url.js';\nimport { BookmarkStyles } from '../../../bookmark-block/bookmark-model.js';\nimport type {\n  BookmarkBlockComponent,\n  BookmarkBlockModel,\n} from '../../../bookmark-block/index.js';\nimport type {\n  EmbedFigmaBlockComponent,\n  EmbedFigmaModel,\n} from '../../../embed-figma-block/index.js';\nimport type {\n  EmbedGithubBlockComponent,\n  EmbedGithubModel,\n} from '../../../embed-github-block/index.js';\nimport type { EmbedHtmlModel } from '../../../embed-html-block/index.js';\nimport type {\n  EmbedLinkedDocBlockComponent,\n  EmbedLinkedDocModel,\n} from '../../../embed-linked-doc-block/index.js';\nimport type {\n  EmbedLoomBlockComponent,\n  EmbedLoomModel,\n} from '../../../embed-loom-block/index.js';\nimport type {\n  EmbedSyncedDocBlockComponent,\n  EmbedSyncedDocModel,\n} from '../../../embed-synced-doc-block/index.js';\nimport type {\n  EmbedYoutubeBlockComponent,\n  EmbedYoutubeModel,\n} from '../../../embed-youtube-block/index.js';\nimport { Bound } from '../../../surface-block/index.js';\nimport { renderMenuDivider } from '../../edgeless/components/buttons/menu-button.js';\nimport type { EdgelessRootBlockComponent } from '../../edgeless/edgeless-root-block.js';\nimport {\n  isBookmarkBlock,\n  isEmbedGithubBlock,\n  isEmbedHtmlBlock,\n  isEmbedLinkedDocBlock,\n  isEmbedSyncedDocBlock,\n} from '../../edgeless/utils/query.js';\nimport type { EmbedOptions } from '../../root-service.js';\n\n@customElement('edgeless-change-embed-card-button')\nexport class EdgelessChangeEmbedCardButton extends WithDisposable(LitElement) {\n  private get _doc() {\n    return this.model.doc;\n  }\n\n  private get std() {\n    return this.edgeless.std;\n  }\n\n  private get _rootService() {\n    return this.std.spec.getService('affine:page');\n  }\n\n  private get _blockElement() {\n    const blockSelection =\n      this.edgeless.service.selection.surfaceSelections.filter(sel =>\n        sel.elements.includes(this.model.id)\n      );\n    if (blockSelection.length !== 1) {\n      return;\n    }\n\n    const blockElement = this.std.view.getBlock(blockSelection[0].blockId) as\n      | BookmarkBlockComponent\n      | EmbedGithubBlockComponent\n      | EmbedYoutubeBlockComponent\n      | EmbedFigmaBlockComponent\n      | EmbedLinkedDocBlockComponent\n      | EmbedSyncedDocBlockComponent\n      | EmbedLoomBlockComponent\n      | null;\n    assertExists(blockElement);\n\n    return blockElement;\n  }\n\n  private get _canShowUrlOptions() {\n    return (\n      'url' in this.model &&\n      (isBookmarkBlock(this.model) ||\n        isEmbedGithubBlock(this.model) ||\n        isEmbedLinkedDocBlock(this.model))\n    );\n  }\n\n  private get _canShowFullScreenButton() {\n    return isEmbedHtmlBlock(this.model);\n  }\n\n  private get _isCardView() {\n    if (isBookmarkBlock(this.model) || isEmbedLinkedDocBlock(this.model)) {\n      return true;\n    }\n    return this._embedOptions?.viewType === 'card';\n  }\n\n  private get _isEmbedView() {\n    return (\n      !isBookmarkBlock(this.model) &&\n      (isEmbedSyncedDocBlock(this.model) ||\n        this._embedOptions?.viewType === 'embed')\n    );\n  }\n\n  private get _canConvertToEmbedView() {\n    const block = this._blockElement;\n\n    // synced doc entry controlled by awareness flag\n    if (!!block && isEmbedLinkedDocBlock(block.model)) {\n      const isSyncedDocEnabled = block.doc.awarenessStore.getFlag(\n        'enable_synced_doc_block'\n      );\n      if (!isSyncedDocEnabled) {\n        return false;\n      }\n    }\n\n    return (\n      (block && 'convertToEmbed' in block) ||\n      this._embedOptions?.viewType === 'embed'\n    );\n  }\n\n  private get _canShowCardStylePanel() {\n    return (\n      isBookmarkBlock(this.model) ||\n      isEmbedGithubBlock(this.model) ||\n      isEmbedLinkedDocBlock(this.model)\n    );\n  }\n\n  private get _getCardStyleOptions(): {\n    style: EmbedCardStyle;\n    Icon: TemplateResult<1>;\n    tooltip: string;\n  }[] {\n    const {\n      EmbedCardHorizontalIcon,\n      EmbedCardListIcon,\n      EmbedCardVerticalIcon,\n      EmbedCardCubeIcon,\n    } = getEmbedCardIcons();\n    return [\n      {\n        style: 'horizontal',\n        Icon: EmbedCardHorizontalIcon,\n        tooltip: 'Large horizontal style',\n      },\n      {\n        style: 'list',\n        Icon: EmbedCardListIcon,\n        tooltip: 'Small horizontal style',\n      },\n      {\n        style: 'vertical',\n        Icon: EmbedCardVerticalIcon,\n        tooltip: 'Large vertical style',\n      },\n      {\n        style: 'cube',\n        Icon: EmbedCardCubeIcon,\n        tooltip: 'Small vertical style',\n      },\n    ];\n  }\n\n  private get _pageIcon() {\n    if (\n      !isEmbedLinkedDocBlock(this.model) &&\n      !isEmbedSyncedDocBlock(this.model)\n    ) {\n      return nothing;\n    }\n    const block = this._blockElement as\n      | EmbedLinkedDocBlockComponent\n      | EmbedSyncedDocBlockComponent;\n\n    return block.editorMode === 'page' ? EmbedPageIcon : EmbedEdgelessIcon;\n  }\n\n  private get _docTitle() {\n    if (\n      !isEmbedLinkedDocBlock(this.model) &&\n      !isEmbedSyncedDocBlock(this.model)\n    ) {\n      return '';\n    }\n    const block = this._blockElement as\n      | EmbedLinkedDocBlockComponent\n      | EmbedSyncedDocBlockComponent;\n    return block.docTitle;\n  }\n\n  private get _embedViewButtonDisabled() {\n    if (this._doc.readonly) {\n      return true;\n    }\n    return (\n      isEmbedLinkedDocBlock(this.model) &&\n      (!!this._blockElement?.closest('affine-embed-synced-doc-block') ||\n        this.model.pageId === this._doc.id)\n    );\n  }\n\n  get _openButtonDisabled() {\n    return (\n      isEmbedLinkedDocBlock(this.model) && this.model.pageId === this._doc.id\n    );\n  }\n\n  static override styles = css`\n    .change-embed-card-button {\n      width: 24px;\n      height: 24px;\n      border-radius: 4px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .change-embed-card-button svg {\n      width: 20px;\n      height: 20px;\n    }\n\n    .change-embed-card-button.url {\n      display: flex;\n      width: 180px;\n      padding: var(--1, 0px);\n      align-items: flex-start;\n      gap: 10px;\n      border-radius: var(--1, 0px);\n      opacity: var(--add, 1);\n      margin-right: 6px;\n      user-select: none;\n      cursor: pointer;\n    }\n\n    .change-embed-card-button.url > span {\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n\n      color: var(--affine-link-color);\n      font-feature-settings:\n        'clig' off,\n        'liga' off;\n      font-family: ${unsafeCSS(baseTheme.fontSansFamily)};\n      font-size: 15px;\n      font-style: normal;\n      font-weight: 400;\n      line-height: 24px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      opacity: var(--add, 1);\n    }\n\n    .change-embed-card-button.doc-info {\n      display: flex;\n      align-items: center;\n      width: max-content;\n      max-width: 180px;\n      padding: var(--1, 0px);\n\n      gap: 4px;\n      border-radius: var(--1, 0px);\n      opacity: var(--add, 1);\n      user-select: none;\n      cursor: pointer;\n    }\n\n    .change-embed-card-button.doc-info > svg {\n      width: 20px;\n      height: 20px;\n      flex-shrink: 0;\n    }\n\n    .change-embed-card-button.doc-info > span {\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n\n      color: var(--affine-text-primary-color);\n      font-feature-settings:\n        'clig' off,\n        'liga' off;\n      word-break: break-all;\n      font-family: ${unsafeCSS(baseTheme.fontSansFamily)};\n      font-size: 14px;\n      font-style: normal;\n      font-weight: 400;\n      line-height: 22px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      opacity: var(--add, 1);\n    }\n\n    .change-embed-card-view-style {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n\n    .change-embed-card-button-view-selector {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 2px;\n      border-radius: 6px;\n      background: var(--affine-hover-color);\n    }\n    .change-embed-card-button-view-selector .change-embed-card-button {\n      width: 24px;\n      height: 24px;\n    }\n    .change-embed-card-button-view-selector > icon-button {\n      padding: 0px;\n    }\n    .change-embed-card-button-view-selector .current-view {\n      background: var(--affine-background-overlay-panel-color);\n      border-radius: 6px;\n    }\n\n    .embed-scale-button {\n      display: flex;\n      align-items: center;\n      border-radius: 4px;\n      background-color: var(--affine-hover-color);\n      gap: 2px;\n      line-height: 24px;\n    }\n  `;\n\n  @state()\n  private accessor _embedScale = 1;\n\n  private _embedOptions: EmbedOptions | null = null;\n\n  @property({ attribute: false })\n  accessor model!:\n    | BookmarkBlockModel\n    | EmbedGithubModel\n    | EmbedYoutubeModel\n    | EmbedFigmaModel\n    | EmbedLinkedDocModel\n    | EmbedSyncedDocModel\n    | EmbedHtmlModel\n    | EmbedLoomModel;\n\n  @property({ attribute: false })\n  accessor edgeless!: EdgelessRootBlockComponent;\n\n  @property({ attribute: false })\n  accessor quickConnectButton!: TemplateResult<1>;\n\n  private _open = () => {\n    this._blockElement?.open();\n  };\n\n  private _peek = () => {\n    if (!this._blockElement) return;\n    peek(this._blockElement);\n  };\n\n  private _showCaption() {\n    this._blockElement?.captionEditor.show();\n  }\n\n  private _copyUrl = () => {\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    navigator.clipboard.writeText(this.model.url).catch(console.error);\n    toast(this.std.host as EditorHost, 'Copied link to clipboard');\n    this.edgeless.service.selection.clear();\n  };\n\n  private _setCardStyle(style: EmbedCardStyle) {\n    const bounds = Bound.deserialize(this.model.xywh);\n    bounds.w = EMBED_CARD_WIDTH[style];\n    bounds.h = EMBED_CARD_HEIGHT[style];\n    const xywh = bounds.serialize();\n    this.model.doc.updateBlock(this.model, { style, xywh });\n  }\n\n  private _convertToCardView = () => {\n    if (this._isCardView) {\n      return;\n    }\n\n    const block = this._blockElement;\n    if (block && 'convertToCard' in block) {\n      block.convertToCard();\n      return;\n    }\n\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    const { id, url, xywh, style, caption } = this.model;\n\n    let targetFlavour = 'affine:bookmark',\n      targetStyle = style;\n\n    if (this._embedOptions && this._embedOptions.viewType === 'card') {\n      const { flavour, styles } = this._embedOptions;\n      targetFlavour = flavour;\n      targetStyle = styles.includes(style) ? style : styles[0];\n    } else {\n      targetStyle = BookmarkStyles.includes(style) ? style : BookmarkStyles[0];\n    }\n\n    const bound = Bound.deserialize(xywh);\n    bound.w = EMBED_CARD_WIDTH[targetStyle];\n    bound.h = EMBED_CARD_HEIGHT[targetStyle];\n\n    const newId = this.edgeless.service.addBlock(\n      targetFlavour,\n      { url, xywh: bound.serialize(), style: targetStyle, caption },\n      this.edgeless.surface.model\n    );\n\n    this.std.command.exec('reassociateConnectors', {\n      oldId: id,\n      newId,\n    });\n\n    this.edgeless.service.selection.set({\n      editing: false,\n      elements: [newId],\n    });\n    this._doc.deleteBlock(this.model);\n  };\n\n  private _convertToEmbedView = () => {\n    if (this._isEmbedView) {\n      return;\n    }\n\n    const block = this._blockElement;\n    if (block && 'convertToEmbed' in block) {\n      block.convertToEmbed();\n      return;\n    }\n\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    if (!this._embedOptions) return;\n\n    const { flavour, styles } = this._embedOptions;\n\n    const { id, url, xywh, style } = this.model;\n\n    const targetStyle = styles.includes(style) ? style : styles[0];\n\n    const bound = Bound.deserialize(xywh);\n    bound.w = EMBED_CARD_WIDTH[targetStyle];\n    bound.h = EMBED_CARD_HEIGHT[targetStyle];\n\n    const newId = this.edgeless.service.addBlock(\n      flavour,\n      {\n        url,\n        xywh: bound.serialize(),\n        style: targetStyle,\n      },\n      this.edgeless.surface.model\n    );\n\n    this.std.command.exec('reassociateConnectors', {\n      oldId: id,\n      newId,\n    });\n\n    this.edgeless.service.selection.set({\n      editing: false,\n      elements: [newId],\n    });\n    this._doc.deleteBlock(this.model);\n  };\n\n  private _getScale = () => {\n    if (isEmbedSyncedDocBlock(this.model)) {\n      return this.model.scale ?? 1;\n    } else if (isEmbedHtmlBlock(this.model)) {\n      return 1;\n    }\n\n    const bound = Bound.deserialize(this.model.xywh);\n    return bound.h / EMBED_CARD_HEIGHT[this.model.style];\n  };\n\n  private _setEmbedScale(scale: number) {\n    if (isEmbedHtmlBlock(this.model)) return;\n\n    const bound = Bound.deserialize(this.model.xywh);\n    if (isEmbedSyncedDocBlock(this.model)) {\n      const oldScale = this.model.scale ?? 1;\n      const ratio = scale / oldScale;\n      bound.w *= ratio;\n      bound.h *= ratio;\n      const xywh = bound.serialize();\n      this.model.doc.updateBlock(this.model, { scale, xywh });\n    } else {\n      bound.h = EMBED_CARD_HEIGHT[this.model.style] * scale;\n      bound.w = EMBED_CARD_WIDTH[this.model.style] * scale;\n      const xywh = bound.serialize();\n      this.model.doc.updateBlock(this.model, { xywh });\n    }\n    this._embedScale = scale;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this._embedScale = this._getScale();\n  }\n\n  override render() {\n    const model = this.model;\n    if ('url' in this.model) {\n      this._embedOptions = this._rootService.getEmbedBlockOptions(\n        this.model.url\n      );\n    }\n\n    const buttons = [\n      this._canShowUrlOptions && 'url' in model\n        ? html`\n            <div class=\"change-embed-card-button url\" @click=${this._copyUrl}>\n              <span>${model.url}</span>\n            </div>\n\n            <edgeless-tool-icon-button\n              arai-label=\"Click to copy link\"\n              .tooltip=${'Click to copy link'}\n              class=\"change-embed-card-button copy\"\n              ?disabled=${this._doc.readonly}\n              @click=${this._copyUrl}\n            >\n              ${CopyIcon}\n            </edgeless-tool-icon-button>\n\n            <edgeless-tool-icon-button\n              arai-label=\"Edit\"\n              .tooltip=${'Edit'}\n              class=\"change-embed-card-button edit\"\n              ?disabled=${this._doc.readonly}\n              @click=${() =>\n                toggleEmbedCardEditModal(this.std.host as EditorHost, model)}\n            >\n              ${EditIcon}\n            </edgeless-tool-icon-button>\n          `\n        : nothing,\n\n      isEmbedSyncedDocBlock(model)\n        ? html`\n            <div class=\"change-embed-card-button doc-info\" @click=${this._open}>\n              ${this._pageIcon}\n              <span>${this._docTitle}</span>\n            </div>\n          `\n        : nothing,\n\n      isEmbedSyncedDocBlock(model) || isEmbedLinkedDocBlock(model)\n        ? html`\n            <edgeless-tool-icon-button\n              arai-label=\"Open\"\n              .tooltip=${'Open this doc'}\n              class=\"change-embed-card-button open\"\n              @click=${this._open}\n              .disabled=${this._openButtonDisabled}\n            >\n              ${OpenIcon}\n            </edgeless-tool-icon-button>\n          `\n        : nothing,\n\n      this._blockElement && isPeekable(this._blockElement)\n        ? html`\n            <edgeless-tool-icon-button\n              arai-label=\"Center peek\"\n              .tooltip=${'Open in center peek'}\n              class=\"change-embed-card-button center-peek\"\n              @click=${this._peek}\n            >\n              ${CenterPeekIcon}\n            </edgeless-tool-icon-button>\n          `\n        : nothing,\n\n      this._canShowFullScreenButton\n        ? html`\n            <edgeless-tool-icon-button\n              arai-label=\"Full screen\"\n              .tooltip=${'Full screen'}\n              class=\"change-embed-card-button expand\"\n              @click=${this._open}\n            >\n              ${ExpandFullIcon}\n            </edgeless-tool-icon-button>\n          `\n        : nothing,\n\n      this._canConvertToEmbedView || this._isEmbedView\n        ? html`\n            <div class=\"change-embed-card-view-style\">\n              <div class=\"change-embed-card-button-view-selector\">\n                <edgeless-tool-icon-button\n                  class=${classMap({\n                    'change-embed-card-button': true,\n                    card: true,\n                    'current-view': this._isCardView,\n                  })}\n                  arai-label=\"Card view\"\n                  .tooltip=${'Card view'}\n                  ?disabled=${this._doc.readonly}\n                  .hover=${false}\n                  @click=${this._convertToCardView}\n                >\n                  ${BookmarkIcon}\n                </edgeless-tool-icon-button>\n\n                <edgeless-tool-icon-button\n                  class=${classMap({\n                    'change-embed-card-button': true,\n                    embed: true,\n                    'current-view': this._isEmbedView,\n                  })}\n                  arai-label=\"Embed view\"\n                  .tooltip=${'Embed view'}\n                  .disabled=${this._embedViewButtonDisabled}\n                  .hover=${false}\n                  @click=${this._convertToEmbedView}\n                >\n                  ${EmbedWebIcon}\n                </edgeless-tool-icon-button>\n              </div>\n            </div>\n          `\n        : nothing,\n\n      'style' in model && this._canShowCardStylePanel\n        ? html`\n            <edgeless-menu-button\n              .contentPadding=${'8px'}\n              .button=${html`\n                <edgeless-tool-icon-button\n                  aria-label=\"Card style\"\n                  .tooltip=${'Card style'}\n                >\n                  ${PaletteIcon}\n                </edgeless-tool-icon-button>\n              `}\n            >\n              <card-style-panel\n                slot\n                .value=${model.style}\n                .options=${this._getCardStyleOptions}\n                .onSelect=${(value: EmbedCardStyle) =>\n                  this._setCardStyle(value)}\n              >\n              </card-style-panel>\n            </edgeless-menu-button>\n          `\n        : nothing,\n\n      html`\n        <edgeless-tool-icon-button\n          arai-label=\"Add caption\"\n          .tooltip=${'Add caption'}\n          class=\"change-embed-card-button caption\"\n          ?disabled=${this._doc.readonly}\n          @click=${this._showCaption}\n        >\n          ${CaptionIcon}\n        </edgeless-tool-icon-button>\n      `,\n\n      this.quickConnectButton,\n\n      isEmbedHtmlBlock(model)\n        ? nothing\n        : html`\n            <edgeless-menu-button\n              .contentPadding=${'8px'}\n              .button=${html`\n                <edgeless-tool-icon-button\n                  aria-label=\"Scale\"\n                  .tooltip=${'Scale'}\n                  .justify=${'space-between'}\n                  .iconContainerWidth=${'65px'}\n                  .labelHeight=${'20px'}\n                >\n                  <span class=\"label ellipsis\">\n                    ${Math.round(this._embedScale * 100) + '%'}\n                  </span>\n                  ${SmallArrowDownIcon}\n                </edgeless-tool-icon-button>\n              `}\n            >\n              <edgeless-scale-panel\n                slot\n                class=\"embed-scale-popper\"\n                .scale=${Math.round(this._embedScale * 100)}\n                .onSelect=${(scale: number) => this._setEmbedScale(scale)}\n              ></edgeless-scale-panel>\n            </edgeless-menu-button>\n          `,\n    ];\n\n    return join(\n      buttons.filter(button => button !== nothing),\n      renderMenuDivider\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'edgeless-change-embed-card-button': EdgelessChangeEmbedCardButton;\n  }\n}\n\nexport function renderEmbedButton(\n  edgeless: EdgelessRootBlockComponent,\n  models?: EdgelessChangeEmbedCardButton['model'][],\n  quickConnectButton?: TemplateResult<1>[]\n) {\n  if (models?.length !== 1) return nothing;\n\n  return html`\n    <edgeless-change-embed-card-button\n      .model=${models[0]}\n      .edgeless=${edgeless}\n      .quickConnectButton=${quickConnectButton?.pop() ?? nothing}\n    ></edgeless-change-embed-card-button>\n  `;\n}\n"]}