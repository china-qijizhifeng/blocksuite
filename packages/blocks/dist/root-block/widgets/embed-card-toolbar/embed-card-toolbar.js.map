{"version":3,"file":"embed-card-toolbar.js","sourceRoot":"","sources":["../../../../src/root-block/widgets/embed-card-toolbar/embed-card-toolbar.ts"],"names":[],"mappings":"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","sourcesContent":["import type { EditorHost } from '@blocksuite/block-std';\nimport { WidgetElement } from '@blocksuite/block-std';\nimport { assertExists } from '@blocksuite/global/utils';\nimport { type BlockModel, DocCollection } from '@blocksuite/store';\nimport {\n  autoUpdate,\n  computePosition,\n  flip,\n  offset,\n  type Placement,\n  type ReferenceElement,\n} from '@floating-ui/dom';\nimport { html, nothing, type PropertyValues } from 'lit';\nimport { customElement, query, state } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { EmbedCardMoreMenu } from '../../../_common/components/embed-card/embed-card-more-menu-popper.js';\nimport { EmbedCardStyleMenu } from '../../../_common/components/embed-card/embed-card-style-popper.js';\nimport { toggleEmbedCardCaptionEditModal } from '../../../_common/components/embed-card/modal/embed-card-caption-edit-modal.js';\nimport { toggleEmbedCardEditModal } from '../../../_common/components/embed-card/modal/embed-card-edit-modal.js';\nimport {\n  type EmbedToolbarBlockElement,\n  type EmbedToolbarModel,\n  isEmbedCardBlockElement,\n} from '../../../_common/components/embed-card/type.js';\nimport { isPeekable, peek } from '../../../_common/components/index.js';\nimport { createLitPortal } from '../../../_common/components/portal.js';\nimport { toast } from '../../../_common/components/toast.js';\nimport {\n  BookmarkIcon,\n  MoreVerticalIcon,\n} from '../../../_common/icons/edgeless.js';\nimport {\n  CaptionIcon,\n  CenterPeekIcon,\n  CopyIcon,\n  EditIcon,\n  EmbedEdgelessIcon,\n  EmbedPageIcon,\n  EmbedWebIcon,\n  LinkIcon,\n  OpenIcon,\n  PaletteIcon,\n} from '../../../_common/icons/text.js';\nimport {\n  getBlockComponentByPath,\n  getModelByBlockComponent,\n} from '../../../_common/utils/query.js';\nimport {\n  type BookmarkBlockModel,\n  BookmarkStyles,\n} from '../../../bookmark-block/bookmark-model.js';\nimport type { EmbedGithubModel } from '../../../embed-github-block/embed-github-model.js';\nimport type { EmbedLinkedDocBlockComponent } from '../../../embed-linked-doc-block/embed-linked-doc-block.js';\nimport type { EmbedLinkedDocModel } from '../../../embed-linked-doc-block/embed-linked-doc-model.js';\nimport type { EmbedSyncedDocBlockComponent } from '../../../embed-synced-doc-block/embed-synced-doc-block.js';\nimport {\n  isBookmarkBlock,\n  isEmbedGithubBlock,\n  isEmbedLinkedDocBlock,\n  isEmbedSyncedDocBlock,\n} from '../../edgeless/utils/query.js';\nimport { RootBlockModel } from '../../root-model.js';\nimport type { EmbedOptions } from '../../root-service.js';\nimport { embedCardToolbarStyle } from './styles.js';\n\nexport const AFFINE_EMBED_CARD_TOOLBAR_WIDGET = 'affine-embed-card-toolbar';\n\n@customElement(AFFINE_EMBED_CARD_TOOLBAR_WIDGET)\nexport class EmbedCardToolbar extends WidgetElement<\n  EmbedToolbarModel,\n  EmbedToolbarBlockElement\n> {\n  private get _selection() {\n    return this.host.selection;\n  }\n\n  private get _rootService() {\n    return this.std.spec.getService('affine:page');\n  }\n\n  private get _canShowUrlOptions() {\n    return 'url' in this.model && this._isCardView;\n  }\n\n  private get _isCardView() {\n    return (\n      isBookmarkBlock(this.model) ||\n      isEmbedLinkedDocBlock(this.model) ||\n      this._embedOptions?.viewType === 'card'\n    );\n  }\n\n  private get _isEmbedView() {\n    return (\n      !isBookmarkBlock(this.model) &&\n      (isEmbedSyncedDocBlock(this.model) ||\n        this._embedOptions?.viewType === 'embed')\n    );\n  }\n\n  private get _canConvertToEmbedView() {\n    // synced doc entry controlled by awareness flag\n    if (isEmbedLinkedDocBlock(this.model)) {\n      const isSyncedDocEnabled = this.model.doc.awarenessStore.getFlag(\n        'enable_synced_doc_block'\n      );\n      if (!isSyncedDocEnabled) {\n        return false;\n      }\n    }\n\n    return (\n      'convertToEmbed' in this.blockElement ||\n      this._embedOptions?.viewType === 'embed'\n    );\n  }\n\n  private get _embedViewButtonDisabled() {\n    if (this.model.doc.readonly) {\n      return true;\n    }\n    return (\n      isEmbedLinkedDocBlock(this.model) &&\n      (!!this.blockElement.closest('affine-embed-synced-doc-block') ||\n        this.model.pageId === this.doc.id)\n    );\n  }\n\n  get _openButtonDisabled() {\n    return (\n      isEmbedLinkedDocBlock(this.model) && this.model.pageId === this.doc.id\n    );\n  }\n\n  private get _pageIcon() {\n    if (\n      !isEmbedLinkedDocBlock(this.model) &&\n      !isEmbedSyncedDocBlock(this.model)\n    ) {\n      return nothing;\n    }\n    const block = this.blockElement as\n      | EmbedLinkedDocBlockComponent\n      | EmbedSyncedDocBlockComponent;\n\n    return block.editorMode === 'page' ? EmbedPageIcon : EmbedEdgelessIcon;\n  }\n\n  private get _docTitle() {\n    if (\n      !isEmbedLinkedDocBlock(this.model) &&\n      !isEmbedSyncedDocBlock(this.model)\n    ) {\n      return '';\n    }\n    const block = this.blockElement as\n      | EmbedLinkedDocBlockComponent\n      | EmbedSyncedDocBlockComponent;\n    return block.docTitle;\n  }\n\n  static override styles = embedCardToolbarStyle;\n\n  private _abortController = new AbortController();\n\n  private _cardStyleMenuAbortController: AbortController | null = null;\n\n  private _moreMenuAbortController: AbortController | null = null;\n\n  private _embedOptions: EmbedOptions | null = null;\n\n  @query('.embed-card-toolbar')\n  accessor embedCardToolbarElement!: HTMLElement;\n\n  @query('.embed-card-toolbar-button.card-style')\n  accessor cardStyleButton: HTMLElement | null = null;\n\n  @query('.embed-card-toolbar-button.more-button')\n  accessor moreButton: HTMLElement | null = null;\n\n  @state()\n  accessor hide: boolean = true;\n\n  private _resetAbortController = () => {\n    this._abortController.abort();\n    this._abortController = new AbortController();\n  };\n\n  private _show() {\n    this.hide = false;\n    this._abortController.signal.addEventListener(\n      'abort',\n      autoUpdate(this.blockElement, this, () => {\n        computePosition(this.blockElement, this, {\n          placement: 'top-start',\n          middleware: [flip(), offset(8)],\n        })\n          .then(({ x, y }) => {\n            this.style.left = `${x}px`;\n            this.style.top = `${y}px`;\n          })\n          .catch(console.error);\n      })\n    );\n  }\n\n  private _hide() {\n    this._resetAbortController();\n    this.hide = true;\n  }\n\n  private _canShowCardStylePanel(\n    model: BlockModel\n  ): model is BookmarkBlockModel | EmbedGithubModel | EmbedLinkedDocModel {\n    return (\n      isBookmarkBlock(model) ||\n      isEmbedGithubBlock(model) ||\n      isEmbedLinkedDocBlock(model)\n    );\n  }\n\n  private _copyUrl() {\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    navigator.clipboard.writeText(this.model.url).catch(console.error);\n    toast(this.host as EditorHost, 'Copied link to clipboard');\n  }\n\n  private _turnIntoInlineView() {\n    if ('covertToInline' in this.blockElement) {\n      this.blockElement.covertToInline();\n      return;\n    }\n\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    const { doc } = this.model;\n    const parent = doc.getParent(this.model);\n    const index = parent?.children.indexOf(this.model);\n\n    const yText = new DocCollection.Y.Text();\n    const insert = this.model.title || this.model.caption || this.model.url;\n    yText.insert(0, insert);\n    yText.format(0, insert.length, { link: this.model.url });\n    const text = new doc.Text(yText);\n    doc.addBlock(\n      'affine:paragraph',\n      {\n        text,\n      },\n      parent,\n      index\n    );\n\n    doc.deleteBlock(this.model);\n  }\n\n  private _convertToCardView() {\n    if (this._isCardView) {\n      return;\n    }\n\n    if ('convertToCard' in this.blockElement) {\n      this.blockElement.convertToCard();\n      return;\n    }\n\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    const { doc, url, style, caption } = this.model;\n\n    let targetFlavour = 'affine:bookmark',\n      targetStyle = style;\n\n    if (this._embedOptions && this._embedOptions.viewType === 'card') {\n      const { flavour, styles } = this._embedOptions;\n      targetFlavour = flavour;\n      targetStyle = styles.includes(style) ? style : styles[0];\n    } else {\n      targetStyle = BookmarkStyles.includes(style)\n        ? style\n        : BookmarkStyles.filter(\n            style => style !== 'vertical' && style !== 'cube'\n          )[0];\n    }\n\n    const parent = doc.getParent(this.model);\n    assertExists(parent);\n    const index = parent.children.indexOf(this.model);\n\n    doc.addBlock(\n      targetFlavour as never,\n      { url, style: targetStyle, caption },\n      parent,\n      index\n    );\n    this.std.selection.setGroup('note', []);\n    doc.deleteBlock(this.model);\n  }\n\n  private _convertToEmbedView() {\n    if (this._isEmbedView) {\n      return;\n    }\n\n    if ('convertToEmbed' in this.blockElement) {\n      this.blockElement.convertToEmbed();\n      return;\n    }\n\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    const { doc, url, style, caption } = this.model;\n\n    if (!this._embedOptions || this._embedOptions.viewType !== 'embed') {\n      return;\n    }\n    const { flavour, styles } = this._embedOptions;\n\n    const targetStyle = styles.includes(style)\n      ? style\n      : styles.filter(style => style !== 'vertical' && style !== 'cube')[0];\n\n    const parent = doc.getParent(this.model);\n    assertExists(parent);\n    const index = parent.children.indexOf(this.model);\n\n    doc.addBlock(\n      flavour as never,\n      { url, style: targetStyle, caption },\n      parent,\n      index\n    );\n\n    this.std.selection.setGroup('note', []);\n    doc.deleteBlock(this.model);\n  }\n\n  private _showCaption() {\n    try {\n      this.blockElement.captionEditor.show();\n    } catch (_) {\n      toggleEmbedCardCaptionEditModal(this.blockElement);\n    }\n    this._resetAbortController();\n  }\n\n  private _createMenu(\n    referenceElement: ReferenceElement,\n    menu: EmbedCardStyleMenu | EmbedCardMoreMenu,\n    placement: Placement,\n    offsetValue = 0\n  ) {\n    createLitPortal({\n      template: menu,\n      container: this.embedCardToolbarElement,\n      computePosition: {\n        referenceElement,\n        placement,\n        middleware: [flip(), offset(offsetValue)],\n        autoUpdate: true,\n      },\n      abortController: menu.abortController,\n      closeOnClickAway: true,\n    });\n  }\n\n  private _toggleCardStyleMenu() {\n    this._moreMenuAbortController?.abort();\n    if (\n      this._cardStyleMenuAbortController &&\n      !this._cardStyleMenuAbortController.signal.aborted\n    ) {\n      this._cardStyleMenuAbortController.abort();\n      return;\n    }\n    this._cardStyleMenuAbortController = new AbortController();\n\n    if (!this._canShowCardStylePanel(this.model)) {\n      return;\n    }\n\n    const embedCardStyleMenu = new EmbedCardStyleMenu();\n    embedCardStyleMenu.model = this.model;\n    embedCardStyleMenu.abortController = this._cardStyleMenuAbortController;\n\n    assertExists(this.cardStyleButton);\n    this._createMenu(this.cardStyleButton, embedCardStyleMenu, 'top', 4);\n  }\n\n  private _toggleMoreMenu() {\n    this._cardStyleMenuAbortController?.abort();\n    // Abort the previous menu if it's not aborted\n    if (\n      this._moreMenuAbortController &&\n      !this._moreMenuAbortController.signal.aborted\n    ) {\n      this._moreMenuAbortController.abort();\n      return;\n    }\n    this._moreMenuAbortController = new AbortController();\n\n    const embedCardMoreMenu = new EmbedCardMoreMenu();\n    embedCardMoreMenu.block = this.blockElement;\n    embedCardMoreMenu.abortController = this._moreMenuAbortController;\n\n    assertExists(this.moreButton);\n    this._createMenu(\n      this.embedCardToolbarElement,\n      embedCardMoreMenu,\n      'top-end'\n    );\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.disposables.add(\n      this._selection.slots.changed.on(() => {\n        const hasTextSelection = this._selection.find('text');\n        if (hasTextSelection) {\n          this._hide();\n          return;\n        }\n\n        const blockSelections = this._selection.filter('block');\n        if (!blockSelections || blockSelections.length !== 1) {\n          this._hide();\n          return;\n        }\n\n        const block = getBlockComponentByPath(\n          this.host,\n          blockSelections[0].blockId\n        );\n        if (!block || !isEmbedCardBlockElement(block)) {\n          this._hide();\n          return;\n        }\n\n        this.blockElement = block;\n        this.model = getModelByBlockComponent(block) as EmbedToolbarModel;\n\n        this._show();\n      })\n    );\n  }\n\n  override willUpdate(changedProperties: PropertyValues<typeof this>) {\n    // avoid no selection change on the first update so that `this.model` will be root block model\n    if (!this.hasUpdated) return;\n\n    // `this.model` is only controlled by selection changed event\n    if (changedProperties.has('model')) {\n      const previousModel = changedProperties.get('model');\n      assertExists(previousModel);\n      if (this.model instanceof RootBlockModel) {\n        this.model = previousModel;\n      }\n    }\n  }\n\n  override render() {\n    if (this.hide) return nothing;\n\n    const model = this.model;\n    this._embedOptions =\n      'url' in model ? this._rootService.getEmbedBlockOptions(model.url) : null;\n\n    return html`\n      <div\n        class=\"embed-card-toolbar\"\n        @pointerdown=${(e: MouseEvent) => e.stopPropagation()}\n        @click=${(e: MouseEvent) => e.stopPropagation()}\n        @dblclick=${(e: MouseEvent) => e.stopPropagation()}\n      >\n        ${this._canShowUrlOptions && 'url' in model\n          ? html`\n              <div\n                class=\"embed-card-toolbar-button url\"\n                @click=${() => this._copyUrl()}\n              >\n                <span>${model.url}</span>\n              </div>\n\n              <icon-button\n                size=\"24px\"\n                class=\"embed-card-toolbar-button copy\"\n                ?disabled=${model.doc.readonly}\n                @click=${() => this._copyUrl()}\n              >\n                ${CopyIcon}\n                <affine-tooltip .offset=${12}\n                  >${'Click to copy link'}</affine-tooltip\n                >\n              </icon-button>\n\n              <icon-button\n                size=\"24px\"\n                class=\"embed-card-toolbar-button edit\"\n                ?disabled=${model.doc.readonly}\n                @click=${() => toggleEmbedCardEditModal(this.host, model)}\n              >\n                ${EditIcon}\n                <affine-tooltip .offset=${12}>${'Edit'}</affine-tooltip>\n              </icon-button>\n\n              <div class=\"divider\"></div>\n            `\n          : nothing}\n        ${isEmbedLinkedDocBlock(model) || isEmbedSyncedDocBlock(model)\n          ? html`\n              <icon-button\n                size=\"24px\"\n                class=\"embed-card-toolbar-button doc-info\"\n                @click=${() => this.blockElement.open()}\n                ?disabled=${this._openButtonDisabled}\n              >\n                ${isEmbedLinkedDocBlock(model)\n                  ? nothing\n                  : html`${this._pageIcon} <span>${this._docTitle}</span>`}\n                ${OpenIcon}\n                <affine-tooltip .offset=${12}\n                  >${'Open this doc'}</affine-tooltip\n                >\n              </icon-button>\n\n              <div class=\"divider\"></div>\n            `\n          : nothing}\n        ${isPeekable(this.blockElement)\n          ? html`<icon-button\n                size=\"24px\"\n                class=\"embed-card-toolbar-button peek\"\n                @click=${() => peek(this.blockElement)}\n              >\n                ${CenterPeekIcon}\n                <affine-tooltip .offset=${12}\n                  >${'Open in center peek'}</affine-tooltip\n                >\n              </icon-button>\n              <div class=\"divider\"></div>`\n          : nothing}\n        <div class=\"embed-card-toolbar-button view-selector\">\n          <icon-button\n            size=\"24px\"\n            class=\"embed-card-toolbar-button link\"\n            .hover=${false}\n            ?disabled=${model.doc.readonly}\n            @click=${() => this._turnIntoInlineView()}\n          >\n            ${LinkIcon}\n            <affine-tooltip .offset=${12}>${'Inline view'}</affine-tooltip>\n          </icon-button>\n\n          <icon-button\n            size=\"24px\"\n            class=${classMap({\n              'embed-card-toolbar-button': true,\n              card: true,\n              'current-view': this._isCardView,\n            })}\n            .hover=${false}\n            ?disabled=${model.doc.readonly}\n            @click=${() => this._convertToCardView()}\n          >\n            ${BookmarkIcon}\n            <affine-tooltip .offset=${12}>${'Card view'}</affine-tooltip>\n          </icon-button>\n\n          ${this._canConvertToEmbedView || this._isEmbedView\n            ? html`\n                <icon-button\n                  size=\"24px\"\n                  class=${classMap({\n                    'embed-card-toolbar-button': true,\n                    embed: true,\n                    'current-view': this._isEmbedView,\n                  })}\n                  .hover=${false}\n                  ?disabled=${this._embedViewButtonDisabled}\n                  @click=${() => this._convertToEmbedView()}\n                >\n                  ${EmbedWebIcon}\n                  <affine-tooltip .offset=${12}>${'Embed view'}</affine-tooltip>\n                </icon-button>\n              `\n            : nothing}\n        </div>\n\n        ${this._canShowCardStylePanel(model)\n          ? html`\n              <icon-button\n                size=\"24px\"\n                class=\"embed-card-toolbar-button card-style\"\n                ?disabled=${model.doc.readonly}\n                @click=${() => this._toggleCardStyleMenu()}\n              >\n                ${PaletteIcon}\n                <affine-tooltip .offset=${12}>${'Card style'}</affine-tooltip>\n              </icon-button>\n            `\n          : nothing}\n\n        <div class=\"divider\"></div>\n\n        <icon-button\n          size=\"24px\"\n          class=\"embed-card-toolbar-button caption\"\n          ?disabled=${model.doc.readonly}\n          @click=${() => this._showCaption()}\n        >\n          ${CaptionIcon}\n          <affine-tooltip .offset=${12}>${'Add Caption'}</affine-tooltip>\n        </icon-button>\n\n        <div class=\"divider\"></div>\n\n        <icon-button\n          size=\"24px\"\n          class=\"embed-card-toolbar-button more-button\"\n          @click=${() => this._toggleMoreMenu()}\n        >\n          ${MoreVerticalIcon}\n          <affine-tooltip .offset=${12}>More</affine-tooltip>\n        </icon-button>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [AFFINE_EMBED_CARD_TOOLBAR_WIDGET]: EmbedCardToolbar;\n  }\n}\n"]}