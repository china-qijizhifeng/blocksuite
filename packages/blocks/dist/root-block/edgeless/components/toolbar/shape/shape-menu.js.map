{"version":3,"file":"shape-menu.js","sourceRoot":"","sources":["../../../../../../src/root-block/edgeless/components/toolbar/shape/shape-menu.ts"],"names":[],"mappings":"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","sourcesContent":["import '../../buttons/tool-icon-button.js';\nimport '../../panel/one-row-color-panel.js';\n\nimport { css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport {\n  GeneralStyleIcon,\n  ScribbledStyleIcon,\n} from '../../../../../_common/icons/index.js';\nimport type { CssVariableName } from '../../../../../_common/theme/css-variables.js';\nimport { ShapeStyle } from '../../../../../surface-block/index.js';\nimport { type ColorEvent, isTransparent } from '../../panel/color-panel.js';\nimport {\n  LINE_COLOR_PREFIX,\n  SHAPE_COLOR_PREFIX,\n  ShapeComponentConfig,\n} from './shape-menu-config.js';\nimport type { ShapeName } from './shape-tool-element.js';\n\n@customElement('edgeless-shape-menu')\nexport class EdgelessShapeMenu extends LitElement {\n  static override styles = css`\n    :host {\n      display: flex;\n      z-index: -1;\n    }\n    .menu-content {\n      display: flex;\n      align-items: center;\n    }\n    .shape-type-container,\n    .shape-style-container {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 14px;\n    }\n    .shape-type-container svg,\n    .shape-style-container svg {\n      fill: var(--affine-icon-color);\n      stroke: none;\n    }\n    menu-divider {\n      height: 24px;\n      margin: 0 9px;\n    }\n  `;\n\n  @property({ attribute: false })\n  accessor shapeType!: ShapeName;\n\n  @property({ attribute: false })\n  accessor fillColor!: CssVariableName;\n\n  @property({ attribute: false })\n  accessor shapeStyle!: ShapeStyle;\n\n  @property({ attribute: false })\n  accessor strokeColor!: CssVariableName;\n\n  @property({ attribute: false })\n  accessor radius!: number;\n\n  @property({ attribute: false })\n  accessor onChange!: (props: Record<string, unknown>) => void;\n\n  private _setStrokeColor = (strokeColor: CssVariableName) => {\n    const props: Record<string, unknown> = { strokeColor };\n    const fillColor = strokeColor.replace(\n      LINE_COLOR_PREFIX,\n      SHAPE_COLOR_PREFIX\n    );\n    const filled = !isTransparent(fillColor);\n    props.fillColor = fillColor;\n    props.filled = filled;\n    this.onChange(props);\n  };\n\n  private _setShapeStyle = (shapeStyle: ShapeStyle) => {\n    this.onChange({\n      shapeStyle,\n    });\n  };\n\n  override render() {\n    const { radius, strokeColor, shapeStyle } = this;\n    let { shapeType } = this;\n    if (shapeType === 'rect' && radius > 0) {\n      shapeType = 'roundedRect';\n    }\n\n    return html`\n      <edgeless-slide-menu>\n        <div class=\"menu-content\">\n          <div class=\"shape-style-container\">\n            <edgeless-tool-icon-button\n              .tooltip=${'General'}\n              .active=${shapeStyle === ShapeStyle.General}\n              .activeMode=${'background'}\n              @click=${() => {\n                this._setShapeStyle(ShapeStyle.General);\n              }}\n            >\n              ${GeneralStyleIcon}\n            </edgeless-tool-icon-button>\n            <edgeless-tool-icon-button\n              .tooltip=${'Scribbled'}\n              .active=${shapeStyle === ShapeStyle.Scribbled}\n              .activeMode=${'background'}\n              @click=${() => {\n                this._setShapeStyle(ShapeStyle.Scribbled);\n              }}\n            >\n              ${ScribbledStyleIcon}\n            </edgeless-tool-icon-button>\n          </div>\n          <menu-divider .vertical=${true}></menu-divider>\n          <div class=\"shape-type-container\">\n            ${ShapeComponentConfig.map(\n              ({ name, generalIcon, scribbledIcon, tooltip, value }) => {\n                return html`\n                  <edgeless-tool-icon-button\n                    .tooltip=${tooltip}\n                    .active=${shapeType === name}\n                    .activeMode=${'background'}\n                    @click=${() => this.onChange(value)}\n                  >\n                    ${shapeStyle === ShapeStyle.General\n                      ? generalIcon\n                      : scribbledIcon}\n                  </edgeless-tool-icon-button>\n                `;\n              }\n            )}\n          </div>\n          <menu-divider .vertical=${true}></menu-divider>\n          <edgeless-one-row-color-panel\n            .value=${strokeColor}\n            @select=${(e: ColorEvent) => this._setStrokeColor(e.detail)}\n          ></edgeless-one-row-color-panel>\n        </div>\n      </edgeless-slide-menu>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'edgeless-shape-menu': EdgelessShapeMenu;\n  }\n}\n"]}