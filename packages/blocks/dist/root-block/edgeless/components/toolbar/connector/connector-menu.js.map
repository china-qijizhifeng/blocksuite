{"version":3,"file":"connector-menu.js","sourceRoot":"","sources":["../../../../../../src/root-block/edgeless/components/toolbar/connector/connector-menu.ts"],"names":[],"mappings":"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","sourcesContent":["import '../../panel/one-row-color-panel.js';\nimport '../common/slide-menu.js';\n\nimport { css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport {\n  ConnectorCWithArrowIcon,\n  ConnectorLWithArrowIcon,\n  ConnectorXWithArrowIcon,\n} from '../../../../../_common/icons/index.js';\nimport { ConnectorMode } from '../../../../../surface-block/index.js';\nimport type { EdgelessTool } from '../../../types.js';\nimport type { ColorEvent } from '../../panel/color-panel.js';\nimport type { LineWidthEvent } from '../../panel/line-width-panel.js';\nimport { EdgelessToolbarToolMixin } from '../mixins/tool.mixin.js';\n\nfunction ConnectorModeButtonGroup(\n  mode: ConnectorMode,\n  setConnectorMode: (props: Record<string, unknown>) => void\n) {\n  /**\n   * There is little hacky on rendering tooltip.\n   * We don't want either tooltip overlap the top button or tooltip on left.\n   * So we put the lower button's tooltip as the first element of the button group container\n   */\n  return html`\n    <div class=\"connector-mode-button-group\">\n      <edgeless-tool-icon-button\n        .active=${mode === ConnectorMode.Curve}\n        .activeMode=${'background'}\n        .tooltip=${'Curve'}\n        @click=${() => setConnectorMode({ mode: ConnectorMode.Curve })}\n      >\n        ${ConnectorCWithArrowIcon}\n      </edgeless-tool-icon-button>\n      <edgeless-tool-icon-button\n        .active=${mode === ConnectorMode.Orthogonal}\n        .activeMode=${'background'}\n        .tooltip=${'Elbowed'}\n        @click=${() => setConnectorMode({ mode: ConnectorMode.Orthogonal })}\n      >\n        ${ConnectorXWithArrowIcon}\n      </edgeless-tool-icon-button>\n      <edgeless-tool-icon-button\n        .active=${mode === ConnectorMode.Straight}\n        .activeMode=${'background'}\n        .tooltip=${'Straight'}\n        @click=${() => setConnectorMode({ mode: ConnectorMode.Straight })}\n      >\n        ${ConnectorLWithArrowIcon}\n      </edgeless-tool-icon-button>\n    </div>\n  `;\n}\n\n@customElement('edgeless-connector-menu')\nexport class EdgelessConnectorMenu extends EdgelessToolbarToolMixin(\n  LitElement\n) {\n  static override styles = css`\n    :host {\n      position: absolute;\n      display: flex;\n      z-index: -1;\n    }\n\n    .connector-submenu-content {\n      display: flex;\n      height: 24px;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .connector-mode-button-group {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      gap: 14px;\n    }\n\n    .connector-mode-button-group > edgeless-tool-icon-button svg {\n      fill: var(--affine-icon-color);\n    }\n\n    .submenu-divider {\n      width: 1px;\n      height: 24px;\n      margin: 0 16px;\n      background-color: var(--affine-border-color);\n      display: inline-block;\n    }\n  `;\n\n  override type: EdgelessTool['type'] = 'connector';\n\n  @property({ attribute: false })\n  accessor mode!: ConnectorMode;\n\n  @property({ attribute: false })\n  accessor stroke!: string;\n\n  @property({ attribute: false })\n  accessor strokeWidth!: number;\n\n  @property({ attribute: false })\n  accessor onChange!: (props: Record<string, unknown>) => void;\n\n  override render() {\n    const { stroke, strokeWidth } = this;\n    const connectorModeButtonGroup = ConnectorModeButtonGroup(\n      this.mode,\n      this.onChange\n    );\n\n    return html`\n      <edgeless-slide-menu>\n        <div class=\"connector-submenu-content\">\n          ${connectorModeButtonGroup}\n          <div class=\"submenu-divider\"></div>\n          <edgeless-line-width-panel\n            .selectedSize=${strokeWidth}\n            @select=${(e: LineWidthEvent) =>\n              this.onChange({ strokeWidth: e.detail })}\n          >\n          </edgeless-line-width-panel>\n          <div class=\"submenu-divider\"></div>\n          <edgeless-one-row-color-panel\n            .value=${stroke}\n            @select=${(e: ColorEvent) => this.onChange({ stroke: e.detail })}\n          ></edgeless-one-row-color-panel>\n        </div>\n      </edgeless-slide-menu>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'edgeless-connector-menu': EdgelessConnectorMenu;\n  }\n}\n"]}