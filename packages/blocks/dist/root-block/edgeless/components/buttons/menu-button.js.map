{"version":3,"file":"menu-button.js","sourceRoot":"","sources":["../../../../../src/root-block/edgeless/components/buttons/menu-button.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,uBAAuB,CAAC;AAE/B,OAAO,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvD,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,UAAU,EAAuB,MAAM,KAAK,CAAC;AACjE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAEnE,OAAO,EAAE,kBAAkB,EAAE,MAAM,4CAA4C,CAAC;IAInE,kBAAkB;4BAD9B,aAAa,CAAC,sBAAsB,CAAC;;;;sBACE,cAAc,CAAC,UAAU,CAAC;;;;;;;;;;;;;kCAAlC,SAAQ,WAA0B;;;;oCAoB/D,KAAK,CAAC,2BAA2B,CAAC;oCAGlC,KAAK,CAAC,uBAAuB,CAAC;kCAK9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;0CAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAV/B,6KAAiB,QAAQ,6BAAR,QAAQ,2FAA0B;YAGnD,6KAAiB,QAAQ,6BAAR,QAAQ,2FAAuB;YAKhD,uKAAS,MAAM,6BAAN,MAAM,uFAA8B;YAG7C,+LAAS,cAAc,6BAAd,cAAc,uGAAiC;YAhC1D,6KA4EC;;;;iBA3EiB,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;GAiB3B,AAjBqB,CAiBpB;QAGF,2BAAmD;QAAnD,IAAiB,QAAQ,8CAA0B;QAAnD,IAAiB,QAAQ,oDAA0B;QAGnD,2BAAgD;QAAhD,IAAiB,QAAQ,8CAAuB;QAAhD,IAAiB,QAAQ,oDAAuB;QAKhD,yBAA6C;QAA7C,IAAS,MAAM,4CAA8B;QAA7C,IAAS,MAAM,kDAA8B;QAG7C,iCAAwD;QAAxD,IAAS,cAAc,oDAAiC;QAAxD,IAAS,cAAc,0DAAiC;QAExD,KAAK;YACH,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC;QACvB,CAAC;QAEQ,YAAY;YACnB,IAAI,CAAC,OAAO,GAAG,kBAAkB,CAC/B,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,QAAQ,EACb,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE;gBACd,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,OAAO,KAAK,QAAQ,CAAC;YACnD,CAAC,EACD,EAAE,CACH,CAAC;YACF,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,EAAE,SAAS,EAAE,CAAC,CAAgB,EAAE,EAAE;gBACnE,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,IAAI,CAAC,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;oBACvB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC;YACH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAa,EAAE,EAAE;gBACvE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;gBACtB,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,KAAK,MAAM,EAAE,CAAC;oBAClC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC/C,CAAC;YACH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACtC,CAAC;QAEQ,iBAAiB;YACxB,KAAK,CAAC,iBAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YAClB,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;gBACxB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACnE,CAAC;QACH,CAAC;QAEQ,MAAM;YACb,OAAO,IAAI,CAAA,GAAG,IAAI,CAAC,MAAM;;;+BAGE,CAAC;QAC9B,CAAC;;;YAtDgB,0FAAkC;YAGlC,kJAA+B;YAExC,YAAO,wDAAyC;YAG/C,sFAAoC;YAGpC,mJAAqC,SAAS,GAAC;;;;YAhC7C,uDAAkB;;;;;SAAlB,kBAAkB;IA+ElB,mBAAmB;4BAD/B,aAAa,CAAC,uBAAuB,CAAC;;;;sBACE,UAAU;mCAAlB,SAAQ,WAAU;;;;YAAnD,6KAyBC;;;;iBAxBiB,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;GAmB3B,AAnBqB,CAmBpB;QAEO,MAAM;YACb,OAAO,IAAI,CAAA,eAAe,CAAC;QAC7B,CAAC;;YAxBU,uDAAmB;;;;;SAAnB,mBAAmB;IA4BnB,mBAAmB;4BAD/B,aAAa,CAAC,uBAAuB,CAAC;;;;sBACE,UAAU;mCAAlB,SAAQ,WAAU;;;;YAAnD,6KA6BC;;;;iBA5BiB,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2B3B,AA3BqB,CA2BpB;;YA5BS,uDAAmB;;;;;SAAnB,mBAAmB;AA+BhC,MAAM,UAAU,iBAAiB;IAC/B,OAAO,IAAI,CAAA,iDAAiD,CAAC;AAC/D,CAAC","sourcesContent":["import './tool-icon-button.js';\n\nimport { WithDisposable } from '@blocksuite/block-std';\nimport { css, html, LitElement, type TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\n\nimport { createButtonPopper } from '../../../../_common/utils/button-popper.js';\nimport type { EdgelessToolIconButton } from './tool-icon-button.js';\n\n@customElement('edgeless-menu-button')\nexport class EdgelessMenuButton extends WithDisposable(LitElement) {\n  static override styles = css`\n    :host {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n    }\n\n    ::slotted([slot]) {\n      display: flex;\n    }\n\n    ::slotted([slot][data-orientation='horizontal']) {\n      align-items: center;\n      align-self: stretch;\n      gap: 8px;\n    }\n  `;\n\n  @query('edgeless-tool-icon-button')\n  private accessor _trigger!: EdgelessToolIconButton;\n\n  @query('edgeless-menu-content')\n  private accessor _content!: EdgelessMenuContent;\n\n  private _popper!: ReturnType<typeof createButtonPopper>;\n\n  @property({ attribute: false })\n  accessor button!: string | TemplateResult<1>;\n\n  @property({ attribute: false })\n  accessor contentPadding: string | undefined = undefined;\n\n  close() {\n    this._popper?.hide();\n  }\n\n  override firstUpdated() {\n    this._popper = createButtonPopper(\n      this._trigger,\n      this._content,\n      ({ display }) => {\n        this._trigger.showTooltip = display === 'hidden';\n      },\n      12\n    );\n    this._disposables.addFromEvent(this, 'keydown', (e: KeyboardEvent) => {\n      e.stopPropagation();\n      if (e.key === 'Escape') {\n        this._popper.hide();\n      }\n    });\n    this._disposables.addFromEvent(this._trigger, 'click', (_: MouseEvent) => {\n      this._popper.toggle();\n      if (this._popper.state === 'show') {\n        this._content.focus({ preventScroll: true });\n      }\n    });\n    this._disposables.add(this._popper);\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.tabIndex = 0;\n    if (this.contentPadding) {\n      this.style.setProperty('--content-padding', this.contentPadding);\n    }\n  }\n\n  override render() {\n    return html`${this.button}\n      <edgeless-menu-content role=\"menu\" tabindex=\"-1\">\n        <slot></slot>\n      </edgeless-menu-content>`;\n  }\n}\n\n@customElement('edgeless-menu-content')\nexport class EdgelessMenuContent extends LitElement {\n  static override styles = css`\n    :host {\n      display: none;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      padding: var(--content-padding, 0 6px);\n\n      border: 0.5px solid var(--affine-border-color);\n      background: var(--affine-background-overlay-panel-color);\n      box-shadow: var(--affine-shadow-4);\n      border-radius: 4px;\n      min-height: 36px;\n      outline: none;\n    }\n\n    :host([data-show]) {\n      display: flex;\n    }\n  `;\n\n  override render() {\n    return html`<slot></slot>`;\n  }\n}\n\n@customElement('edgeless-menu-divider')\nexport class EdgelessMenuDivider extends LitElement {\n  static override styles = css`\n    :host {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      align-self: stretch;\n\n      width: 4px;\n    }\n\n    :host::after {\n      content: '';\n      display: flex;\n      width: 0.5px;\n      height: 100%;\n      background-color: var(--affine-border-color);\n    }\n\n    :host([data-orientation='horizontal']) {\n      height: var(--height, 4px);\n      width: unset;\n    }\n\n    :host([data-orientation='horizontal'])::after {\n      height: 0.5px;\n      width: 100%;\n    }\n  `;\n}\n\nexport function renderMenuDivider() {\n  return html`<edgeless-menu-divider></edgeless-menu-divider>`;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'edgeless-menu-button': EdgelessMenuButton;\n    'edgeless-menu-content': EdgelessMenuContent;\n    'edgeless-menu-divider': EdgelessMenuDivider;\n  }\n}\n"]}