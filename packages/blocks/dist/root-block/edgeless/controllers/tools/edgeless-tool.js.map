{"version":3,"file":"edgeless-tool.js","sourceRoot":"","sources":["../../../../../src/root-block/edgeless/controllers/tools/edgeless-tool.ts"],"names":[],"mappings":"AAQA,MAAM,OAAgB,sBAAsB;IAG1C,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,aAAa,CAAC;IAC5B,CAAC;IAED,IAAc,QAAQ;QACpB,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;IAChC,CAAC;IAED,IAAc,IAAI;QAChB,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;IAC5B,CAAC;IAED,IAAc,OAAO;QACnB,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC;IACvC,CAAC;IAYD,YAAY,OAA4B;QAR9B,kBAAa,GAAyB,IAAI,CAAC;QAIrD,gBAAW,GAAG,KAAK,CAAC;QAKlB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;IAC1B,CAAC;IAED,KAAK,CAAC,QAAoC;QACxC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC5B,CAAC;CAuBF","sourcesContent":["import type { PointerEventState } from '@blocksuite/block-std';\n\nimport type { EdgelessBlockModel } from '../../edgeless-block-model.js';\nimport type { EdgelessRootBlockComponent } from '../../edgeless-root-block.js';\nimport type { EdgelessRootService } from '../../edgeless-root-service.js';\nimport type { SelectionArea } from '../../services/tools-manager.js';\nimport type { EdgelessTool } from '../../types.js';\n\nexport abstract class EdgelessToolController<\n  Tool extends EdgelessTool = EdgelessTool,\n> {\n  get draggingArea() {\n    return this._draggingArea;\n  }\n\n  protected get _surface() {\n    return this._edgeless.surface;\n  }\n\n  protected get _doc() {\n    return this._edgeless.doc;\n  }\n\n  protected get _blocks(): EdgelessBlockModel[] {\n    return this._edgeless.service.blocks;\n  }\n\n  protected _edgeless!: EdgelessRootBlockComponent;\n\n  protected _draggingArea: SelectionArea | null = null;\n\n  protected _service: EdgelessRootService;\n\n  enableHover = false;\n\n  abstract tool: Tool;\n\n  constructor(service: EdgelessRootService) {\n    this._service = service;\n  }\n\n  mount(edgeless: EdgelessRootBlockComponent) {\n    this._edgeless = edgeless;\n  }\n  abstract onContainerPointerDown(e: PointerEventState): void;\n  abstract onContainerDragStart(e: PointerEventState): void;\n  abstract onContainerDragMove(e: PointerEventState): void;\n  abstract onContainerDragEnd(e: PointerEventState): void;\n  abstract onContainerClick(e: PointerEventState): void;\n  abstract onContainerDblClick(e: PointerEventState): void;\n  abstract onContainerTripleClick(e: PointerEventState): void;\n  abstract onContainerMouseMove(e: PointerEventState): void;\n  abstract onContainerMouseOut(e: PointerEventState): void;\n  abstract onContainerContextMenu(e: PointerEventState): void;\n  abstract beforeModeSwitch(prevMode: Tool): void;\n  abstract afterModeSwitch(newMode: Tool): void;\n\n  /**\n   * @warning Check `!ev.repeat` before calling this function in KeyboardEvents where needed\n   */\n  abstract onPressShiftKey(pressed: boolean): void;\n\n  /**\n   * @warning Check `!ev.repeat` before calling this function in KeyboardEvents where needed\n   */\n  abstract onPressSpaceBar(pressed: boolean): void;\n}\n"]}