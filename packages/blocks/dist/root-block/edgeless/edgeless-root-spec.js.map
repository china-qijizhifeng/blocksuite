{"version":3,"file":"edgeless-root-spec.js","sourceRoot":"","sources":["../../../src/root-block/edgeless/edgeless-root-spec.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\n  BlockElement,\n  BlockService,\n  BlockSpec,\n  BlockSpecSlots,\n} from '@blocksuite/block-std';\nimport { literal, unsafeStatic } from 'lit/static-html.js';\n\nimport { RootBlockSchema } from '../root-model.js';\nimport { AFFINE_DOC_REMOTE_SELECTION_WIDGET } from '../widgets/doc-remote-selection/doc-remote-selection.js';\nimport { AFFINE_DRAG_HANDLE_WIDGET } from '../widgets/drag-handle/drag-handle.js';\nimport { AFFINE_EDGELESS_AUTO_CONNECT_WIDGET } from '../widgets/edgeless-auto-connect/edgeless-auto-connect.js';\nimport { AFFINE_EDGELESS_REMOTE_SELECTION_WIDGET } from '../widgets/edgeless-remote-selection/index.js';\nimport { AFFINE_EDGELESS_ZOOM_TOOLBAR_WIDGET } from '../widgets/edgeless-zoom-toolbar/index.js';\nimport { AFFINE_EMBED_CARD_TOOLBAR_WIDGET } from '../widgets/embed-card-toolbar/embed-card-toolbar.js';\nimport { AFFINE_FORMAT_BAR_WIDGET } from '../widgets/format-bar/format-bar.js';\nimport { EDGELESS_ELEMENT_TOOLBAR_WIDGET } from '../widgets/index.js';\nimport { AFFINE_INNER_MODAL_WIDGET } from '../widgets/inner-modal/inner-modal.js';\nimport { AFFINE_LINKED_DOC_WIDGET } from '../widgets/linked-doc/index.js';\nimport { AFFINE_MODAL_WIDGET } from '../widgets/modal/modal.js';\nimport { AFFINE_PIE_MENU_WIDGET } from '../widgets/pie-menu/index.js';\nimport { AFFINE_SLASH_MENU_WIDGET } from '../widgets/slash-menu/index.js';\nimport { AFFINE_VIEWPORT_OVERLAY_WIDGET } from '../widgets/viewport-overlay/viewport-overlay.js';\nimport type { EdgelessRootBlockComponent } from './edgeless-root-block.js';\nimport { EdgelessRootService } from './edgeless-root-service.js';\n\nexport type EdgelessRootBlockWidgetName =\n  // | typeof AFFINE_BLOCK_HUB_WIDGET\n  | typeof AFFINE_MODAL_WIDGET\n  | typeof AFFINE_INNER_MODAL_WIDGET\n  | typeof AFFINE_PIE_MENU_WIDGET\n  | typeof AFFINE_SLASH_MENU_WIDGET\n  | typeof AFFINE_LINKED_DOC_WIDGET\n  | typeof AFFINE_DRAG_HANDLE_WIDGET\n  | typeof AFFINE_EMBED_CARD_TOOLBAR_WIDGET\n  | typeof AFFINE_FORMAT_BAR_WIDGET\n  | typeof AFFINE_DOC_REMOTE_SELECTION_WIDGET\n  | typeof AFFINE_EDGELESS_REMOTE_SELECTION_WIDGET\n  | typeof AFFINE_EDGELESS_ZOOM_TOOLBAR_WIDGET\n  | typeof EDGELESS_ELEMENT_TOOLBAR_WIDGET\n  | typeof AFFINE_VIEWPORT_OVERLAY_WIDGET\n  | typeof AFFINE_EDGELESS_AUTO_CONNECT_WIDGET;\n\nexport const EdgelessRootBlockSpec: BlockSpec<EdgelessRootBlockWidgetName> = {\n  schema: RootBlockSchema,\n  service: EdgelessRootService,\n  view: {\n    component: literal`affine-edgeless-root`,\n    widgets: {\n      // [AFFINE_BLOCK_HUB_WIDGET]: literal`${unsafeStatic(\n      //   AFFINE_BLOCK_HUB_WIDGET\n      // )}`,\n      [AFFINE_MODAL_WIDGET]: literal`${unsafeStatic(AFFINE_MODAL_WIDGET)}`,\n      [AFFINE_INNER_MODAL_WIDGET]: literal`${unsafeStatic(AFFINE_INNER_MODAL_WIDGET)}`,\n      [AFFINE_PIE_MENU_WIDGET]: literal`${unsafeStatic(AFFINE_PIE_MENU_WIDGET)}`,\n      [AFFINE_SLASH_MENU_WIDGET]: literal`${unsafeStatic(\n        AFFINE_SLASH_MENU_WIDGET\n      )}`,\n      [AFFINE_LINKED_DOC_WIDGET]: literal`${unsafeStatic(\n        AFFINE_LINKED_DOC_WIDGET\n      )}`,\n      [AFFINE_DRAG_HANDLE_WIDGET]: literal`${unsafeStatic(\n        AFFINE_DRAG_HANDLE_WIDGET\n      )}`,\n      [AFFINE_EMBED_CARD_TOOLBAR_WIDGET]: literal`${unsafeStatic(\n        AFFINE_EMBED_CARD_TOOLBAR_WIDGET\n      )}`,\n      [AFFINE_FORMAT_BAR_WIDGET]: literal`${unsafeStatic(\n        AFFINE_FORMAT_BAR_WIDGET\n      )}`,\n      [AFFINE_DOC_REMOTE_SELECTION_WIDGET]: literal`${unsafeStatic(\n        AFFINE_DOC_REMOTE_SELECTION_WIDGET\n      )}`,\n      [AFFINE_EDGELESS_REMOTE_SELECTION_WIDGET]: literal`${unsafeStatic(\n        AFFINE_EDGELESS_REMOTE_SELECTION_WIDGET\n      )}`,\n      [AFFINE_EDGELESS_ZOOM_TOOLBAR_WIDGET]: literal`${unsafeStatic(\n        AFFINE_EDGELESS_ZOOM_TOOLBAR_WIDGET\n      )}`,\n      [EDGELESS_ELEMENT_TOOLBAR_WIDGET]: literal`${unsafeStatic(EDGELESS_ELEMENT_TOOLBAR_WIDGET)}`,\n      [AFFINE_VIEWPORT_OVERLAY_WIDGET]: literal`${unsafeStatic(\n        AFFINE_VIEWPORT_OVERLAY_WIDGET\n      )}`,\n      [AFFINE_EDGELESS_AUTO_CONNECT_WIDGET]: literal`${unsafeStatic(\n        AFFINE_EDGELESS_AUTO_CONNECT_WIDGET\n      )}`,\n    },\n  },\n};\n\nexport const PreviewEdgelessRootBlockSpec: BlockSpec = {\n  schema: RootBlockSchema,\n  service: EdgelessRootService,\n  view: {\n    component: literal`affine-edgeless-root`,\n  },\n  setup(slots: BlockSpecSlots) {\n    slots.viewConnected.on(\n      ({\n        component,\n        service,\n      }: {\n        component: BlockElement;\n        service: BlockService;\n      }) => {\n        // Does not allow the edgeless to display toolbar.\n        (component as EdgelessRootBlockComponent).disableComponents = true;\n        // Does not allow the user to move and zoom.\n        (service as EdgelessRootService).locked = true;\n      }\n    );\n  },\n};\n"]}