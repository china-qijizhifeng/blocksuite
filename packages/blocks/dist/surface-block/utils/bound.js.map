{"version":3,"file":"bound.js","sourceRoot":"","sources":["../../../src/surface-block/utils/bound.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IBound } from '../consts.js';\nimport {\n  EPSILON,\n  getBoundsFromPoints,\n  getBoundsWithRotation,\n  lineIntersects,\n  polygonPointDistance,\n} from './math-utils.js';\nimport type { IVec } from './vec.js';\nimport {\n  deserializeXYWH,\n  type SerializedXYWH,\n  serializeXYWH,\n  type XYWH,\n} from './xywh.js';\n\nexport class Bound implements IBound {\n  get points(): IVec[] {\n    return [\n      [this.x, this.y],\n      [this.x + this.w, this.y],\n      [this.x + this.w, this.y + this.h],\n      [this.x, this.y + this.h],\n    ];\n  }\n\n  get midPoints(): IVec[] {\n    return [\n      [this.x + this.w / 2, this.y],\n      [this.x + this.w, this.y + this.h / 2],\n      [this.x + this.w / 2, this.y + this.h],\n      [this.x, this.y + this.h / 2],\n    ];\n  }\n\n  get center(): IVec {\n    return [this.x + this.w / 2, this.y + this.h / 2];\n  }\n\n  set center([cx, cy]: IVec) {\n    const [px, py] = this.center;\n    this.x += cx - px;\n    this.y += cy - py;\n  }\n\n  get minX() {\n    return this.x;\n  }\n\n  get minY() {\n    return this.y;\n  }\n\n  get maxX() {\n    return this.x + this.w;\n  }\n\n  get maxY() {\n    return this.y + this.h;\n  }\n\n  get tl(): IVec {\n    return [this.x, this.y];\n  }\n\n  get tr() {\n    return [this.x + this.w, this.y];\n  }\n\n  get bl() {\n    return [this.x, this.y + this.h];\n  }\n\n  get br() {\n    return [this.x + this.w, this.y + this.h];\n  }\n\n  get verticalLine(): IVec[] {\n    return [\n      [this.x + this.w / 2, this.y],\n      [this.x + this.w / 2, this.y + this.h],\n    ];\n  }\n\n  get horizontalLine(): IVec[] {\n    return [\n      [this.x, this.y + this.h / 2],\n      [this.x + this.w, this.y + this.h / 2],\n    ];\n  }\n\n  get upperLine(): IVec[] {\n    return [\n      [this.x, this.y],\n      [this.x + this.w, this.y],\n    ];\n  }\n\n  get lowerLine(): IVec[] {\n    return [\n      [this.x, this.y + this.h],\n      [this.x + this.w, this.y + this.h],\n    ];\n  }\n\n  get leftLine(): IVec[] {\n    return [\n      [this.x, this.y],\n      [this.x, this.y + this.h],\n    ];\n  }\n\n  get rightLine(): IVec[] {\n    return [\n      [this.x + this.w, this.y],\n      [this.x + this.w, this.y + this.h],\n    ];\n  }\n\n  x: number;\n\n  y: number;\n\n  w: number;\n\n  h: number;\n\n  constructor(x = 0, y = 0, w = 0, h = 0) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n  }\n\n  containsPoint([x, y]: IVec): boolean {\n    const { minX, minY, maxX, maxY } = this;\n    return minX <= x && x <= maxX && minY <= y && y <= maxY;\n  }\n\n  intersectLine(sp: IVec, ep: IVec, infinite = false) {\n    const rst: IVec[] = [];\n    [\n      [this.tl, this.tr],\n      [this.tl, this.bl],\n      [this.tr, this.br],\n      [this.bl, this.br],\n    ].forEach(([p1, p2]) => {\n      const p = lineIntersects(sp, ep, p1, p2, infinite);\n      if (p) rst.push(p);\n    });\n    return rst.length === 0 ? null : rst;\n  }\n\n  isIntersectWithBound(bound: Bound, epsilon = EPSILON) {\n    return (\n      bound.maxX > this.minX - epsilon &&\n      bound.maxY > this.minY - epsilon &&\n      bound.minX < this.maxX + epsilon &&\n      bound.minY < this.maxY + epsilon &&\n      !this.contains(bound) &&\n      !bound.contains(this)\n    );\n  }\n\n  isOverlapWithBound(bound: Bound, epsilon = EPSILON) {\n    return (\n      bound.maxX > this.minX - epsilon &&\n      bound.maxY > this.minY - epsilon &&\n      bound.minX < this.maxX + epsilon &&\n      bound.minY < this.maxY + epsilon\n    );\n  }\n\n  unite(bound: Bound) {\n    const x1 = Math.min(this.x, bound.x),\n      y1 = Math.min(this.y, bound.y),\n      x2 = Math.max(this.maxX, bound.maxX),\n      y2 = Math.max(this.maxY, bound.maxY);\n    return new Bound(x1, y1, x2 - x1, y2 - y1);\n  }\n\n  include(point: IVec) {\n    const x1 = Math.min(this.x, point[0]),\n      y1 = Math.min(this.y, point[1]),\n      x2 = Math.max(this.maxX, point[0]),\n      y2 = Math.max(this.maxY, point[1]);\n    return new Bound(x1, y1, x2 - x1, y2 - y1);\n  }\n\n  getRelativePoint([x, y]: IVec): IVec {\n    return [this.x + x * this.w, this.y + y * this.h];\n  }\n\n  toRelative([x, y]: IVec): IVec {\n    return [(x - this.x) / this.w, (y - this.y) / this.h];\n  }\n\n  serialize(): SerializedXYWH {\n    return serializeXYWH(this.x, this.y, this.w, this.h);\n  }\n\n  clone(): Bound {\n    return new Bound(this.x, this.y, this.w, this.h);\n  }\n\n  isHorizontalCross(bound: Bound) {\n    return !(this.maxY < bound.minY || this.minY > bound.maxY);\n  }\n\n  isVerticalCross(bound: Bound) {\n    return !(this.maxX < bound.minX || this.minX > bound.maxX);\n  }\n\n  horizontalDistance(bound: Bound) {\n    return Math.min(\n      Math.abs(this.minX - bound.maxX),\n      Math.abs(this.maxX - bound.minX)\n    );\n  }\n\n  verticalDistance(bound: Bound) {\n    return Math.min(\n      Math.abs(this.minY - bound.maxY),\n      Math.abs(this.maxY - bound.minY)\n    );\n  }\n\n  expand(\n    left: number,\n    top: number = left,\n    right: number = left,\n    bottom: number = top\n  ) {\n    return new Bound(\n      this.x - left,\n      this.y - top,\n      this.w + left + right,\n      this.h + top + bottom\n    );\n  }\n\n  isPointInBound([x, y]: IVec, tolerance = 0.01) {\n    return (\n      x > this.minX + tolerance &&\n      x < this.maxX - tolerance &&\n      y > this.minY + tolerance &&\n      y < this.maxY - tolerance\n    );\n  }\n\n  isPointNearBound([x, y]: IVec, tolerance = 0.01) {\n    return polygonPointDistance(this.points, [x, y]) < tolerance;\n  }\n\n  contains(bound: Bound) {\n    return (\n      bound.x >= this.x &&\n      bound.y >= this.y &&\n      bound.maxX <= this.maxX &&\n      bound.maxY <= this.maxY\n    );\n  }\n\n  getVerticesAndMidpoints() {\n    return [...this.points, ...this.midPoints];\n  }\n\n  toXYWH(): XYWH {\n    return [this.x, this.y, this.w, this.h];\n  }\n\n  static deserialize(s: string) {\n    const [x, y, w, h] = deserializeXYWH(s);\n    return new Bound(x, y, w, h);\n  }\n\n  static serialize(bound: IBound) {\n    return serializeXYWH(bound.x, bound.y, bound.w, bound.h);\n  }\n\n  static fromXYWH(xywh: XYWH) {\n    return new Bound(xywh[0], xywh[1], xywh[2], xywh[3]);\n  }\n\n  static from(arg1: IBound) {\n    return new Bound(arg1.x, arg1.y, arg1.w, arg1.h);\n  }\n\n  static fromDOMRect({ left, top, width, height }: DOMRect) {\n    return new Bound(left, top, width, height);\n  }\n\n  static fromPoints(points: IVec[]) {\n    const { minX, minY, maxX, maxY } = getBoundsFromPoints(points);\n    return new Bound(minX, minY, maxX - minX, maxY - minY);\n  }\n\n  static fromCenter(center: IVec, width: number, height: number) {\n    const [x, y] = center;\n    return new Bound(x - width / 2, y - height / 2, width, height);\n  }\n}\n\nfunction getExpandedBound(a: IBound, b: IBound): IBound {\n  const minX = Math.min(a.x, b.x);\n  const minY = Math.min(a.y, b.y);\n  const maxX = Math.max(a.x + a.w, b.x + b.w);\n  const maxY = Math.max(a.y + a.h, b.y + b.h);\n  const width = Math.abs(maxX - minX);\n  const height = Math.abs(maxY - minY);\n\n  return {\n    x: minX,\n    y: minY,\n    w: width,\n    h: height,\n  };\n}\n\nexport function getCommonBound(bounds: IBound[]): Bound | null {\n  if (!bounds.length) {\n    return null;\n  }\n  if (bounds.length === 1) {\n    const { x, y, w, h } = bounds[0];\n    return new Bound(x, y, w, h);\n  }\n\n  let result = bounds[0];\n\n  for (let i = 1; i < bounds.length; i++) {\n    result = getExpandedBound(result, bounds[i]);\n  }\n\n  return new Bound(result.x, result.y, result.w, result.h);\n}\n\nexport function getElementsBound(bounds: IBound[]): Bound {\n  let minX = Number.POSITIVE_INFINITY;\n  let minY = Number.POSITIVE_INFINITY;\n  let maxX = Number.NEGATIVE_INFINITY;\n  let maxY = Number.NEGATIVE_INFINITY;\n\n  bounds.forEach(ele => {\n    const b = getBoundsWithRotation(ele);\n\n    minX = Math.min(minX, b.x);\n    minY = Math.min(minY, b.y);\n    maxX = Math.max(maxX, b.x + b.w);\n    maxY = Math.max(maxY, b.y + b.h);\n  });\n\n  return new Bound(minX, minY, maxX - minX, maxY - minY);\n}\n\nexport function getBoundFromPoints(points: number[][]) {\n  const { minX, minY, width, height } = getBoundsFromPoints(points);\n  return new Bound(minX, minY, width, height);\n}\n\nexport function inflateBound(bound: IBound, delta: number) {\n  const half = delta / 2;\n\n  const newBound = new Bound(\n    bound.x - half,\n    bound.y - half,\n    bound.w + delta,\n    bound.h + delta\n  );\n\n  if (newBound.w <= 0 || newBound.h <= 0) {\n    throw new Error('Invalid delta range or bound size.');\n  }\n\n  return newBound;\n}\n\nexport function transformPointsToNewBound<T extends { x: number; y: number }>(\n  points: T[],\n  oldBound: IBound,\n  oldMargin: number,\n  newBound: IBound,\n  newMargin: number\n) {\n  const wholeOldMargin = oldMargin * 2;\n  const wholeNewMargin = newMargin * 2;\n  const oldW = Math.max(oldBound.w - wholeOldMargin, 1);\n  const oldH = Math.max(oldBound.h - wholeOldMargin, 1);\n  const newW = Math.max(newBound.w - wholeNewMargin, 1);\n  const newH = Math.max(newBound.h - wholeNewMargin, 1);\n\n  const transformedPoints = points.map(p => {\n    return {\n      ...p,\n      x: newW * ((p.x - oldMargin) / oldW) + newMargin,\n      y: newH * ((p.y - oldMargin) / oldH) + newMargin,\n    } as T;\n  });\n\n  return {\n    points: transformedPoints,\n    bound: new Bound(\n      newBound.x,\n      newBound.y,\n      newW + wholeNewMargin,\n      newH + wholeNewMargin\n    ),\n  };\n}\n"]}