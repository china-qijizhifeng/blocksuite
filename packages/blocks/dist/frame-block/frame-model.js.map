{"version":3,"file":"frame-model.js","sourceRoot":"","sources":["../../src/frame-block/frame-model.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,UAAU,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAElE,OAAO,EAAE,UAAU,EAAE,MAAM,kDAAkD,CAAC;AAE9E,OAAO,EAAE,KAAK,EAAE,MAAM,iCAAiC,CAAC;AAUxD,MAAM,CAAC,MAAM,gBAAgB,GAAG,iBAAiB,CAAC;IAChD,OAAO,EAAE,cAAc;IACvB,KAAK,EAAE,CAAC,QAAQ,EAAmB,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,QAAQ,CAAC,IAAI,EAAE;QACtB,UAAU,EAAE,8BAA8B;QAC1C,IAAI,EAAE,eAAe;QACrB,KAAK,EAAE,IAAI;KACZ,CAAC;IACF,QAAQ,EAAE;QACR,OAAO,EAAE,CAAC;QACV,IAAI,EAAE,SAAS;QACf,MAAM,EAAE,CAAC,gBAAgB,CAAC;QAC1B,QAAQ,EAAE,EAAE;KACb;IACD,OAAO,EAAE,GAAG,EAAE;QACZ,OAAO,IAAI,eAAe,EAAE,CAAC;IAC/B,CAAC;CACF,CAAC,CAAC;AAEH,MAAM,OAAO,eAAgB,SAAQ,UAAU,CAAkB,UAAU,CAAC;aACnE,YAAO,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IAEhB,OAAO,CAAC,CAAS,EAAE,CAAS,EAAE,CAAkB;QACvD,MAAM,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,MAAM,GAAG,GAAG,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9C,IAAI,GAAG;YAAE,OAAO,IAAI,CAAC;QAErB,OAAO,IAAI,CAAC,aAAa,EAAE,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC;IAC7D,CAAC;IAEQ,SAAS,CAAC,aAAoB;QACrC,MAAM,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,OAAO,CACL,KAAK,CAAC,oBAAoB,CAAC,aAAa,CAAC,IAAI,aAAa,CAAC,QAAQ,CAAC,KAAK,CAAC,CAC3E,CAAC;IACJ,CAAC","sourcesContent":["import type { Text } from '@blocksuite/store';\nimport { BlockModel, defineBlockSchema } from '@blocksuite/store';\n\nimport { selectable } from '../_common/edgeless/mixin/edgeless-selectable.js';\nimport type { IHitTestOptions } from '../surface-block/element-model/base.js';\nimport { Bound } from '../surface-block/utils/bound.js';\nimport type { SerializedXYWH } from '../surface-block/utils/xywh.js';\n\ntype FrameBlockProps = {\n  title: Text;\n  background: string;\n  xywh: SerializedXYWH;\n  index: string;\n};\n\nexport const FrameBlockSchema = defineBlockSchema({\n  flavour: 'affine:frame',\n  props: (internal): FrameBlockProps => ({\n    title: internal.Text(),\n    background: '--affine-palette-transparent',\n    xywh: `[0,0,100,100]`,\n    index: 'a0',\n  }),\n  metadata: {\n    version: 1,\n    role: 'content',\n    parent: ['affine:surface'],\n    children: [],\n  },\n  toModel: () => {\n    return new FrameBlockModel();\n  },\n});\n\nexport class FrameBlockModel extends selectable<FrameBlockProps>(BlockModel) {\n  static PADDING = [8, 10];\n\n  override hitTest(x: number, y: number, _: IHitTestOptions): boolean {\n    const bound = Bound.deserialize(this.xywh);\n    const hit = bound.isPointNearBound([x, y], 5);\n\n    if (hit) return true;\n\n    return this.externalBound?.isPointInBound([x, y]) ?? false;\n  }\n\n  override boxSelect(selectedBound: Bound): boolean {\n    const bound = Bound.deserialize(this.xywh);\n    return (\n      bound.isIntersectWithBound(selectedBound) || selectedBound.contains(bound)\n    );\n  }\n}\n\ndeclare global {\n  namespace BlockSuite {\n    interface EdgelessBlockModelMap {\n      'affine:frame': FrameBlockModel;\n    }\n  }\n}\n"]}