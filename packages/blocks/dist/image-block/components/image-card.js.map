{"version":3,"file":"image-card.js","sourceRoot":"","sources":["../../../src/image-block/components/image-card.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,iBAAiB,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AAC1E,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAChC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AAEvD,OAAO,EAAE,aAAa,EAAE,MAAM,6BAA6B,CAAC;AAE5D,OAAO,EAAE,eAAe,EAAE,SAAS,EAAE,WAAW,EAAE,MAAM,cAAc,CAAC;AAEvE,MAAM,CAAC,MAAM,wBAAwB,GAAG,GAAG,CAAC;AAC5C,MAAM,CAAC,MAAM,yBAAyB,GAAG,GAAG,CAAC;AAC7C,MAAM,CAAC,MAAM,qBAAqB,GAAG,GAAG,CAAC;AACzC,MAAM,CAAC,MAAM,sBAAsB,GAAG,EAAE,CAAC;IAG5B,eAAe;4BAD3B,aAAa,CAAC,yBAAyB,CAAC;;;;sBACJ,cAAc,CAAC,iBAAiB,CAAC;;;;+BAAzC,SAAQ,WAAiC;;;;iCA+CnE,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAC/B,oKAAS,KAAK,6BAAL,KAAK,qFAAuB;YAhDvC,6KAmGC;;;;iBAlGiB,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4C3B,AA5CqB,CA4CpB;QAGF,+EAAqC;QAArC,IAAS,KAAK,2CAAuB;QAArC,IAAS,KAAK,iDAAuB;QAE5B,MAAM;YACb,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YAE1D,MAAM,KAAK,GAAG,WAAW;gBACvB,CAAC,CAAC,GAAG,wBAAwB,IAAI;gBACjC,CAAC,CAAC,GAAG,qBAAqB,IAAI,CAAC;YAEjC,MAAM,MAAM,GAAG,WAAW;gBACxB,CAAC,CAAC,GAAG,yBAAyB,IAAI;gBAClC,CAAC,CAAC,GAAG,sBAAsB,IAAI,CAAC;YAElC,MAAM,MAAM,GAAG,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAE9C,MAAM,YAAY,GAAG,QAAQ,CAAC;gBAC5B,SAAS,EAAE,UAAU,MAAM,MAAM;gBACjC,eAAe,EAAE,QAAQ;gBACzB,KAAK;gBACL,MAAM;aACP,CAAC,CAAC;YAEH,MAAM,SAAS,GAAG,OAAO;gBACvB,CAAC,CAAC,WAAW;gBACb,CAAC,CAAC,KAAK;oBACL,CAAC,CAAC,eAAe;oBACjB,CAAC,CAAC,SAAS,CAAC;YAEhB,MAAM,SAAS,GAAG,OAAO;gBACvB,CAAC,CAAC,kBAAkB;gBACpB,CAAC,CAAC,KAAK;oBACL,CAAC,CAAC,uBAAuB;oBACzB,CAAC,CAAC,OAAO,CAAC;YAEd,MAAM,IAAI,GACR,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,GAAG,CAAC;gBAC5B,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;gBACpC,CAAC,CAAC,IAAI,CAAC;YAEX,OAAO,IAAI,CAAA;;iEAEkD,YAAY;;cAE/D,SAAS;+DACwC,SAAS;;gDAExB,IAAI;;;KAG/C,CAAC;QACJ,CAAC;;;;;;YAlGU,uDAAe;;;;;SAAf,eAAe","sourcesContent":["import { ShadowlessElement, WithDisposable } from '@blocksuite/block-std';\nimport { css, html } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { styleMap } from 'lit/directives/style-map.js';\n\nimport { humanFileSize } from '../../_common/utils/math.js';\nimport type { ImageBlockComponent } from '../image-block.js';\nimport { FailedImageIcon, ImageIcon, LoadingIcon } from '../styles.js';\n\nexport const SURFACE_IMAGE_CARD_WIDTH = 220;\nexport const SURFACE_IMAGE_CARD_HEIGHT = 122;\nexport const NOTE_IMAGE_CARD_WIDTH = 752;\nexport const NOTE_IMAGE_CARD_HEIGHT = 78;\n\n@customElement('affine-image-block-card')\nexport class AffineImageCard extends WithDisposable(ShadowlessElement) {\n  static override styles = css`\n    .affine-image-block-card-container {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .affine-image-block-card {\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      background-color: var(--affine-background-secondary-color, #f4f4f5);\n      border-radius: 8px;\n      border: 1px solid var(--affine-background-tertiary-color, #eee);\n      padding: 12px;\n    }\n\n    .affine-image-block-card-content {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      color: var(--affine-placeholder-color);\n      text-align: justify;\n      font-family: var(--affine-font-family);\n      font-size: var(--affine-font-sm);\n      font-style: normal;\n      font-weight: 600;\n      line-height: var(--affine-line-height);\n      user-select: none;\n    }\n\n    .affine-image-card-size {\n      overflow: hidden;\n      padding-top: 12px;\n      color: var(--affine-text-secondary-color);\n      text-overflow: ellipsis;\n      font-size: 10px;\n      font-style: normal;\n      font-weight: 400;\n      line-height: 20px;\n      user-select: none;\n    }\n  `;\n\n  @property({ attribute: false })\n  accessor block!: ImageBlockComponent;\n\n  override render() {\n    const { isInSurface, loading, error, model } = this.block;\n\n    const width = isInSurface\n      ? `${SURFACE_IMAGE_CARD_WIDTH}px`\n      : `${NOTE_IMAGE_CARD_WIDTH}px`;\n\n    const height = isInSurface\n      ? `${SURFACE_IMAGE_CARD_HEIGHT}px`\n      : `${NOTE_IMAGE_CARD_HEIGHT}px`;\n\n    const rotate = isInSurface ? model.rotate : 0;\n\n    const cardStyleMap = styleMap({\n      transform: `rotate(${rotate}deg)`,\n      transformOrigin: 'center',\n      width,\n      height,\n    });\n\n    const titleIcon = loading\n      ? LoadingIcon\n      : error\n        ? FailedImageIcon\n        : ImageIcon;\n\n    const titleText = loading\n      ? 'Loading image...'\n      : error\n        ? 'Image loading failed.'\n        : 'Image';\n\n    const size =\n      !!model.size && model.size > 0\n        ? humanFileSize(model.size, true, 0)\n        : null;\n\n    return html`\n      <div class=\"affine-image-block-card-container\">\n        <div class=\"affine-image-block-card drag-target\" style=${cardStyleMap}>\n          <div class=\"affine-image-block-card-content\">\n            ${titleIcon}\n            <span class=\"affine-image-block-card-title-text\">${titleText}</span>\n          </div>\n          <div class=\"affine-image-card-size\">${size}</div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'affine-image-block-card': AffineImageCard;\n  }\n}\n"]}