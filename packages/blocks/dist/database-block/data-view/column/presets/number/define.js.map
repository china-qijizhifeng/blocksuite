{"version":3,"file":"define.js","sourceRoot":"","sources":["../../../../../../src/database-block/data-view/column/presets/number/define.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,mBAAmB,CAAC;AAEzC,OAAO,EAAE,KAAK,EAAE,MAAM,sCAAsC,CAAC;AAC7D,OAAO,EAAE,OAAO,EAAE,MAAM,+BAA+B,CAAC;AACxD,OAAO,EAAE,UAAU,EAAE,MAAM,wBAAwB,CAAC;AAEpD,MAAM,CAAC,MAAM,gBAAgB,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;AAOrD,MAAM,CAAC,MAAM,uBAAuB,GAAG,gBAAgB,CAAC,WAAW,CAKjE;IACA,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,EAAE;IAC5B,WAAW,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;IACnC,YAAY,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC5C,cAAc,EAAE,IAAI,CAAC,EAAE;QACrB,MAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QACtC,OAAO;YACL,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG;SAC/B,CAAC;IACJ,CAAC;IACD,UAAU,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,IAAI,IAAI;IAChC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,IAAI,IAAI;CAC9B,CAAC,CAAC;AAEH,uBAAuB,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;IACnE,MAAM,EAAE,EAAE;IACV,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC,KAAK,CAAC;CACrD,CAAC,CAAC,CAAC;AAEJ,uBAAuB,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;IAClE,MAAM,EAAE,EAAE;IACV,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;CAC7C,CAAC,CAAC,CAAC","sourcesContent":["import { Text } from '@blocksuite/store';\n\nimport { clamp } from '../../../../../_common/utils/math.js';\nimport { tNumber } from '../../../logical/data-type.js';\nimport { columnType } from '../../column-config.js';\n\nexport const numberColumnType = columnType('number');\n\ndeclare global {\n  interface ColumnConfigMap {\n    [numberColumnType.type]: typeof numberColumnModelConfig.model;\n  }\n}\nexport const numberColumnModelConfig = numberColumnType.modelConfig<\n  number,\n  {\n    decimal: number;\n  }\n>({\n  name: 'Number',\n  type: () => tNumber.create(),\n  defaultData: () => ({ decimal: 0 }),\n  cellToString: data => data?.toString() ?? '',\n  cellFromString: data => {\n    const num = data ? Number(data) : NaN;\n    return {\n      value: isNaN(num) ? null : num,\n    };\n  },\n  cellToJson: data => data ?? null,\n  isEmpty: data => data == null,\n});\n\nnumberColumnModelConfig.addConvert('rich-text', (_column, cells) => ({\n  column: {},\n  cells: cells.map(v => new Text(v?.toString()).yText),\n}));\n\nnumberColumnModelConfig.addConvert('progress', (_column, cells) => ({\n  column: {},\n  cells: cells.map(v => clamp(v ?? 0, 0, 100)),\n}));\n"]}