{"version":3,"file":"base-cell.js","sourceRoot":"","sources":["../../../../src/database-block/data-view/column/base-cell.ts"],"names":[],"mappings":"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","sourcesContent":["import { ShadowlessElement, WithDisposable } from '@blocksuite/block-std';\nimport { property } from 'lit/decorators.js';\n\nimport type {\n  DataViewColumnManager,\n  DataViewManager,\n} from '../view/data-view-manager.js';\nimport type { CellRenderProps, DataViewCellLifeCycle } from './manager.js';\n\nexport abstract class BaseCellRenderer<\n    Value,\n    Data extends Record<string, unknown> = Record<string, unknown>,\n  >\n  extends WithDisposable(ShadowlessElement)\n  implements DataViewCellLifeCycle, CellRenderProps<Data, Value>\n{\n  @property({ attribute: false })\n  accessor view!: DataViewManager;\n\n  @property({ attribute: false })\n  accessor column!: DataViewColumnManager<Value, Data>;\n\n  @property()\n  accessor rowId!: string;\n\n  @property({ attribute: false })\n  accessor isEditing!: boolean;\n\n  @property({ attribute: false })\n  accessor selectCurrentCell!: (editing: boolean) => void;\n\n  get readonly(): boolean {\n    return this.column.readonly;\n  }\n\n  get value() {\n    return this.column.getValue(this.rowId);\n  }\n\n  onChange(value: Value | undefined): void {\n    this.column.setValue(this.rowId, value);\n  }\n\n  beforeEnterEditMode(): boolean {\n    return true;\n  }\n\n  onEnterEditMode(): void {\n    // do nothing\n  }\n\n  onExitEditMode() {\n    // do nothing\n  }\n\n  focusCell() {\n    return true;\n  }\n\n  blurCell() {\n    return true;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.style.width = '100%';\n    this._disposables.addFromEvent(this, 'click', e => {\n      if (this.isEditing) {\n        e.stopPropagation();\n      }\n    });\n    const type = this.column.type;\n    this._disposables.add(\n      this.column.onCellUpdate(this.rowId, () => {\n        if (this.column.type === type) {\n          this.requestUpdate();\n        }\n      })\n    );\n\n    this._disposables.addFromEvent(this, 'copy', e => {\n      if (!this.isEditing) return;\n      e.stopPropagation();\n      this.onCopy(e);\n    });\n\n    this._disposables.addFromEvent(this, 'cut', e => {\n      if (!this.isEditing) return;\n      e.stopPropagation();\n      this.onCut(e);\n    });\n\n    this._disposables.addFromEvent(this, 'paste', e => {\n      if (!this.isEditing) return;\n      e.stopPropagation();\n      this.onPaste(e);\n    });\n  }\n\n  forceUpdate(): void {\n    this.requestUpdate();\n  }\n\n  onCopy(_e: ClipboardEvent) {}\n\n  onCut(_e: ClipboardEvent) {}\n\n  onPaste(_e: ClipboardEvent) {}\n}\n"]}