{"version":3,"file":"tools-renderer.js","sourceRoot":"","sources":["../../../../../src/database-block/data-view/widget/tools/tools-renderer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,4BAA4B,CAAC;AACpC,OAAO,4BAA4B,CAAC;AACpC,OAAO,wCAAwC,CAAC;AAChD,OAAO,oCAAoC,CAAC;AAE5C,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAChC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AACnE,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,MAAM,EAAE,MAAM,0BAA0B,CAAC;AAGlD,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAIlE,OAAO,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAE/C,MAAM,MAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;CAyBjB,CAAC;IAGW,mBAAmB;4BAD/B,aAAa,CAAC,wBAAwB,CAAC;;;;sBACC,UAAU;;;;;;;mCAAlB,SAAQ,WAAU;;;;oCAGhD,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;uCAG9B,KAAK,EAAE;YAFR,6KAAS,QAAQ,6BAAR,QAAQ,2FAAoC;YAGrD,sLAAS,WAAW,6BAAX,WAAW,iGAAS;YAP/B,6KA8BC;;;;iBA7BiB,WAAM,GAAG,MAAM,AAAT,CAAU;QAGhC,qFAAqD;QAArD,IAAS,QAAQ,8CAAoC;QAArD,IAAS,QAAQ,oDAAoC;QAGrD,0IAAuB,KAAK,GAAC;QAA7B,IAAS,WAAW,iDAAS;QAA7B,IAAS,WAAW,uDAAS;QAEpB,MAAM;YACb,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACxB,OAAO;YACT,CAAC;YACD,MAAM,SAAS,GAAG,QAAQ,CAAC;gBACzB,cAAc,EAAE,IAAI,CAAC,WAAW;gBAChC,yBAAyB,EAAE,IAAI;aAChC,CAAC,CAAC;YACH,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5C,OAAO,IAAI,CAAA,gBAAgB,SAAS;QAChC,MAAM,CAAC,KAAK,IAAI,EAAE,EAAE,GAAG,CAAC,EAAE;gBAC1B,MAAM,KAAK,GAAwB;oBACjC,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,WAAW,EAAE,IAAI,CAAC,WAAW;oBAC7B,UAAU,EAAE,IAAI,CAAC,UAAU;oBAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;iBAC5B,CAAC;gBACF,OAAO,YAAY,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YAClC,CAAC,CAAC;WACG,CAAC;QACV,CAAC;;;;;;YA7BU,uDAAmB;;;;;SAAnB,mBAAmB;AAqChC,MAAM,CAAC,MAAM,WAAW,GAAG,CACzB,IAAqB,EACrB,WAA2B,EAC3B,UAAsB,EACtB,EAAE;IACF,OAAO,IAAI,CAAA;oBACO,WAAW;aAClB,IAAI;mBACE,UAAU;6BACA,CAAC;AAC9B,CAAC,CAAC","sourcesContent":["import './presets/search/search.js';\nimport './presets/filter/filter.js';\nimport './presets/view-options/view-options.js';\nimport './presets/table-add-row/add-row.js';\n\nimport { css, html } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { repeat } from 'lit/directives/repeat.js';\n\nimport type { ViewSource } from '../../common/index.js';\nimport { renderUniLit } from '../../utils/uni-component/index.js';\nimport type { DataViewExpose } from '../../view/data-view.js';\nimport type { DataViewManager } from '../../view/data-view-manager.js';\nimport type { DataViewWidget, DataViewWidgetProps } from '../types.js';\nimport { WidgetBase } from '../widget-base.js';\n\nconst styles = css`\n  .affine-database-toolbar {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    visibility: hidden;\n    opacity: 0;\n    transition: opacity 150ms cubic-bezier(0.42, 0, 1, 1);\n  }\n\n  .toolbar-hover-container:hover .affine-database-toolbar {\n    visibility: visible;\n    opacity: 1;\n  }\n\n  .show-toolbar {\n    visibility: visible;\n    opacity: 1;\n  }\n\n  @media print {\n    .affine-database-toolbar {\n      display: none;\n    }\n  }\n`;\n\n@customElement('data-view-header-tools')\nexport class DataViewHeaderTools extends WidgetBase {\n  static override styles = styles;\n\n  @property({ attribute: false })\n  accessor toolsMap!: Record<string, DataViewWidget[]>;\n\n  @state()\n  accessor showToolBar = false;\n\n  override render() {\n    if (this.view.isDeleted) {\n      return;\n    }\n    const classList = classMap({\n      'show-toolbar': this.showToolBar,\n      'affine-database-toolbar': true,\n    });\n    const tools = this.toolsMap[this.view.type];\n    return html` <div class=\"${classList}\">\n      ${repeat(tools ?? [], uni => {\n        const props: DataViewWidgetProps = {\n          view: this.view,\n          viewMethods: this.viewMethods,\n          viewSource: this.viewSource,\n          dataSource: this.dataSource,\n        };\n        return renderUniLit(uni, props);\n      })}\n    </div>`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'data-view-header-tools': DataViewHeaderTools;\n  }\n}\nexport const renderTools = (\n  view: DataViewManager,\n  viewMethods: DataViewExpose,\n  viewSource: ViewSource\n) => {\n  return html` <data-view-header-tools\n    .viewMethods=\"${viewMethods}\"\n    .view=\"${view}\"\n    .viewSource=\"${viewSource}\"\n  ></data-view-header-tools>`;\n};\n"]}