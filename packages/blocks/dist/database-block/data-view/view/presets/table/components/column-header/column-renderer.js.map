{"version":3,"file":"column-renderer.js","sourceRoot":"","sources":["../../../../../../../../src/database-block/data-view/view/presets/table/components/column-header/column-renderer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,iBAAiB,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AAC1E,OAAO,EAAE,GAAG,EAAE,MAAM,KAAK,CAAC;AAC1B,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,EAAE,MAAM,EAAE,MAAM,0BAA0B,CAAC;AAClD,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;IAM7B,qBAAqB;4BADjC,aAAa,CAAC,iCAAiC,CAAC;;;;sBACN,cAAc,CAAC,iBAAiB,CAAC;;;;;;;;;;qCAAzC,SAAQ,WAAiC;;;;4CAQzE,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;kCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;iCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAL/B,qMAAS,gBAAgB,6BAAhB,gBAAgB,2GAAwB;YAGjD,uKAAS,MAAM,6BAAN,MAAM,uFAAyB;YAGxC,oKAAS,KAAK,6BAAL,KAAK,qFAAe;YAf/B,6KAmEC;;;;iBAlEiB,WAAM,GAAG,GAAG,CAAA;;;;;GAK3B,AALqB,CAKpB;QAGF,qGAAiD;QAAjD,IAAS,gBAAgB,sDAAwB;QAAjD,IAAS,gBAAgB,4DAAwB;QAGjD,iJAAwC;QAAxC,IAAS,MAAM,4CAAyB;QAAxC,IAAS,MAAM,kDAAyB;QAGxC,qIAA6B;QAA7B,IAAS,KAAK,2CAAe;QAA7B,IAAS,KAAK,iDAAe;QAErB,WAAW,CAAC,IAAc;YAChC,MAAM,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACzE,OAAO,IAAI,CAAA;;;;;+BAKgB,IAAI,CAAC,gBAAgB;qBAC/B,IAAI,CAAC,MAAM;;UAEtB,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE;gBAC3B,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CACrC,+CAA+C,EAAE,IAAI,CACtD,EAAE,YAAY,CAAC;gBAChB,MAAM,KAAK,GAAG,QAAQ,CAAC;oBACrB,MAAM,EAAE,MAAM,GAAG,IAAI;iBACtB,CAAC,CAAC;gBACH,OAAO,IAAI,CAAA;;;0BAGK,KAAK;;2BAEJ,IAAI,CAAC,MAAM;yBACb,IAAI,CAAC,gBAAgB;0BACpB,EAAE;6BACC,IAAI,CAAC,MAAM,CAAC,EAAE;6BACd,KAAK;gCACF,WAAW;;;iBAG1B,CAAC;YACV,CAAC,CAAC;;;KAGL,CAAC;QACJ,CAAC;QAEQ,MAAM;YACb,MAAM,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC;YACtD,IAAI,CAAC,WAAW,EAAE,CAAC;gBACjB,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;gBACxC,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAChC,CAAC;YACD,OAAO,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;gBACpC,OAAO,IAAI,CAAA;;UAEP,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC;OAC/B,CAAC;YACJ,CAAC,CAAC,CAAC;QACL,CAAC;;;;;;YAlEU,uDAAqB;;;;;SAArB,qBAAqB","sourcesContent":["import { ShadowlessElement, WithDisposable } from '@blocksuite/block-std';\nimport { css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { html } from 'lit/static-html.js';\n\nimport type { DataViewColumnManager } from '../../../../data-view-manager.js';\nimport type { DataViewTableManager } from '../../table-view-manager.js';\n\n@customElement('affine-data-view-column-preview')\nexport class DataViewColumnPreview extends WithDisposable(ShadowlessElement) {\n  static override styles = css`\n    affine-data-view-column-preview {\n      pointer-events: none;\n      display: block;\n    }\n  `;\n\n  @property({ attribute: false })\n  accessor tableViewManager!: DataViewTableManager;\n\n  @property({ attribute: false })\n  accessor column!: DataViewColumnManager;\n\n  @property({ attribute: false })\n  accessor table!: HTMLElement;\n\n  private renderGroup(rows: string[]) {\n    const columnIndex = this.tableViewManager.columnGetIndex(this.column.id);\n    return html`\n      <div\n        style=\"background-color: var(--affine-background-primary-color);border-top: 1px solid var(--affine-border-color);box-shadow: var(--affine-shadow-2);\"\n      >\n        <affine-database-header-column\n          .tableViewManager=\"${this.tableViewManager}\"\n          .column=\"${this.column}\"\n        ></affine-database-header-column>\n        ${repeat(rows, (id, index) => {\n          const height = this.table.querySelector(\n            `affine-database-cell-container[data-row-id=\"${id}\"]`\n          )?.clientHeight;\n          const style = styleMap({\n            height: height + 'px',\n          });\n          return html`<div\n            style=\"border-top: 1px solid var(--affine-border-color)\"\n          >\n            <div style=\"${style}\">\n              <affine-database-cell-container\n                .column=\"${this.column}\"\n                .view=\"${this.tableViewManager}\"\n                .rowId=\"${id}\"\n                .columnId=\"${this.column.id}\"\n                .rowIndex=\"${index}\"\n                .columnIndex=\"${columnIndex}\"\n              ></affine-database-cell-container>\n            </div>\n          </div>`;\n        })}\n      </div>\n      <div style=\"height: 45px;\"></div>\n    `;\n  }\n\n  override render() {\n    const groupHelper = this.tableViewManager.groupHelper;\n    if (!groupHelper) {\n      const rows = this.tableViewManager.rows;\n      return this.renderGroup(rows);\n    }\n    return groupHelper.groups.map(group => {\n      return html`\n        <div style=\"height: 44px;\"></div>\n        ${this.renderGroup(group.rows)}\n      `;\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'affine-data-view-column-preview': DataViewColumnPreview;\n  }\n}\n"]}