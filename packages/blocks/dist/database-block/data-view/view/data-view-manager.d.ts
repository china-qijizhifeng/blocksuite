import { type Disposable, Slot } from '@blocksuite/global/utils';
import type { ColumnMeta } from '../column/column-config.js';
import type { CellRenderer, ColumnConfig } from '../column/index.js';
import type { FilterGroup, Variable } from '../common/ast.js';
import type { DataSource, DetailSlots } from '../common/data-source/base.js';
import type { DataViewContextKey } from '../common/data-source/context.js';
import type { SingleViewSource } from '../common/index.js';
import type { TType } from '../logical/typesystem.js';
import type { ColumnDataUpdater, InsertToPosition } from '../types.js';
import type { UniComponent } from '../utils/uni-component/index.js';
import type { DataViewDataType } from './data-view.js';
export interface DataViewManager {
    get id(): string;
    get type(): string;
    get readonly(): boolean;
    get columnManagerList(): DataViewColumnManager[];
    get columns(): string[];
    get detailColumns(): string[];
    get columnsWithoutFilter(): string[];
    get rows(): string[];
    get filter(): FilterGroup;
    get filterVisible(): boolean;
    get vars(): Variable[];
    get allColumnConfig(): ColumnConfig[];
    get isDeleted(): boolean;
    get detailSlots(): DetailSlots;
    slots: {
        update: Slot<{
            viewId: string;
        }>;
    };
    filterSetVisible(visible: boolean): void;
    updateFilter(filter: FilterGroup): void;
    cellGetValue(rowId: string, columnId: string): unknown;
    cellGetRenderValue(rowId: string, columnId: string): unknown;
    cellGetJsonValue(rowId: string, columnId: string): unknown;
    cellGetStringValue(rowId: string, columnId: string): string;
    cellGetExtra(rowId: string, columnId: string): unknown | undefined;
    cellSetValueFromString(columnId: string, value: string): {
        value: unknown;
        data?: Record<string, unknown>;
    };
    cellUpdateRenderValue(rowId: string, columnId: string, value: unknown): void;
    cellUpdateValue(rowId: string, columnId: string, value: unknown): void;
    rowDelete(ids: string[]): void;
    rowAdd(insertPosition: InsertToPosition): string;
    columnAdd(toAfterOfColumn: InsertToPosition, type?: string): string;
    columnDelete(columnId: string): void;
    columnDuplicate(columnId: string): void;
    columnGet(columnId: string): DataViewColumnManager;
    columnGetMeta(type: string): ColumnMeta;
    columnGetPreColumn(columnId: string): DataViewColumnManager | undefined;
    columnGetNextColumn(columnId: string): DataViewColumnManager | undefined;
    columnGetName(columnId: string): string;
    columnGetType(columnId: string): string;
    columnGetHide(columnId: string): boolean;
    columnGetData(columnId: string): Record<string, unknown>;
    columnGetDataType(columnId: string): TType;
    columnGetIndex(columnId: string): number;
    columnGetIdByIndex(index: number): string;
    columnGetReadonly(columnId: string): boolean;
    columnUpdateName(columnId: string, name: string): void;
    columnUpdateHide(columnId: string, hide: boolean): void;
    columnUpdateType(columnId: string, type: string): void;
    columnUpdateData(columnId: string, data: Record<string, unknown>): void;
    getIcon(type: string): UniComponent | undefined;
    onCellUpdate(rowId: string, columnId: string, callback: () => void): Disposable;
    columnMove(columnId: string, position: InsertToPosition): void;
    rowMove(rowId: string, position: InsertToPosition): void;
    duplicateView(): void;
    deleteView(): void;
    getContext<T>(key: DataViewContextKey<T>): T | undefined;
}
export interface DataViewColumnManager<Value = unknown, Data extends Record<string, unknown> = Record<string, unknown>> {
    get dataViewManager(): DataViewManager;
    get id(): string;
    get index(): number;
    get type(): string;
    get dataType(): TType;
    get name(): string;
    get hide(): boolean;
    get data(): Data;
    get readonly(): boolean;
    get renderer(): CellRenderer;
    get detailRenderer(): CellRenderer;
    get isFirst(): boolean;
    get isLast(): boolean;
    isEmpty(rowId: string): boolean;
    getStringValue(rowId: string): string;
    getJsonValue(rowId: string): unknown;
    getValue(rowId: string): Value | undefined;
    getExtra(rowId: string): unknown;
    setValue(rowId: string, value: Value | undefined): void;
    updateData(updater: ColumnDataUpdater<Data>): void;
    updateHide(hide: boolean): void;
    updateName(name: string): void;
    get updateType(): undefined | ((type: string) => void);
    get delete(): undefined | (() => void);
    get duplicate(): undefined | (() => void);
    get icon(): UniComponent | undefined;
    onCellUpdate(rowId: string, callback: () => void): Disposable;
}
export declare abstract class DataViewManagerBase<ViewData extends DataViewDataType> implements DataViewManager {
    protected get dataSource(): DataSource;
    protected get viewSource(): SingleViewSource<ViewData>;
    get rows(): string[];
    get columnManagerList(): ReturnType<this['columnGet']>[];
    get readonly(): boolean;
    abstract get columns(): string[];
    abstract get detailColumns(): string[];
    abstract get columnsWithoutFilter(): string[];
    abstract get id(): string;
    abstract get type(): string;
    get allColumnConfig(): ColumnConfig[];
    abstract get isDeleted(): boolean;
    get detailSlots(): DetailSlots;
    abstract get filter(): FilterGroup;
    get vars(): Variable[];
    get filterVisible(): boolean;
    private _viewSource?;
    private _dataSource?;
    private searchString;
    private _filterVisible?;
    slots: {
        update: Slot<{
            viewId: string;
        }>;
    };
    private filteredRows;
    getContext<T>(key: DataViewContextKey<T>): T | undefined;
    init(dataSource: DataSource, viewSource: SingleViewSource<ViewData>): void;
    setSearch(str: string): void;
    abstract isShow(rowId: string): boolean;
    onCellUpdate(rowId: string, columnId: string, callback: () => void): Disposable;
    cellGetValue(rowId: string, columnId: string): unknown;
    cellGetJsonValue(rowId: string, columnId: string): unknown;
    cellGetRenderValue(rowId: string, columnId: string): unknown;
    cellGetStringValue(rowId: string, columnId: string): string;
    cellGetExtra(rowId: string, columnId: string): unknown;
    cellSetValueFromString(columnId: string, cellData: string): {
        value: unknown;
        data?: Record<string, unknown> | undefined;
    };
    cellUpdateRenderValue(rowId: string, columnId: string, value: unknown): void;
    cellUpdateValue(rowId: string, columnId: string, value: unknown): void;
    columnAdd(position: InsertToPosition, type?: string): string;
    columnDelete(columnId: string): void;
    columnDuplicate(columnId: string): void;
    abstract columnGet(columnId: string): DataViewColumnManager;
    columnGetMeta(type: string): ColumnMeta;
    columnGetData(columnId: string): Record<string, unknown>;
    columnGetDataType(columnId: string): TType;
    abstract columnGetHide(columnId: string): boolean;
    abstract columnUpdateHide(columnId: string, hide: boolean): void;
    columnGetIdByIndex(index: number): string;
    columnGetReadonly(columnId: string): boolean;
    columnGetIndex(columnId: string): number;
    columnGetName(columnId: string): string;
    columnGetNextColumn(columnId: string): DataViewColumnManager | undefined;
    columnGetPreColumn(columnId: string): DataViewColumnManager | undefined;
    columnGetType(columnId: string): string;
    columnUpdateData(columnId: string, data: Record<string, unknown>): void;
    columnUpdateName(columnId: string, name: string): void;
    columnUpdateType(columnId: string, type: string): void;
    rowAdd(insertPosition: InsertToPosition | number): string;
    rowDelete(ids: string[]): void;
    getIcon(type: string): UniComponent | undefined;
    abstract columnMove(columnId: string, position: InsertToPosition): void;
    abstract deleteView(): void;
    abstract updateFilter(filter: FilterGroup): void;
    filterSetVisible(visible: boolean): void;
    rowMove(rowId: string, position: InsertToPosition): void;
    abstract duplicateView(): void;
}
export declare abstract class DataViewColumnManagerBase implements DataViewColumnManager {
    protected propertyId: string;
    dataViewManager: DataViewManager;
    protected constructor(propertyId: string, dataViewManager: DataViewManager);
    get index(): number;
    get data(): Record<string, unknown>;
    get hide(): boolean;
    get id(): string;
    get isFirst(): boolean;
    get isLast(): boolean;
    get name(): string;
    get renderer(): CellRenderer;
    get detailRenderer(): CellRenderer;
    get type(): string;
    get dataType(): TType;
    isEmpty(rowId: string): boolean;
    getValue(rowId: string): unknown | undefined;
    getExtra(rowId: string): unknown;
    setValue(rowId: string, value: unknown | undefined): void;
    updateData(updater: ColumnDataUpdater): void;
    updateHide(hide: boolean): void;
    updateName(name: string): void;
    get delete(): (() => void) | undefined;
    get duplicate(): (() => void) | undefined;
    get updateType(): undefined | ((type: string) => void);
    get readonly(): boolean;
    getJsonValue(rowId: string): unknown;
    getStringValue(rowId: string): string;
    setValueFromString(value: string): unknown;
    get icon(): UniComponent | undefined;
    onCellUpdate(rowId: string, callback: () => void): Disposable;
}
//# sourceMappingURL=data-view-manager.d.ts.map